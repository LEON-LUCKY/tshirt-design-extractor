{"version":3,"file":"js/app.77c6fdb1.js","mappings":"mEAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,MAAM,KAAO,cAAc,aAAa,aAAa,CAACF,EAAG,IAAI,CAACG,YAAY,eAAeD,MAAM,CAAC,KAAO,kBAAkB,CAACJ,EAAIM,GAAG,YAAYJ,EAAG,gBAAgB,CAACE,MAAM,CAAC,WAAWJ,EAAIO,MAAM,WAAWP,EAAIQ,QAAQ,CAACN,EAAG,SAAS,CAACG,YAAY,aAAaD,MAAM,CAAC,KAAO,WAAW,CAACF,EAAG,KAAK,CAACG,YAAY,aAAa,CAACH,EAAG,OAAO,CAACG,YAAY,aAAaD,MAAM,CAAC,cAAc,SAAS,CAACJ,EAAIM,GAAG,QAAQN,EAAIM,GAAG,gBAAgBJ,EAAG,IAAI,CAACG,YAAY,gBAAgB,CAACL,EAAIM,GAAG,mCAAmCJ,EAAG,OAAO,CAACG,YAAY,WAAWD,MAAM,CAAC,GAAK,eAAe,KAAO,OAAO,aAAa,WAAW,CAACF,EAAG,UAAU,CAACG,YAAY,cAAcD,MAAM,CAAC,kBAAkB,iBAAiB,KAAO,WAAW,CAACF,EAAG,MAAM,CAACG,YAAY,kBAAkB,CAACH,EAAG,OAAO,CAACG,YAAY,cAAcD,MAAM,CAAC,cAAc,SAAS,CAACJ,EAAIM,GAAG,OAAOJ,EAAG,KAAK,CAACG,YAAY,gBAAgBD,MAAM,CAAC,GAAK,mBAAmB,CAACJ,EAAIM,GAAG,YAAYJ,EAAG,gBAAgB,CAACO,GAAG,CAAC,iBAAiBT,EAAIU,YAAY,eAAeV,EAAIW,YAAY,gBAAgBX,EAAIQ,UAAU,GAAIR,EAAIY,iBAAkBV,EAAG,UAAU,CAACG,YAAY,cAAcD,MAAM,CAAC,kBAAkB,kBAAkB,KAAO,WAAW,CAACF,EAAG,MAAM,CAACG,YAAY,kBAAkB,CAACH,EAAG,OAAO,CAACG,YAAY,cAAcD,MAAM,CAAC,cAAc,SAAS,CAACJ,EAAIM,GAAG,OAAOJ,EAAG,KAAK,CAACG,YAAY,gBAAgBD,MAAM,CAAC,GAAK,oBAAoB,CAACJ,EAAIM,GAAG,YAAYJ,EAAG,iBAAiB,CAACE,MAAM,CAAC,gBAAgBJ,EAAIa,aAAa,cAAcb,EAAIc,WAAW,eAAed,EAAIe,kBAAkB,OAASf,EAAIgB,iBAAiB,SAAWhB,EAAIiB,mBAAmB,MAAQjB,EAAIkB,MAAM,aAAalB,EAAImB,aAAa,WAAWnB,EAAIO,MAAM,WAAWP,EAAIQ,UAAU,GAAGR,EAAIoB,KAAMpB,EAAIqB,eAAgBnB,EAAG,UAAU,CAACG,YAAY,cAAcD,MAAM,CAAC,kBAAkB,kBAAkB,KAAO,SAAS,YAAY,WAAW,CAACF,EAAG,MAAM,CAACG,YAAY,kBAAkB,CAACH,EAAG,OAAO,CAACG,YAAY,cAAcD,MAAM,CAAC,cAAc,SAAS,CAACJ,EAAIM,GAAG,OAAOJ,EAAG,KAAK,CAACG,YAAY,gBAAgBD,MAAM,CAAC,GAAK,oBAAoB,CAACJ,EAAIM,GAAG,YAAYJ,EAAG,kBAAkB,CAACE,MAAM,CAAC,iBAAiBJ,EAAIY,iBAAiB,kBAAkBZ,EAAIe,sBAAsB,GAAGf,EAAIoB,KAAMpB,EAAIe,kBAAmBb,EAAG,UAAU,CAACG,YAAY,cAAcD,MAAM,CAAC,kBAAkB,mBAAmB,KAAO,WAAW,CAACF,EAAG,MAAM,CAACG,YAAY,kBAAkB,CAACH,EAAG,OAAO,CAACG,YAAY,cAAcD,MAAM,CAAC,cAAc,SAAS,CAACJ,EAAIM,GAAG,OAAOJ,EAAG,KAAK,CAACG,YAAY,gBAAgBD,MAAM,CAAC,GAAK,qBAAqB,CAACJ,EAAIM,GAAG,YAAYJ,EAAG,iBAAiB,CAACE,MAAM,CAAC,kBAAkBJ,EAAIe,mBAAmBN,GAAG,CAAC,mBAAmBT,EAAIsB,sBAAsB,iBAAiBtB,EAAIW,gBAAgB,GAAGX,EAAIoB,KAAKlB,EAAG,MAAM,CAACG,YAAY,UAAUD,MAAM,CAAC,KAAO,SAAS,YAAY,SAAS,cAAc,SAAS,CAACJ,EAAIM,GAAG,IAAIN,EAAIuB,GAAGvB,EAAIwB,oBAAoB,SAAStB,EAAG,SAAS,CAACG,YAAY,aAAaD,MAAM,CAAC,KAAO,gBAAgB,CAACF,EAAG,IAAI,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,4CAA4C,EACr+F,EACImB,EAAkB,GCFlB1B,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,kBAAkB,CAACH,EAAG,MAAM,CAACG,YAAY,cAAcqB,MAAM,CAAE,YAAa1B,EAAI2B,WAAY,cAAe3B,EAAI4B,YAAanB,GAAG,CAAC,KAAO,SAASoB,GAAgC,OAAxBA,EAAOC,iBAAwB9B,EAAI+B,WAAWC,MAAM,KAAMC,UAAU,EAAE,SAAW,SAASJ,GAAgC,OAAxBA,EAAOC,iBAAwB9B,EAAIkC,eAAeF,MAAM,KAAMC,UAAU,EAAE,UAAY,SAASJ,GAAgC,OAAxBA,EAAOC,iBAAwB9B,EAAImC,gBAAgBH,MAAM,KAAMC,UAAU,EAAE,MAAQjC,EAAIoC,mBAAmB,CAAClC,EAAG,QAAQ,CAACmC,IAAI,YAAYhC,YAAY,aAAaD,MAAM,CAAC,KAAO,OAAO,OAASJ,EAAIsC,gBAAgBC,KAAK,KAAK,aAAa,UAAU9B,GAAG,CAAC,OAAST,EAAIwC,oBAAsBxC,EAAI4B,WAAkM1B,EAAG,MAAM,CAACG,YAAY,qBAAqB,CAACH,EAAG,MAAM,CAACG,YAAY,gBAAgBD,MAAM,CAAC,IAAMJ,EAAI4B,WAAW,IAAM,aAAa1B,EAAG,SAAS,CAACG,YAAY,eAAeD,MAAM,CAAC,aAAa,OAAO,MAAQ,QAAQK,GAAG,CAAC,MAAQ,SAASoB,GAAiC,OAAzBA,EAAOY,kBAAyBzC,EAAI0C,WAAWV,MAAM,KAAMC,UAAU,IAAI,CAACjC,EAAIM,GAAG,WAAxfJ,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,MAAM,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,QAAQN,EAAI2C,GAAG,GAAGzC,EAAG,IAAI,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,sCAAoXN,EAAI4C,aAAc1C,EAAG,MAAM,CAACG,YAAY,gBAAgBD,MAAM,CAAC,KAAO,UAAU,CAACF,EAAG,OAAO,CAACG,YAAY,cAAc,CAACL,EAAIM,GAAG,QAAQJ,EAAG,OAAO,CAACG,YAAY,cAAc,CAACL,EAAIM,GAAGN,EAAIuB,GAAGvB,EAAI4C,mBAAmB5C,EAAIoB,MAC/7C,EACIK,EAAkB,CAAC,WAAY,IAAIzB,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,IAAI,CAACG,YAAY,eAAe,CAACH,EAAG,SAAS,CAACF,EAAIM,GAAG,UAAUN,EAAIM,GAAG,eAChJ,G,gBCYO,MAAMuC,EACTC,SAASC,WAAmC,IAMnCC,EAAsB,CACjC,aACA,YACA,cAMWC,EAAsB,CACjC,OACA,QACA,OACA,SAUWC,EAAc,CACzBC,aAAc,eACdC,iBAAkB,mBAClBC,UAAW,YACXC,cAAe,iBAMJC,EAAc,CACzBC,aAAc,eACdC,eAAgB,iBAChBC,eAAgB,iBAChBC,aAAc,eACdC,iBAAkB,mBAClBC,gBAAiB,kBACjBC,mBAAoB,qBACpBC,wBAAyB,0BACzBC,gBAAiB,kBACjBC,gBAAiB,kBACjBC,gBAAiB,mBAMNC,EAAiB,CAC5B,CAACZ,EAAYC,cAAe,mCAC5B,CAACD,EAAYE,gBAAiB,sBAC9B,CAACF,EAAYG,gBAAiB,gBAC9B,CAACH,EAAYI,cAAe,aAC5B,CAACJ,EAAYK,kBAAmB,oBAChC,CAACL,EAAYM,iBAAkB,iBAC/B,CAACN,EAAYO,oBAAqB,kBAClC,CAACP,EAAYQ,yBAA0B,gBACvC,CAACR,EAAYS,iBAAkB,yBAC/B,CAACT,EAAYU,iBAAkB,kBAC/B,CAACV,EAAYW,iBAAkB,mBAUpBE,EAAoB,CAC/BC,KAAM,OACNC,UAAW,YACXC,YAAa,cACbC,oBAAqB,sBACrBC,UAAW,YACXC,SAAU,WACVC,MAAO,SAYIC,EACT9B,SAASC,OAA2C,IAM3C8B,EACT/B,SAASC,OAA2C,IAc3C+B,GANThC,SAASC,OAA0C,IAM1B,aAUhBgC,EAAc,IASdC,EAAmB,CAC9BC,aAAc,EACdC,cAAe,IACfC,mBAAoB,GAOTC,EACTtC,SAASC,QAAiC,IAOjCsC,EAAyBtC,+BAOzBuC,EAAoBvC,2BASpBwC,EAAoB,IAWpBC,EACT1C,SAASC,OAA8C,IAuB9C0C,GAA4B1C,EAM5B2C,EACT5C,SAASC,KAAqC,IAUrC4C,EAA2B,mBAK3BC,EAA0B,OAS1BC,EAAiB,GAKjBC,EAAwB,KAsBxBC,EAAc,CACzBC,GAAI,IACJC,YAAa,IACbC,aAAc,IACdC,iBAAkB,IAClBC,UAAW,IACXC,UAAW,IACXC,kBAAmB,IACnBC,sBAAuB,IACvBC,oBAAqB,KC3PhB,SAASC,EAAiBC,GAC/B,IAAKA,GAAgC,kBAAbA,EACtB,MAAO,CACLC,SAAS,EACTzF,MAAO,CACL0F,KAAMrD,EAAYC,aAClBqD,QAAS1C,EAAeZ,EAAYC,gBAK1C,MAAMmD,EAAU3D,EAAoB8D,SAASJ,GAE7C,OAAKC,EAUE,CACLA,SAAS,EACTzF,MAAO,MAXA,CACLyF,SAAS,EACTzF,MAAO,CACL0F,KAAMrD,EAAYC,aAClBqD,QAAS1C,EAAeZ,EAAYC,eAS5C,CAeO,SAASuD,EAAiBC,EAAUC,EAAUpE,GACnD,GAAwB,kBAAbmE,GAAyBA,EAAW,EAC7C,MAAO,CACLL,SAAS,EACTzF,MAAO,CACL0F,KAAMrD,EAAYE,eAClBoD,QAAS1C,EAAeZ,EAAYE,kBAK1C,MAAMkD,EAAUK,GAAYC,EAE5B,OAAKN,EAUE,CACLA,SAAS,EACTzF,MAAO,MAXA,CACLyF,SAAS,EACTzF,MAAO,CACL0F,KAAMrD,EAAYE,eAClBoD,QAAS1C,EAAeZ,EAAYE,iBAS5C,CAiBO,SAASyD,EAAaC,GAE3B,IAAKA,KAAUA,aAAgBC,MAC7B,MAAO,CACLT,SAAS,EACTzF,MAAO,CACL0F,KAAMrD,EAAYC,aAClBqD,QAAS1C,EAAeZ,EAAYC,gBAM1C,MAAM6D,EAAiBZ,EAAiBU,EAAKG,MAC7C,IAAKD,EAAeV,QAClB,OAAOU,EAIT,MAAME,EAAiBR,EAAiBI,EAAKK,MAC7C,IAAKD,EAAeZ,QAClB,OAAOY,EAIT,MAAME,EAAWN,EAAKO,MAAQ,GACxBC,EAAoB1E,EAAoB2E,KAAKC,GACjDJ,EAASK,cAAcC,SAASF,IAGlC,OAAKF,EAWE,CACLhB,SAAS,EACTzF,MAAO,MAZA,CACLyF,SAAS,EACTzF,MAAO,CACL0F,KAAMrD,EAAYC,aAClBqD,QAAS1C,EAAeZ,EAAYC,eAU5C,CCnGA,OACAkE,KAAA,gBAEAM,MAAA,CAIAC,YAAA,CACAX,KAAAY,OACAC,QAAA,UAMA7F,gBAAA,CACAgF,KAAAc,MACAD,QAAAA,IAAAnF,IAIAqF,IAAAA,GACA,OACA1G,YAAA,EACAC,WAAA,KACAgB,aAAA,KACA0F,YAAA,KAEA,EAEAC,QAAA,CAIAnG,gBAAAA,GACA,KAAAR,YAIA,KAAA4G,MAAAC,UAAAC,OACA,EAMAlG,gBAAAA,CAAAmG,GACA,MAAAC,EAAAD,EAAAE,OAAAD,MACAA,GAAAA,EAAAE,OAAA,GACA,KAAAC,YAAAH,EAAA,GAEA,EAKA1G,cAAAA,GACA,KAAAP,YAAA,CACA,EAKAQ,eAAAA,GACA,KAAAR,YAAA,CACA,EAMAI,UAAAA,CAAA4G,GACA,KAAAhH,YAAA,EAEA,MAAAiH,EAAAD,EAAAK,aAAAJ,MACAA,GAAAA,EAAAE,OAAA,GACA,KAAAC,YAAAH,EAAA,GAEA,EAMAG,WAAAA,CAAA5B,GAEA,KAAAvE,aAAA,KAGA,MAAAqG,EAAA/B,EAAAC,GAEA,IAAA8B,EAAAtC,QAIA,OAFA,KAAA/D,aAAAqG,EAAA/H,MAAA2F,aACA,KAAAqC,MAAA,eAAAD,EAAA/H,OAKA,KAAAoH,YAAAnB,EAGA,KAAAgC,gBAAAhC,EACA,EAMAgC,eAAAA,CAAAhC,GACA,MAAAiC,EAAA,IAAAC,WAEAD,EAAAE,OAAAC,IACA,KAAA3H,WAAA2H,EAAAV,OAAAW,OAEA,KAAAN,MAAA,iBAAA/B,EAAAoC,EAAAV,OAAAW,SAGAJ,EAAAK,QAAA,KACA,KAAA7G,aAAA,eACA,KAAAsG,MAAA,gBACAtC,KAAA,gBACAC,QAAA,kBAIAuC,EAAAM,cAAAvC,EACA,EAKAzE,UAAAA,GACA,KAAAd,WAAA,KACA,KAAA0G,YAAA,KACA,KAAA1F,aAAA,KACA,KAAA4F,MAAAC,UAAAkB,MAAA,GACA,KAAAT,MAAA,gBACA,EAKA1I,KAAAA,GACA,KAAAkC,YACA,ICvN4P,I,UCQxPkH,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAeA,E,QCnBX7J,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,mBAAmB,CAAGL,EAAIa,cAAiBb,EAAI6J,UAA0S7J,EAAIoB,KAAnSlB,EAAG,SAAS,CAACG,YAAY,iBAAiBqB,MAAM,CAAEoI,UAAW9J,EAAIc,YAAaV,MAAM,CAAC,UAAYJ,EAAIc,WAAW,YAAY,kBAAkBL,GAAG,CAAC,MAAQT,EAAI+J,gBAAgB,CAAC7J,EAAG,OAAO,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,QAAQJ,EAAG,OAAO,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,YAAsBN,EAAIa,aAAcX,EAAG,MAAM,CAACG,YAAY,qBAAqB,CAACH,EAAG,MAAM,CAACG,YAAY,oBAAoBH,EAAG,IAAI,CAACG,YAAY,gBAAgB,CAACL,EAAIM,GAAGN,EAAIuB,GAAGvB,EAAIgK,mBAAoBhK,EAAIiK,aAAc/J,EAAG,MAAM,CAACG,YAAY,gBAAgB,CAACH,EAAG,MAAM,CAACG,YAAY,gBAAgB6J,MAAO,CAAEC,MAAOnK,EAAIoK,SAAW,SAAWpK,EAAIoB,KAAMpB,EAAIiK,aAAc/J,EAAG,IAAI,CAACG,YAAY,iBAAiB,CAACL,EAAIM,GAAGN,EAAIuB,GAAGvB,EAAIoK,UAAU,OAAOpK,EAAIoB,OAAOpB,EAAIoB,KAAMpB,EAAI6J,YAAc7J,EAAIkB,MAAOhB,EAAG,MAAM,CAACG,YAAY,qBAAqB,CAACH,EAAG,MAAM,CAACG,YAAY,gBAAgB,CAACL,EAAIM,GAAG,OAAOJ,EAAG,IAAI,CAACG,YAAY,gBAAgB,CAACL,EAAIM,GAAG,aAAaJ,EAAG,SAAS,CAACG,YAAY,eAAeI,GAAG,CAAC,MAAQT,EAAIqK,cAAc,CAACnK,EAAG,OAAO,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,QAAQJ,EAAG,OAAO,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,cAAcN,EAAIoB,KAAMpB,EAAIkB,MAAOhB,EAAG,MAAM,CAACG,YAAY,kBAAkBD,MAAM,CAAC,KAAO,UAAU,CAACF,EAAG,MAAM,CAACG,YAAY,cAAc,CAACL,EAAIM,GAAG,QAAQJ,EAAG,IAAI,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,UAAUJ,EAAG,IAAI,CAACG,YAAY,iBAAiB,CAACL,EAAIM,GAAGN,EAAIuB,GAAGvB,EAAIkB,MAAM2F,YAAY3G,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAAEL,EAAIkB,MAAMoJ,UAAWpK,EAAG,SAAS,CAACG,YAAY,eAAeI,GAAG,CAAC,MAAQT,EAAIuK,cAAc,CAACrK,EAAG,OAAO,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,QAAQJ,EAAG,OAAO,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,UAAUN,EAAIoB,KAAKlB,EAAG,SAAS,CAACG,YAAY,eAAeI,GAAG,CAAC,MAAQT,EAAIqK,cAAc,CAACnK,EAAG,OAAO,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,OAAOJ,EAAG,OAAO,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,gBAAgBN,EAAIoB,MACr6D,EACIK,EAAkB,GC6EtB,GACAiG,KAAA,iBAEAM,MAAA,CAIAnH,aAAA,CACAyG,KAAAkD,QACArC,SAAA,GAMArH,WAAA,CACAwG,KAAAkD,QACArC,SAAA,GAMA0B,UAAA,CACAvC,KAAAkD,QACArC,SAAA,GAMAsC,OAAA,CACAnD,KAAAoD,OACAvC,QAAA/D,EAAAC,KACAsG,UAAAhB,GACAiB,OAAAC,OAAAzG,GAAA0C,SAAA6C,IAOAS,SAAA,CACA9C,KAAAY,OACAC,QAAA,EACAwC,UAAAhB,GACAA,GAAA,GAAAA,GAAA,KAOAzI,MAAA,CACAoG,KAAA,CAAAsD,OAAA,MACAzC,QAAA,KACAwC,UAAAhB,GACA,OAAAA,QAAAmB,IAAAnB,GAGAA,GACA,kBAAAA,GACA,kBAAAA,EAAA9C,SACA,mBAAA8C,EAAAW,WAQAS,UAAA,CACAzD,KAAA0D,SACA7C,QAAA,MAMA8C,QAAA,CACA3D,KAAA0D,SACA7C,QAAA,MAMA+C,QAAA,CACA5D,KAAA0D,SACA7C,QAAA,OAIAgD,SAAA,CAIAnB,cAAAA,GACA,YAAAS,QACA,KAAArG,EAAAE,UACA,kBACA,KAAAF,EAAAG,YACA,kBACA,KAAAH,EAAAI,oBACA,kBACA,KAAAJ,EAAAK,UACA,kBACA,QACA,gBAEA,EAKAwF,YAAAA,GACA,OACA,KAAAQ,SAAArG,EAAAI,qBACA,KAAAiG,SAAArG,EAAAE,SAEA,GAGAiE,QAAA,CAIAwB,aAAAA,GACA,KAAAgB,UACA,KAAAA,YAEA,KAAA7B,MAAA,UAEA,EAKAqB,WAAAA,GACA,KAAAU,QACA,KAAAA,UAEA,KAAA/B,MAAA,QAEA,EAKAmB,WAAAA,GACA,KAAAa,QACA,KAAAA,UAEA,KAAAhC,MAAA,QAEA,IC1O6P,ICQzP,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,E,QCnBXnJ,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAQF,EAAIoL,eAAiBpL,EAAIqL,eAAgBnL,EAAG,MAAM,CAACG,YAAY,oBAAoB,CAACH,EAAG,KAAK,CAACG,YAAY,oBAAoB,CAACL,EAAIM,GAAG,UAAUJ,EAAG,MAAM,CAACG,YAAY,uBAAuBqB,MAAM,CAAE,gBAAiB1B,EAAIsL,WAAY,CAAEtL,EAAIoL,cAAelL,EAAG,MAAM,CAACG,YAAY,eAAe,CAACH,EAAG,KAAK,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,UAAUJ,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,MAAM,CAACG,YAAY,mBAAmBD,MAAM,CAAC,IAAMJ,EAAIoL,cAAc,IAAM,UAAU3K,GAAG,CAAC,KAAOT,EAAIuL,uBAAuBvL,EAAIoB,KAAMpB,EAAIqL,eAAgBnL,EAAG,MAAM,CAACG,YAAY,eAAe,CAACH,EAAG,KAAK,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,WAAWJ,EAAG,MAAM,CAACG,YAAY,wCAAwC,CAACH,EAAG,MAAM,CAACG,YAAY,sBAAsBH,EAAG,MAAM,CAACG,YAAY,6BAA6BD,MAAM,CAAC,IAAMJ,EAAIqL,eAAe,IAAM,WAAW5K,GAAG,CAAC,KAAOT,EAAIuL,qBAAqBrL,EAAG,IAAI,CAACG,YAAY,cAAc,CAACL,EAAIM,GAAG,mBAAmBN,EAAIoB,SAASpB,EAAIoB,IAC5/B,EACIK,EAAkB,GC8CtB,GACAiG,KAAA,kBAEAM,MAAA,CAIAoD,cAAA,CACA9D,KAAAoD,OACAvC,QAAA,MAMAkD,eAAA,CACA/D,KAAAoD,OACAvC,QAAA,OAIAE,IAAAA,GACA,OACAiD,UAAA,EAEA,EAEAE,OAAAA,GACA,KAAAC,oBACAC,OAAAC,iBAAA,cAAAF,kBACA,EAEAG,aAAAA,GACAF,OAAAG,oBAAA,cAAAJ,kBACA,EAEAlD,QAAA,CAIAkD,iBAAAA,GACA,KAAAH,SAAAI,OAAAI,WAAAvG,CACA,EAKAgG,eAAAA,GACA,KAAArC,MAAA,eACA,ICjG8P,ICQ1P,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,E,QCnBXnJ,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAQF,EAAI+L,UAAW7L,EAAG,MAAM,CAACG,YAAY,6BAA6B,CAACH,EAAG,SAAS,CAACG,YAAY,kBAAkBqB,MAAM,CAAEsK,YAAahM,EAAIiM,cAAeC,QAASlM,EAAImM,aAAc/L,MAAM,CAAC,SAAWJ,EAAIiM,cAAc,YAAY,mBAAmBxL,GAAG,CAAC,MAAQT,EAAIoM,iBAAiB,CAAClM,EAAG,OAAO,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAGN,EAAIuB,GAAGvB,EAAIqM,eAAenM,EAAG,OAAO,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAGN,EAAIuB,GAAGvB,EAAIsM,iBAAiBpM,EAAG,aAAa,CAACE,MAAM,CAAC,KAAO,SAAS,CAAEJ,EAAImM,YAAajM,EAAG,MAAM,CAACG,YAAY,oBAAoB,CAACH,EAAG,OAAO,CAACG,YAAY,gBAAgB,CAACL,EAAIM,GAAG,OAAOJ,EAAG,OAAO,CAACG,YAAY,gBAAgB,CAACL,EAAIM,GAAG,aAAaN,EAAIoB,QAAQ,GAAGpB,EAAIoB,IACvtB,EACIK,EAAkB,GCetB,MAAM8K,GAmBJC,aAAAA,CAAcC,EAASC,GAErB,IAAKD,GAA8B,kBAAZA,EACrB,MAAM,IAAIE,MAAM,+CAGlB,IAAKD,GAAgC,kBAAbA,EACtB,MAAM,IAAIC,MAAM,gDAIlB,MAAMC,EAAOC,SAASC,cAAc,KACpCF,EAAKG,KAAON,EACZG,EAAKI,SAAWN,EAGhBG,SAASI,KAAKC,YAAYN,GAC1BA,EAAKlE,QACLmE,SAASI,KAAKE,YAAYP,EAC5B,CAwBAQ,gBAAAA,CAAiBC,EAAS1H,GAExB,QAAemF,IAAXuC,GAA0C,kBAAXA,EACjC,MAAM,IAAIV,MAAM,oCAKlB,MAAMW,GAAY,IAAIC,MAAOC,cAAcC,QAAQ,QAAS,KAG5D,MAAO,GAAGJ,KAAUC,IAAY1H,GAClC,EAIF,WAAmB2G,GC3DnB,IACA7E,KAAA,iBAEAM,MAAA,CAIAqD,eAAA,CACA/D,KAAAoD,OACAvC,QAAA,MAMAuF,eAAA,CACApG,KAAAoD,OACAvC,QAAA,oBAMAwF,QAAA,CACArG,KAAAkD,QACArC,QAAA,OAIAE,IAAAA,GACA,OACA4D,eAAA,EACAE,aAAA,EACAyB,eAAA,KAEA,EAEAzC,SAAA,CAMAY,SAAAA,GAEA,mBAAA4B,QACA,KAAAA,UAGA,KAAAtC,cACA,EAKAgB,UAAAA,GACA,YAAAF,YACA,IAEA,KAAAF,cACA,IAEA,IACA,EAKAK,UAAAA,GACA,YAAAH,YACA,OAEA,KAAAF,cACA,SAEA,MACA,GAGAL,aAAAA,GAEA,KAAAgC,gBACAC,aAAA,KAAAD,eAEA,EAEArF,QAAA,CAKA,oBAAA6D,GACA,QAAAf,iBAAA,KAAAY,cAIA,IACA,KAAAA,eAAA,EAIA,MAAAS,EAAAH,GAAAa,iBAAA,KAAAM,gBAIAnB,GAAAC,cAAA,KAAAnB,eAAAqB,GAIA,KAAAoB,sBAGA,KAAA5E,MAAA,oBAAAwD,YAEA,OAAAxL,GACA6M,QAAA7M,MAAA,mBAAAA,GACA,KAAAgI,MAAA,iBAAAhI,GAGA,KAAA8M,mBACA,SACA,KAAA/B,eAAA,CACA,CACA,EAKA6B,mBAAAA,GACA,KAAA3B,aAAA,EAGA,KAAAyB,gBACAC,aAAA,KAAAD,gBAIA,KAAAA,eAAAK,WAAA,KACA,KAAA9B,aAAA,EACA,KAAAyB,eAAA,MACApI,EACA,EAKAwI,iBAAAA,GAEA,ICxL6P,MCQzP,IAAY,OACd,GACA,EACA,GACA,EACA,KACA,WACA,MAIF,GAAe,G,QCnBXjO,GAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,kBAAkB,CAAEL,EAAIkO,SAAUhO,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,MAAM,CAACG,YAAY,cAAc,CAACL,EAAIM,GAAG,QAAQJ,EAAG,KAAK,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,SAASJ,EAAG,IAAI,CAACG,YAAY,iBAAiB,CAACL,EAAIM,GAAGN,EAAIuB,GAAGvB,EAAI4C,iBAAkB5C,EAAImO,YAAajO,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,SAAS,CAACG,YAAY,iBAAiBI,GAAG,CAAC,MAAQT,EAAIoO,gBAAgB,CAACpO,EAAIM,GAAG,IAAIN,EAAIuB,GAAGvB,EAAIqO,gBAAkB,OAAS,QAAQ,OAAQrO,EAAIqO,gBAAiBnO,EAAG,MAAM,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAGN,EAAIuB,GAAGvB,EAAIsO,eAAetO,EAAIoB,OAAOpB,EAAIoB,KAAKlB,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,SAAS,CAACG,YAAY,eAAeI,GAAG,CAAC,MAAQT,EAAIuK,cAAc,CAACrK,EAAG,OAAO,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,QAAQJ,EAAG,OAAO,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,UAAUJ,EAAG,SAAS,CAACG,YAAY,eAAeI,GAAG,CAAC,MAAQT,EAAIqK,cAAc,CAACnK,EAAG,OAAO,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,OAAOJ,EAAG,OAAO,CAACG,YAAY,eAAe,CAACL,EAAIM,GAAG,kBAAkBJ,EAAG,MAAM,CAACF,EAAIuO,GAAG,YAAY,IACzmC,EACI9M,GAAkB,GCqDtB,IACAiG,KAAA,gBAEAM,MAAA,CAIAwG,gBAAA,CACAlH,KAAAoD,OACAvC,QAAA,sBAMAgG,YAAA,CACA7G,KAAAkD,QACArC,SAAApF,GAMAkI,QAAA,CACA3D,KAAA0D,SACA7C,QAAA,MAMA+C,QAAA,CACA5D,KAAA0D,SACA7C,QAAA,OAIAE,IAAAA,GACA,OACA6F,UAAA,EACAhN,MAAA,KACAuN,UAAA,KACAJ,iBAAA,EAEA,EAEAlD,SAAA,CAIAvI,YAAAA,GACA,YAAA1B,OAAA,KAAAA,MAAA2F,SAEA,KAAA6H,sBAAA,KAAAxN,MAAA2F,SACA,KAAA3F,MAAA2F,QAGA,KAAA2H,eACA,EAKAF,UAAAA,GACA,YAAApN,OAAA,KAAAA,MAAAyN,MACA,KAAAzN,MAAAyN,MAEA,KAAAF,UACA,KAAAA,UAEA,0BACA,GAQAG,aAAAA,CAAAC,EAAAC,EAAAC,GAkBA,OAhBA,KAAAb,UAAA,EACA,KAAAhN,MAAA2N,EACA,KAAAJ,UAAAM,EAGA,KAAAC,SAAAH,EAAAC,EAAAC,GAGA,KAAA7F,MAAA,SACAhI,MAAA2N,EACAC,GAAAA,EACAC,KAAAA,KAKA,CACA,EAEAxG,QAAA,CAKAmG,qBAAAA,CAAA7H,GAEA,MAAAoI,EAAA,CACA,aACA,QACA,wBACA,qBACA,cACA,gBACA,YAGA,OAAAA,EAAArH,KAAAsH,GAAAA,EAAAC,KAAAtI,GACA,EAMAmI,QAAAA,CAAAH,EAAAC,EAAAC,GACAhB,QAAA7M,MAAA,iCACAA,MAAA2N,EACAjM,aAAAiM,EAAAhI,QACAyH,WAAAO,EAAAF,MACAS,cAAAN,EAAAO,SAAA3H,MAAA,YACA+G,UAAAM,EACAzB,WAAA,IAAAC,MAAAC,eASA,EAKAY,aAAAA,GACA,KAAAC,iBAAA,KAAAA,eACA,EAMA9D,WAAAA,GAEA,KAAA2D,UAAA,EACA,KAAAhN,MAAA,KACA,KAAAuN,UAAA,KACA,KAAAJ,iBAAA,EAGA,KAAApD,SACA,KAAAA,UAIA,KAAA/B,MAAA,QACA,EAMAmB,WAAAA,GAEA,KAAA6D,UAAA,EACA,KAAAhN,MAAA,KACA,KAAAuN,UAAA,KACA,KAAAJ,iBAAA,EAGA,KAAAnD,QACA,KAAAA,UAGAQ,OAAA4D,SAAAC,SAIA,KAAArG,MAAA,QACA,EAMAsG,YAAAA,CAAAtO,EAAA6N,EAAA,wBACA,KAAAb,UAAA,EACA,KAAAhN,MAAAA,EACA,KAAAuN,UAAAM,EACA,KAAAC,SAAA9N,EAAA,KAAA6N,EACA,EAKAU,UAAAA,GACA,KAAAvB,UAAA,EACA,KAAAhN,MAAA,KACA,KAAAuN,UAAA,KACA,KAAAJ,iBAAA,CACA,IC1Q4P,MCQxP,IAAY,OACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIF,GAAe,G,QCCf,MAAMqB,GAgBJC,SAAAA,CAAUlD,GACR,OAAO,IAAImD,QAAQ,CAACC,EAASC,KAE3B,IAAKrD,GAA8B,kBAAZA,EAErB,YADAqD,EAAO,IAAInD,MAAMxI,EAAeZ,EAAYK,oBAK9C,MAAMmM,EAAM,IAAIC,MAGhBD,EAAIzG,OAAS,KACXuG,EAAQE,IAIVA,EAAItG,QAAU,KACZqG,EAAO,IAAInD,MAAMxI,EAAeZ,EAAYK,qBAI9CmM,EAAIE,IAAMxD,GAEd,CAkBAyD,YAAAA,CAAa/F,EAAOgG,GAElB,GAAqB,kBAAVhG,GAAwC,kBAAXgG,GACpChG,GAAS,GAAKgG,GAAU,IACvBC,SAASjG,KAAWiG,SAASD,GAChC,MAAM,IAAIxD,MAAMxI,EAAeZ,EAAYI,eAI7C,MAAM0M,EAASxD,SAASC,cAAc,UAItC,OAHAuD,EAAOlG,MAAQA,EACfkG,EAAOF,OAASA,EAETE,CACT,CAmBAC,WAAAA,CAAYD,EAAQE,EAAS,YAAaC,EAAU,KAClD,OAAO,IAAIZ,QAAQ,CAACC,EAASC,KAEtBO,GAAYA,aAAkBI,mBAMb,kBAAXF,GAAwBA,EAAOG,WAAW,UAM9B,kBAAZF,GAAwBA,EAAU,GAAKA,EAAU,EAC1DV,EAAO,IAAInD,MAAMxI,EAAeZ,EAAYI,gBAK9C0M,EAAOM,OACJC,IACKA,EACFf,EAAQe,GAERd,EAAO,IAAInD,MAAMxI,EAAeZ,EAAYI,iBAGhD4M,EACAC,GA1BAV,EAAO,IAAInD,MAAMxI,EAAeZ,EAAYI,iBA6BlD,CA0BAkN,WAAAA,CAAYC,EAAOC,EAAUC,GAE3B,IAAKF,KAAWA,aAAiBG,kBAC/B,MAAM,IAAItE,MAAMxI,EAAeZ,EAAYK,mBAI7C,GAAwB,kBAAbmN,GAA8C,kBAAdC,GACvCD,GAAY,GAAKC,GAAa,IAC7BZ,SAASW,KAAcX,SAASY,GACnC,MAAM,IAAIrE,MAAMxI,EAAeZ,EAAYI,eAI7C,IAAIwG,EAAQ2G,EAAM3G,MACdgG,EAASW,EAAMX,OAGnB,GAAIhG,GAAS4G,GAAYZ,GAAUa,EAAW,CAC5C,MAAMX,EAASpQ,KAAKiQ,aAAa/F,EAAOgG,GAClCe,EAAMb,EAAOc,WAAW,MAE9B,OADAD,EAAIE,UAAUN,EAAO,EAAG,GACjBT,CACT,CAIA,GAAIlG,EAAQ4G,EAAU,CACpB,MAAMM,EAAQN,EAAW5G,EACzBA,EAAQ4G,EACRZ,EAASmB,KAAKC,MAAMpB,EAASkB,EAC/B,CAGA,GAAIlB,EAASa,EAAW,CACtB,MAAMK,EAAQL,EAAYb,EAC1BA,EAASa,EACT7G,EAAQmH,KAAKC,MAAMpH,EAAQkH,EAC7B,CAGA,MAAMhB,EAASpQ,KAAKiQ,aAAa/F,EAAOgG,GAClCe,EAAMb,EAAOc,WAAW,MAK9B,OAFAD,EAAIE,UAAUN,EAAO,EAAG,EAAG3G,EAAOgG,GAE3BE,CACT,CAkBAmB,mBAAAA,CAAoBnB,EAAQoB,EAAW,GAAIC,EAAS,UAAWC,EAAS,WAEtE,IAAKtB,KAAYA,aAAkBI,mBACjC,MAAM,IAAI9D,MAAMxI,EAAeZ,EAAYI,eAI7C,MAAMiO,EAAY3R,KAAKiQ,aAAaG,EAAOlG,MAAOkG,EAAOF,QACnDe,EAAMU,EAAUT,WAAW,MAGjC,IAAK,IAAIU,EAAI,EAAGA,EAAIxB,EAAOF,OAAQ0B,GAAKJ,EACtC,IAAK,IAAIK,EAAI,EAAGA,EAAIzB,EAAOlG,MAAO2H,GAAKL,EAAU,CAE/C,MAAMM,EAAYT,KAAKU,MAAMH,EAAIJ,GAAY,IAAM,EAC7CQ,EAAYX,KAAKU,MAAMF,EAAIL,GAAY,IAAM,EAC7CS,EAAYH,IAAcE,EAEhCf,EAAIiB,UAAYD,EAAYR,EAASC,EACrCT,EAAIkB,SAASN,EAAGD,EAAGJ,EAAUA,EAC/B,CAMF,OAFAP,EAAIE,UAAUf,EAAQ,EAAG,GAElBuB,CACT,EAIF,WAAmBlC,G,QCjQnB,MAAM2C,GAUJ,oBAAMC,CAAexB,EAAOyB,EAAU,CAAC,GACrC,MAAM,QACJC,EAAU,GAAE,UACZC,EAAY,IACVF,EAEJxE,QAAQ2E,IAAI,kCACZ3E,QAAQ2E,IAAI,2BAA4B5B,EAAM3G,MAAO,IAAK2G,EAAMX,QAChEpC,QAAQ2E,IAAI,yBAA0BF,EAAS,MAC/CzE,QAAQ2E,IAAI,yBAA0BD,GAGtC,MAAMpC,EAASxD,SAASC,cAAc,UAChCoE,EAAMb,EAAOc,WAAW,MAE9Bd,EAAOlG,MAAQ2G,EAAM3G,MACrBkG,EAAOF,OAASW,EAAMX,OAGtBe,EAAIE,UAAUN,EAAO,EAAG,GAGxB,MAAM6B,EAAYzB,EAAI0B,aAAa,EAAG,EAAGvC,EAAOlG,MAAOkG,EAAOF,QACxD0C,EAASF,EAAUtK,KAGnByK,EAAS7S,KAAK8S,qBAAqBF,EAAQxC,EAAOlG,MAAOkG,EAAOF,OAAQsC,GAE9E,IAAKK,EAGH,OADA/E,QAAQ2E,IAAI,oCACLrC,EAGTtC,QAAQ2E,IAAI,4BAA6BI,GAGzC,MAAME,EAAe,CACnBC,KAAM3B,KAAK4B,IAAI,EAAGJ,EAAOG,KAAOT,GAChCW,IAAK7B,KAAK4B,IAAI,EAAGJ,EAAOK,IAAMX,GAC9BY,MAAO9B,KAAK+B,IAAIhD,EAAOlG,MAAO2I,EAAOM,MAAQZ,GAC7Cc,OAAQhC,KAAK+B,IAAIhD,EAAOF,OAAQ2C,EAAOQ,OAASd,IAGlDzE,QAAQ2E,IAAI,4BAA6BM,GAGzC,MAAMO,EAAeP,EAAaI,MAAQJ,EAAaC,KACjDO,EAAgBR,EAAaM,OAASN,EAAaG,IAEzDpF,QAAQ2E,IAAI,2BAA4Ba,EAAc,IAAKC,GAG3D,MAAMC,EAAgB5G,SAASC,cAAc,UACvC4G,EAAaD,EAActC,WAAW,MAoB5C,OAlBAsC,EAActJ,MAAQoJ,EACtBE,EAActD,OAASqD,EAGvBE,EAAWtC,UACTf,EACA2C,EAAaC,KACbD,EAAaG,IACbI,EACAC,EACA,EACA,EACAD,EACAC,GAGFzF,QAAQ2E,IAAI,8BAELe,CACT,CAYAV,oBAAAA,CAAqBF,EAAQ1I,EAAOgG,EAAQsC,GAC1C,IAAIkB,EAAOxJ,EACPyJ,EAAOzD,EACP0D,EAAO,EACPC,EAAO,EACPC,GAAa,EAGjB,MAAMC,EAAgB/T,KAAKgU,qBAAqBpB,EAAQ1I,EAAOgG,GAC/DpC,QAAQ2E,IAAI,6BAA8BsB,GAG1C,IAAK,IAAInC,EAAI,EAAGA,EAAI1B,EAAQ0B,IAC1B,IAAK,IAAIC,EAAI,EAAGA,EAAI3H,EAAO2H,IAAK,CAC9B,MAAMoC,EAA0B,GAAjBrC,EAAI1H,EAAQ2H,GACrBqC,EAAQtB,EAAOqB,EAAQ,GAG7B,GAAIC,EAAQ1B,EAAW,CACrB,MAAM2B,EAAIvB,EAAOqB,GACXG,EAAIxB,EAAOqB,EAAQ,GACnBI,EAAIzB,EAAOqB,EAAQ,GAGnBK,EAAYtU,KAAKuU,eACrB,CAAEJ,IAAGC,IAAGC,KACRN,GAIEO,EAAY,KACdR,GAAa,EACbJ,EAAOrC,KAAK+B,IAAIM,EAAM7B,GACtB8B,EAAOtC,KAAK+B,IAAIO,EAAM/B,GACtBgC,EAAOvC,KAAK4B,IAAIW,EAAM/B,GACtBgC,EAAOxC,KAAK4B,IAAIY,EAAMjC,GAE1B,CACF,CAGF,OAAKkC,EAME,CACLd,KAAMU,EACNR,IAAKS,EACLR,MAAOS,EAAO,EACdP,OAAQQ,EAAO,IATf/F,QAAQ2E,IAAI,qCAELzS,KAAKwU,0BAA0B5B,EAAQ1I,EAAOgG,EAAQsC,GASjE,CAOAgC,yBAAAA,CAA0B5B,EAAQ1I,EAAOgG,EAAQsC,GAC/C,IAAIkB,EAAOxJ,EACPyJ,EAAOzD,EACP0D,EAAO,EACPC,EAAO,EACPC,GAAa,EAEjB,IAAK,IAAIlC,EAAI,EAAGA,EAAI1B,EAAQ0B,IAC1B,IAAK,IAAIC,EAAI,EAAGA,EAAI3H,EAAO2H,IAAK,CAC9B,MAAMoC,EAA0B,GAAjBrC,EAAI1H,EAAQ2H,GACrBqC,EAAQtB,EAAOqB,EAAQ,GAEzBC,EAAQ1B,IACVsB,GAAa,EACbJ,EAAOrC,KAAK+B,IAAIM,EAAM7B,GACtB8B,EAAOtC,KAAK+B,IAAIO,EAAM/B,GACtBgC,EAAOvC,KAAK4B,IAAIW,EAAM/B,GACtBgC,EAAOxC,KAAK4B,IAAIY,EAAMjC,GAE1B,CAGF,OAAKkC,EAIE,CACLd,KAAMU,EACNR,IAAKS,EACLR,MAAOS,EAAO,EACdP,OAAQQ,EAAO,GAPR,IASX,CAWAG,oBAAAA,CAAqBpB,EAAQ1I,EAAOgG,GAClC,MAAMuE,EAAc,CAAC,EACfC,EAAa,GAEnB,IAAK,IAAI9C,EAAI,EAAGA,EAAI1B,EAAQ0B,GAAK8C,EAC/B,IAAK,IAAI7C,EAAI,EAAGA,EAAI3H,EAAO2H,GAAK6C,EAAY,CAC1C,MAAMT,EAA0B,GAAjBrC,EAAI1H,EAAQ2H,GACrBqC,EAAQtB,EAAOqB,EAAQ,GAG7B,GAAIC,EAAQ,IAAK,CACf,MAAMC,EAAqC,GAAjC9C,KAAKU,MAAMa,EAAOqB,GAAS,IAC/BG,EAAyC,GAArC/C,KAAKU,MAAMa,EAAOqB,EAAQ,GAAK,IACnCI,EAAyC,GAArChD,KAAKU,MAAMa,EAAOqB,EAAQ,GAAK,IAEnCU,EAAW,GAAGR,KAAKC,KAAKC,IAC9BI,EAAYE,IAAaF,EAAYE,IAAa,GAAK,CACzD,CACF,CAIF,IAAIC,EAAW,EACXC,EAAmB,QAEvB,IAAK,MAAOF,EAAUG,KAAUnK,OAAOoK,QAAQN,GACzCK,EAAQF,IACVA,EAAWE,EACXD,EAAmBF,GAIvB,MAAOR,EAAGC,EAAGC,GAAKQ,EAAiBG,MAAM,KAAKC,IAAIhN,QAClD,MAAO,CAAEkM,IAAGC,IAAGC,IACjB,CAUAE,cAAAA,CAAe9C,EAAQC,GACrB,MAAMwD,EAAKzD,EAAO0C,EAAIzC,EAAOyC,EACvBgB,EAAK1D,EAAO2C,EAAI1C,EAAO0C,EACvBgB,EAAK3D,EAAO4C,EAAI3C,EAAO2C,EAG7B,OAAOhD,KAAKgE,KAAKH,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,EAC5C,CAaA,eAAME,CAAUzE,EAAOyB,EAAU,CAAC,GAChC,MAAM,iBACJiD,EAAmB,IAAI,QACvBhD,EAAU,IACRD,EAGElC,EAASxD,SAASC,cAAc,UAChCoE,EAAMb,EAAOc,WAAW,MAE9Bd,EAAOlG,MAAQ2G,EAAM3G,MACrBkG,EAAOF,OAASW,EAAMX,OAGtBe,EAAIE,UAAUN,EAAO,EAAG,GAGxB,MAAM6B,EAAYzB,EAAI0B,aAAa,EAAG,EAAGvC,EAAOlG,MAAOkG,EAAOF,QACxD0C,EAASF,EAAUtK,KAGnBoN,EAAaxV,KAAKyV,qBAAqB7C,EAAQxC,EAAOlG,MAAOkG,EAAOF,QACpEwF,EAAa1V,KAAK2V,wBAAwB/C,EAAQxC,EAAOlG,MAAOkG,EAAOF,QAGvE2C,EAAS7S,KAAK4V,mBAAmBJ,EAAYE,EAAYH,GAE/D,IAAK1C,EAEH,OAAO7S,KAAKqS,eAAexB,EAAO,CAAE0B,YAItC,MAAMQ,EAAe,CACnBC,KAAM3B,KAAK4B,IAAI,EAAGJ,EAAOG,KAAOT,GAChCW,IAAK7B,KAAK4B,IAAI,EAAGJ,EAAOK,IAAMX,GAC9BY,MAAO9B,KAAK+B,IAAIhD,EAAOlG,MAAO2I,EAAOM,MAAQZ,GAC7Cc,OAAQhC,KAAK+B,IAAIhD,EAAOF,OAAQ2C,EAAOQ,OAASd,IAI5Ce,EAAeP,EAAaI,MAAQJ,EAAaC,KACjDO,EAAgBR,EAAaM,OAASN,EAAaG,IAGnDM,EAAgB5G,SAASC,cAAc,UACvC4G,EAAaD,EAActC,WAAW,MAkB5C,OAhBAsC,EAActJ,MAAQoJ,EACtBE,EAActD,OAASqD,EAGvBE,EAAWtC,UACTf,EACA2C,EAAaC,KACbD,EAAaG,IACbI,EACAC,EACA,EACA,EACAD,EACAC,GAGKC,CACT,CAWAiC,oBAAAA,CAAqB7C,EAAQ1I,EAAOgG,GAClC,MAAM2F,EAAU,IAAI1N,MAAM+H,GAAQ4F,KAAK,GAEvC,IAAK,IAAIlE,EAAI,EAAGA,EAAI1B,EAAQ0B,IAAK,CAC/B,IAAImE,EAAe,EAEnB,IAAK,IAAIlE,EAAI,EAAGA,EAAI3H,EAAO2H,IAAK,CAC9B,MAAMoC,EAA0B,GAAjBrC,EAAI1H,EAAQ2H,GACrBqC,EAAQtB,EAAOqB,EAAQ,GAEzBC,EAAQ,IACV6B,GAEJ,CAEAF,EAAQjE,GAAKmE,EAAe7L,CAC9B,CAEA,OAAO2L,CACT,CAWAF,uBAAAA,CAAwB/C,EAAQ1I,EAAOgG,GACrC,MAAM2F,EAAU,IAAI1N,MAAM+B,GAAO4L,KAAK,GAEtC,IAAK,IAAIjE,EAAI,EAAGA,EAAI3H,EAAO2H,IAAK,CAC9B,IAAIkE,EAAe,EAEnB,IAAK,IAAInE,EAAI,EAAGA,EAAI1B,EAAQ0B,IAAK,CAC/B,MAAMqC,EAA0B,GAAjBrC,EAAI1H,EAAQ2H,GACrBqC,EAAQtB,EAAOqB,EAAQ,GAEzBC,EAAQ,IACV6B,GAEJ,CAEAF,EAAQhE,GAAKkE,EAAe7F,CAC9B,CAEA,OAAO2F,CACT,CAWAD,kBAAAA,CAAmBJ,EAAYE,EAAYlD,GAEzC,IAAIU,EAAM,EACNG,EAASmC,EAAW3M,OAAS,EAEjC,IAAK,IAAImN,EAAI,EAAGA,EAAIR,EAAW3M,OAAQmN,IACrC,GAAIR,EAAWQ,GAAKxD,EAAW,CAC7BU,EAAM8C,EACN,KACF,CAGF,IAAK,IAAIA,EAAIR,EAAW3M,OAAS,EAAGmN,GAAK,EAAGA,IAC1C,GAAIR,EAAWQ,GAAKxD,EAAW,CAC7Ba,EAAS2C,EAAI,EACb,KACF,CAIF,IAAIhD,EAAO,EACPG,EAAQuC,EAAW7M,OAAS,EAEhC,IAAK,IAAImN,EAAI,EAAGA,EAAIN,EAAW7M,OAAQmN,IACrC,GAAIN,EAAWM,GAAKxD,EAAW,CAC7BQ,EAAOgD,EACP,KACF,CAGF,IAAK,IAAIA,EAAIN,EAAW7M,OAAS,EAAGmN,GAAK,EAAGA,IAC1C,GAAIN,EAAWM,GAAKxD,EAAW,CAC7BW,EAAQ6C,EAAI,EACZ,KACF,CAGF,OAAI9C,GAAOG,GAAUL,GAAQG,EACpB,KAGF,CAAED,MAAKG,SAAQL,OAAMG,QAC9B,EAIF,WAAmBf,G,WChbZ,MAAM6D,GAKX,sBAAMC,GACJ,MAAM,IAAIxJ,MAAM,mDAClB,CAMA,oBAAMyJ,GACJ,MAAM,IAAIzJ,MAAM,iDAClB,EAWK,MAAM0J,WAAwBH,GAMnCI,WAAAA,CAAYC,EAAQC,EAAS,CAAC,GAG5B,GAFAC,SAEKF,EACH,MAAM,IAAI5J,MAAM,2CAGlB1M,KAAKsW,OAASA,EACdtW,KAAKyW,SAAWF,EAAOE,UAAYrR,EACnCpF,KAAK0W,QAAUH,EAAOG,SAAWvR,EACjCnF,KAAK2W,WAAaJ,EAAOI,YAAc5R,EAAiBC,aACxDhF,KAAK4W,aAAeL,EAAOK,cAAgB7R,EAAiBE,cAC5DjF,KAAK6W,kBAAoBN,EAAOM,mBAAqB9R,EAAiBG,mBAGtElF,KAAK8W,OAASC,GAAAA,EAAMC,OAAO,CACzBN,QAAS1W,KAAK0W,QACdO,QAAS,CACP,YAAajX,KAAKsW,SAGxB,CAiBA,sBAAMJ,CAAiBgB,EAAW5E,EAAU,CAAC,GAC3C,MAAM,KACJ/K,EAAO,OAAM,KACbF,EAAO,OAAM,OACbiJ,EAAS,MAAK,KACd6G,GAAO,EAAK,YACZC,EAAc,MAAK,SACnBC,EAAW,WAAU,IACrBC,EAAM,mBACJhF,EAGJ,IAAK4E,KAAeA,aAAqBK,MACvC,MAAMvX,KAAKwX,aACTvU,EAAYE,iBACZG,EAAYS,gBACZ,+BAKJ,MAAM0T,EAAW,IAAIC,SA6BrB,OA5BAD,EAASE,OAAO,aAAcT,GAC9BO,EAASE,OAAO,OAAQpQ,GACxBkQ,EAASE,OAAO,OAAQtQ,GACxBoQ,EAASE,OAAO,SAAUrH,GAGtB6G,IACFM,EAASE,OAAO,OAAQ,QACpBP,GACFK,EAASE,OAAO,cAAeP,IAK/BC,GAAyB,aAAbA,GACdI,EAASE,OAAO,WAAYN,GAI1BC,GAAe,oBAARA,GACTG,EAASE,OAAO,MAAOL,GAGzBxJ,QAAQ2E,IAAI,0BAA2B,CACrClL,OAAMF,OAAMiJ,SAAQ6G,OAAMC,cAAaC,WAAUC,cAItCtX,KAAK4X,kBAAkBC,UAClC,IACE,MAAMC,QAAiB9X,KAAK8W,OAAOiB,KAAK/X,KAAKyW,SAAUgB,EAAU,CAC/DO,aAAc,OACdf,QAAS,CACP,eAAgB,yBAKpB,IAAKa,EAAS1P,QAAU0P,EAAS1P,gBAAgBmP,MAC/C,MAAMvX,KAAKwX,aACTvU,EAAYE,iBACZG,EAAYS,gBACZ,6BAMJ,OAFA+J,QAAQ2E,IAAI,mCAAoCqF,EAAS1P,KAAKb,KAAM,SAE7DuQ,EAAS1P,IAClB,CAAE,MAAOnH,GAEP,MAAIA,EAAM6W,SAEF9X,KAAKiY,gBAAgBhX,EAAM6W,UACxB7W,EAAMiX,QAETlY,KAAKwX,aACTvU,EAAYI,cACZC,EAAYU,gBACZ,2BACA,GAIIhE,KAAKwX,aACTvU,EAAYE,iBACZG,EAAYS,gBACZ9C,EAAM2F,SAAW,uBAGvB,GAEJ,CAOA,oBAAMuP,GACJ,IAGE,MAAM2B,QAAiB9X,KAAK8W,OAAOqB,IAAI,qCAAsC,CAC3EzB,QAAS,MAGX,OAAOoB,EAAStN,SAAW1E,EAAYC,EACzC,CAAE,MAAO9E,GAEP,OAAO,CACT,CACF,CAUA,uBAAM2W,CAAkBQ,GACtB,IAAIC,EAEJ,IAAK,IAAIC,EAAU,EAAGA,GAAWtY,KAAK2W,WAAY2B,IAChD,IACE,aAAaF,GACf,CAAE,MAAOnX,GAIP,GAHAoX,EAAYpX,GAGPA,EAAMoJ,UACT,MAAMpJ,EAIR,GAAIqX,IAAYtY,KAAK2W,WACnB,MAAM1V,EAIR,MAAMsX,EAAQvY,KAAK4W,aAAevF,KAAKmH,IAAIxY,KAAK6W,kBAAmByB,EAAU,SAGvEtY,KAAKyY,OAAOF,EACpB,CAIF,MAAMF,CACR,CASAJ,eAAAA,CAAgBH,GACd,MAAMtN,EAASsN,EAAStN,OAExB,OAAQA,GACN,KAAK1E,EAAYE,YACf,OAAOhG,KAAKwX,aACVvU,EAAYG,UACZE,EAAYS,gBACZ,uCACA,GAGJ,KAAK+B,EAAYG,aACjB,KAAKH,EAAYK,UACf,OAAOnG,KAAKwX,aACVvU,EAAYG,UACZE,EAAYM,gBACZ,8BACA,GAGJ,KAAKkC,EAAYI,iBACjB,KAAKJ,EAAYO,kBACf,OAAOrG,KAAKwX,aACVvU,EAAYG,UACZE,EAAYO,mBACZ,0CACA,GAGJ,KAAKiC,EAAYQ,sBACjB,KAAKR,EAAYS,oBACf,OAAOvG,KAAKwX,aACVvU,EAAYG,UACZE,EAAYQ,wBACZ,uCACA,GAGJ,QACE,OAAO9D,KAAKwX,aACVvU,EAAYG,UACZE,EAAYQ,wBACZ,cAAc0G,IACdA,GAAU,KAGlB,CAYAgN,YAAAA,CAAanQ,EAAMV,EAAM+R,EAASrO,GAAY,GAC5C,MAAMpJ,EAAQ,IAAIyL,MAAMxI,EAAeyC,IAAS+R,GAKhD,OAJAzX,EAAMoG,KAAOA,EACbpG,EAAM0F,KAAOA,EACb1F,EAAMyX,QAAUA,EAChBzX,EAAMoJ,UAAYA,EACXpJ,CACT,CASAwX,MAAAA,CAAOE,GACL,OAAO,IAAIhJ,QAAQC,GAAW5B,WAAW4B,EAAS+I,GACpD,EAWK,SAASC,GAA+BC,EAAUvC,EAAQC,EAAS,CAAC,GACzE,OAAQsC,EAAShR,eACf,IAAK,WACL,IAAK,YACH,OAAO,IAAIuO,GAAgBE,EAAQC,GAErC,QACE,MAAM,IAAI7J,MAAM,4CAA4CmM,KAElE,CC/TA,MAAMC,GACJzC,WAAAA,GACErW,KAAK+Y,WAAatJ,GAClBzP,KAAKgZ,iBAAmB5G,GACxBpS,KAAKiZ,qBAAuB,KAI5BjZ,KAAKkZ,MAAQ,IAAIC,GACnB,CAOAC,uBAAAA,CAAwBC,GACtBrZ,KAAKiZ,qBAAuBI,CAC9B,CAwBA,kBAAMnY,CAAaoY,GACjB,MAAMC,EAAYjM,KAAKkM,MAEvB,IAEE,IAAKF,KAAeA,aAAqBnS,MACvC,MAAMnH,KAAKwX,aACTvU,EAAYE,iBACZG,EAAYS,gBACZ,+BAKJ,IAAK/D,KAAKiZ,qBACR,MAAMjZ,KAAKwX,aACTvU,EAAYG,UACZE,EAAYQ,wBACZ,6CAKJ,MAAM2V,EAAWzZ,KAAK0Z,kBAAkBJ,GAGlCK,EAAe3Z,KAAK4Z,iBAAiBH,GAC3C,GAAIE,EACF,MAAO,IACFA,EACHE,eAAgBvM,KAAKkM,MAAQD,EAC7BO,WAAW,GAKf,MAAMC,QAAwB/Z,KAAKga,eAAeV,GAG5CnO,QAAsBnL,KAAK+Y,WAAWrJ,UAAUqK,GAGhD7C,QAAkBlX,KAAKia,oBAAoBX,EAAWnO,GAGtD+O,QAAsBla,KAAKkW,iBAAiBgB,EAAW,CAC3D3P,KAAM,OACNF,KAAM,OACNiJ,OAAQ,MACR6G,KAAM3R,EACN4R,YAAa,GAAG3R,QAIZ0U,QAAqBna,KAAKoa,cAAcF,GAGxCG,QAAmBra,KAAK+Y,WAAWrJ,UAAUyK,GAC7CG,EAAaD,EAAWnQ,MACxBqQ,EAAcF,EAAWnK,OAE/BpC,QAAQ2E,IAAI,yBAA0B6H,EAAY,IAAKC,GAGvD,MAAMhR,EAAS,CACbwQ,kBACAS,iBAAkBL,EAClBjQ,MAAOoQ,EACPpK,OAAQqK,EACRV,eAAgBvM,KAAKkM,MAAQD,EAC7BO,WAAW,GAMb,OAFA9Z,KAAKya,aAAahB,EAAUlQ,GAErBA,CACT,CAAE,MAAOtI,GAEP,GAAIA,EAAMoG,MAAQpG,EAAM0F,KACtB,MAAM1F,EAGR,MAAMjB,KAAKwX,aACTvU,EAAYE,iBACZG,EAAYI,aACZzC,EAAM2F,SAAW,0BAErB,CACF,CAcA,mBAAM8T,CAAcpB,EAAWzI,GAC7B,IAEE,GAAIA,EAAM3G,OAASvF,GAAmBkM,EAAMX,QAAUtL,EAEpD,OAAO0U,EAIT,MAAMqB,EAAgB3a,KAAK+Y,WAAWnI,YACpCC,EACAlM,EACAC,GAIIgW,QAAuB5a,KAAK+Y,WAAW1I,YAC3CsK,EACA9V,EACAC,GAGF,OAAO8V,CACT,CAAE,MAAO3Z,GACP,MAAMjB,KAAKwX,aACTvU,EAAYE,iBACZG,EAAYI,aACZ,6BAA6BzC,EAAM2F,UAEvC,CACF,CAeA,sBAAMsP,CAAiBgB,EAAW5E,EAAU,CAAC,GAC3C,IAAKtS,KAAKiZ,qBACR,MAAMjZ,KAAKwX,aACTvU,EAAYG,UACZE,EAAYQ,wBACZ,6CAKJ,MAAM+W,EAAa,CACjBtT,KAAM+K,EAAQ/K,MAAQ,OACtBF,KAAMiL,EAAQjL,MAAQ,OACtBiJ,OAAQgC,EAAQhC,QAAU,MAC1B6G,MAAM,EACNC,YAAa,UACV9E,GAGLxE,QAAQ2E,IAAI,2BAA4BoI,GAGxC,MAAMC,QAAmB9a,KAAKiZ,qBAAqB/C,iBAAiBgB,EAAW2D,GAE/E,OAAOC,CACT,CAaA,mBAAMV,CAAczJ,GAClB,OAAO,IAAIhB,QAAQ,CAACC,EAASC,KAC3B,IAAKc,KAAUA,aAAgB4G,MAM7B,YALA1H,EAAO7P,KAAKwX,aACVvU,EAAYE,iBACZG,EAAYI,aACZ,0BAKJ,MAAMyF,EAAS,IAAIC,WAEnBD,EAAOE,OAAS,KACduG,EAAQzG,EAAOI,SAGjBJ,EAAOK,QAAU,KACfqG,EAAO7P,KAAKwX,aACVvU,EAAYE,iBACZG,EAAYI,aACZ,uCAIJyF,EAAOM,cAAckH,IAEzB,CASA,oBAAMqJ,CAAe9S,GACnB,OAAO,IAAIyI,QAAQ,CAACC,EAASC,KAC3B,MAAM1G,EAAS,IAAIC,WAEnBD,EAAOE,OAAS,KACduG,EAAQzG,EAAOI,SAGjBJ,EAAOK,QAAU,KACfqG,EAAO7P,KAAKwX,aACVvU,EAAYE,iBACZG,EAAYK,iBACZ,+BAIJwF,EAAOM,cAAcvC,IAEzB,CAUA,yBAAM+S,CAAoBX,EAAWzI,GAEnC,MAAMkK,EACJlK,EAAM3G,MAAQvF,GACdkM,EAAMX,OAAStL,EAEjB,OAAImW,QACW/a,KAAK0a,cAAcpB,EAAWzI,GAItCyI,CACT,CAcAI,iBAAAA,CAAkBxS,GAIhB,MAAO,GAAGA,EAAKO,QAAQP,EAAKK,QAAQL,EAAK8T,gBAAgB9T,EAAKG,MAChE,CAWAuS,gBAAAA,CAAiBH,GACf,MAAMwB,EAASjb,KAAKkZ,MAAMf,IAAIsB,GAE9B,IAAKwB,EACH,OAAO,KAIT,MAAMzB,EAAMlM,KAAKkM,MACX0B,EAAM1B,EAAMyB,EAAO5N,UAEzB,OAAI6N,EAAMrV,GAER7F,KAAKkZ,MAAMiC,OAAO1B,GACX,MAGFwB,EAAO1R,MAChB,CAcAkR,YAAAA,CAAahB,EAAUlQ,GAErB,GAAIvJ,KAAKkZ,MAAM3R,MAAQ3B,EAAgB,CAErC,MAAMwV,EAAWpb,KAAKkZ,MAAMmC,OAAOC,OAAO5R,MAC1C1J,KAAKkZ,MAAMiC,OAAOC,EACpB,CAGApb,KAAKkZ,MAAMqC,IAAI9B,EAAU,CACvBlQ,SACA8D,UAAWC,KAAKkM,OAEpB,CAOAgC,UAAAA,GACExb,KAAKkZ,MAAMuC,OACb,CAOAC,aAAAA,GACE,MAAO,CACLnU,KAAMvH,KAAKkZ,MAAM3R,KACjBP,QAASpB,EACTyV,KAAMlT,MAAMwT,KAAK3b,KAAKkZ,MAAMmC,QAEhC,CAYA7D,YAAAA,CAAanQ,EAAMV,EAAM+R,EAASrO,GAAY,GAC5C,MAAMpJ,EAAQ,IAAIyL,MAAMxI,EAAeyC,IAAS+R,GAKhD,OAJAzX,EAAMoG,KAAOA,EACbpG,EAAM0F,KAAOA,EACb1F,EAAMyX,QAAUA,EAChBzX,EAAMoJ,UAAYA,EACXpJ,CACT,EAIF,MAAM2a,GAAwB,IAAI9C,GAQlC,GAAIzT,EACF,IACE,MAAMwW,EAAmBjD,GAA+B,WAAYvT,GACpEuW,GAAsBxC,wBAAwByC,EAChD,CAAE,MAAO5a,IACP6M,QAAQ7M,MAAM,mDAAoDA,GACpE,MAEA6M,QAAQgO,KAAK,iFAGf,UC3VA,IACArU,KAAA,MAEAsU,WAAA,CACAC,cAAA,EACAC,eAAA,EACAC,gBAAA,EACAC,eAAA,GACAC,cAAAA,IAGAhU,IAAAA,GACA,OAEAiU,aAAA,KACA1b,iBAAA,KAGAC,cAAA,EACAI,mBAAA,EACAD,iBAAAoD,EAAAC,KAGAtD,kBAAA,KACAwb,eAAA,KAGArb,MAAA,KAGAG,gBAAA,EACAiK,UAAA,EAEA,EAEAH,SAAA,CAKAqR,WAAAA,GACA,mBAAAzb,oBAAA,KAAAF,YACA,EAMAC,UAAAA,GACA,mBAAAF,mBAAA,KAAAC,YACA,EAMA4b,QAAAA,GACA,mBAAAvb,OAAA,KAAAA,MAAAoJ,SACA,EAMA9I,kBAAAA,GACA,YAAAX,aACA,kBAAAI,sBAEA,KAAAC,MACA,WAAAA,MAAA2F,UAEA,KAAA9F,kBACA,cAEA,KAAAH,iBACA,eAEA,SACA,GAGA4K,OAAAA,GAEA,KAAAkR,cACAhR,OAAAC,iBAAA,cAAA+Q,aAIAhR,OAAAC,iBAAA,eAAAgR,0BAGA9P,SAAAI,KAAA2P,UAAAC,OAAA,UACA,EAEAjR,aAAAA,GACAF,OAAAG,oBAAA,cAAA6Q,aACAhR,OAAAG,oBAAA,eAAA8Q,yBACA,EAEApU,QAAA,CAQA,iBAAA7H,CAAAyG,EAAAsF,GACA,IAEA,KAAAvL,MAAA,KAGA,KAAAob,aAAAnV,EACA,KAAAvG,iBAAA6L,EAGA,KAAAzL,iBAAAoD,EAAAC,KAGA,KAAAtD,kBAAA,KACA,KAAAwb,eAAA,KACA,KAAAlb,gBAAA,CAEA,OAAAwN,GACA,KAAAlO,YAAA,CACA2G,KAAApE,EAAAC,aACAyD,KAAArD,EAAAG,eACAmD,QAAA1C,EAAAZ,EAAAG,gBACAiV,QAAA9J,EAAAhI,QACAyD,WAAA,GAEA,CACA,EAMA,kBAAAnJ,GACA,QAAAmb,aAWA,IAEA,KAAAzb,cAAA,EACA,KAAAK,MAAA,KACA,KAAAF,iBAAAoD,EAAAI,oBACA,KAAAvD,mBAAA,EAGA,MAAAuI,QAAAuP,GAAA5X,aAAA,KAAAmb,cAGA,KAAAC,eAAA/S,EACA,KAAAzI,kBAAAyI,EAAAiR,iBAGA,KAAAzZ,iBAAAoD,EAAAM,SACA,KAAAzD,mBAAA,IACA,KAAAI,gBAAA,CAEA,OAAAwN,GAEA,KAAAiO,sBAAAjO,EAEA,SACA,KAAAhO,cAAA,CACA,MAnCA,KAAAF,YAAA,CACA2G,KAAApE,EAAAE,iBACAwD,KAAArD,EAAAK,iBACAiD,QAAA,SACA8R,QAAA,mBACArO,WAAA,GA+BA,EAMAyS,iBAAAA,GACA,QAAAhc,kBAWA,IAEA,MAAA2L,EAAAH,GAAAa,mBAGAb,GAAAC,cAAA,KAAAzL,kBAAA2L,EAKA,OAAAmC,GACA,KAAAlO,YAAA,CACA2G,KAAApE,EAAAE,iBACAwD,KAAArD,EAAAI,aACAkD,QAAA,WACA8R,QAAA9J,EAAAhI,QACAyD,WAAA,GAEA,MA5BA,KAAA3J,YAAA,CACA2G,KAAApE,EAAAE,iBACAwD,KAAArD,EAAAK,iBACAiD,QAAA,WACA8R,QAAA,+BACArO,WAAA,GAwBA,EAMA9J,KAAAA,GAEA,KAAA8b,aAAA,KACA,KAAA1b,iBAAA,KACA,KAAAG,kBAAA,KACA,KAAAwb,eAAA,KACA,KAAArb,MAAA,KACA,KAAAL,cAAA,EACA,KAAAI,mBAAA,EACA,KAAAD,iBAAAoD,EAAAC,KACA,KAAAhD,gBAAA,CACA,EAQAyb,qBAAAA,CAAAjO,GAEA,GAAAA,GAAAA,EAAAvH,MAAAuH,EAAAjI,MAAA,kBAAAiI,EAAAhI,SAAA,mBAAAgI,EAAAvE,UAEA,YADA,KAAA3J,YAAAkO,GAKA,MAAAjM,EAAAiM,GAAAA,EAAAhI,QAAAgI,EAAAhI,QAAA6D,OAAAmE,GAGA,IAAAmO,EAAA9Z,EAAAE,iBACA6Z,EAAA1Z,EAAAI,aACA2G,GAAA,EAGA1H,EAAAkE,SAAA,YAAAlE,EAAAkE,SAAA,UAAAlE,EAAAkE,SAAA,YACAkW,EAAA9Z,EAAAI,cACA2Z,EAAA1Z,EAAAW,iBAGA2K,GAAAA,EAAAkJ,WACAiF,EAAA9Z,EAAAG,UAGA,MAAAwL,EAAAkJ,SAAAtN,QACAwS,EAAA1Z,EAAAM,gBACAyG,GAAA,GACA,MAAAuE,EAAAkJ,SAAAtN,QACAwS,EAAA1Z,EAAAO,mBACAwG,GAAA,GACA,MAAAuE,EAAAkJ,SAAAtN,QACAwS,EAAA1Z,EAAAS,gBACAsG,GAAA,GACAuE,EAAAkJ,SAAAtN,QAAA,MACAwS,EAAA1Z,EAAAQ,wBACAuG,GAAA,IAKA,KAAA3J,YAAA,CACA2G,KAAA0V,EACApW,KAAAqW,EACApW,QAAA1C,EAAA8Y,IAAA,WACAtE,QAAA/V,EACA0H,aAEA,EAQA3J,WAAAA,CAAAO,GAEAA,aAAAyL,MACA,KAAAzL,MAAA,CACAoG,KAAApE,EAAAE,iBACAwD,KAAArD,EAAAI,aACAkD,QAAA3F,EAAA2F,SAAA,WACA8R,QAAAzX,EAAAyN,OAAA,GACArE,WAAA,GAGA,KAAApJ,MAAAA,EAEA,KAAAF,iBAAAoD,EAAAO,MACA,KAAA9D,cAAA,CACA,EAMA,WAAAN,GACA,KAAAkc,WAKA,KAAAvb,MAAA,WACA,KAAAC,eACA,EAMAub,WAAAA,GACA,KAAApR,SAAAI,OAAAI,WAAA,GACA,EAMAxK,qBAAAA,CAAA+G,GACA0F,QAAA2E,IAAA,uBAAArK,EAAAqE,SAEA,EAMAiQ,wBAAAA,CAAAhU,GAQA,GANA,WAAAA,EAAAuU,MAAA,KAAAhc,OAAA,KAAAH,qBACA4H,EAAA7G,iBACA,KAAAtB,SAIA,UAAAmI,EAAAuU,KAAA,KAAApc,aAAA,KAAAD,eAAA,KAAAE,kBAAA,CACA,MAAAoc,EAAAtQ,SAAAsQ,cAEA,WAAAA,EAAAC,SAAA,UAAAD,EAAAC,UACAzU,EAAA7G,iBACA,KAAAX,eAEA,CAGA,UAAAwH,EAAAuU,KAAA,MAAAvU,EAAAuU,MAAA,KAAAT,WAAA9T,EAAA0U,UAAA1U,EAAA2U,QAAA,CACA,MAAAH,EAAAtQ,SAAAsQ,cAEA,UAAAA,EAAAC,SAAA,aAAAD,EAAAC,UACAzU,EAAA7G,iBACA,KAAAvB,QAEA,CACA,ICvfyO,MCQrO,IAAY,OACd,GACAR,EACA0B,GACA,EACA,KACA,KACA,MAIF,GAAe,G,QCff8b,EAAAA,GAAI/G,OAAOgH,eAAgB,EAE3B,IAAID,EAAAA,GAAI,CACNxd,OAAQ0d,GAAKA,EAAEC,MACdC,OAAO,O,GCPNC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBhT,IAAjBiT,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,CAAC,GAOX,OAHAE,EAAoBJ,GAAUK,KAAKF,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAGpEI,EAAOD,OACf,CAGAH,EAAoBO,EAAIF,E,WCzBxB,IAAIG,EAAW,GACfR,EAAoBS,EAAI,SAAS9U,EAAQ+U,EAAUC,EAAIC,GACtD,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAAS1I,EAAI,EAAGA,EAAIoI,EAASvV,OAAQmN,IAAK,CACrCsI,EAAWF,EAASpI,GAAG,GACvBuI,EAAKH,EAASpI,GAAG,GACjBwI,EAAWJ,EAASpI,GAAG,GAE3B,IAJA,IAGI2I,GAAY,EACPC,EAAI,EAAGA,EAAIN,EAASzV,OAAQ+V,MACpB,EAAXJ,GAAsBC,GAAgBD,IAAa7T,OAAO0Q,KAAKuC,EAAoBS,GAAGQ,MAAM,SAAS5B,GAAO,OAAOW,EAAoBS,EAAEpB,GAAKqB,EAASM,GAAK,GAChKN,EAASQ,OAAOF,IAAK,IAErBD,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG7C,GAAGG,EAAW,CACbP,EAASU,OAAO9I,IAAK,GACrB,IAAI7B,EAAIoK,SACE1T,IAANsJ,IAAiB5K,EAAS4K,EAC/B,CACD,CACA,OAAO5K,CArBP,CAJCiV,EAAWA,GAAY,EACvB,IAAI,IAAIxI,EAAIoI,EAASvV,OAAQmN,EAAI,GAAKoI,EAASpI,EAAI,GAAG,GAAKwI,EAAUxI,IAAKoI,EAASpI,GAAKoI,EAASpI,EAAI,GACrGoI,EAASpI,GAAK,CAACsI,EAAUC,EAAIC,EAwB/B,C,eC5BAZ,EAAoBmB,EAAI,SAASf,GAChC,IAAIgB,EAAShB,GAAUA,EAAOiB,WAC7B,WAAa,OAAOjB,EAAO,UAAY,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAJ,EAAoBsB,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CACR,C,eCNApB,EAAoBsB,EAAI,SAASnB,EAASqB,GACzC,IAAI,IAAInC,KAAOmC,EACXxB,EAAoByB,EAAED,EAAYnC,KAASW,EAAoByB,EAAEtB,EAASd,IAC5EtS,OAAO2U,eAAevB,EAASd,EAAK,CAAEsC,YAAY,EAAMpH,IAAKiH,EAAWnC,IAG3E,C,eCPAW,EAAoBxJ,EAAI,WACvB,GAA0B,kBAAfoL,WAAyB,OAAOA,WAC3C,IACC,OAAOxf,MAAQ,IAAI+K,SAAS,cAAb,EAChB,CAAE,MAAOzB,GACR,GAAsB,kBAAXmC,OAAqB,OAAOA,MACxC,CACA,CAPuB,E,eCAxBmS,EAAoByB,EAAI,SAASI,EAAKC,GAAQ,OAAO/U,OAAOgV,UAAUC,eAAe1B,KAAKuB,EAAKC,EAAO,C,eCCtG9B,EAAoBzJ,EAAI,SAAS4J,GACX,qBAAX8B,QAA0BA,OAAOC,aAC1CnV,OAAO2U,eAAevB,EAAS8B,OAAOC,YAAa,CAAEpW,MAAO,WAE7DiB,OAAO2U,eAAevB,EAAS,aAAc,CAAErU,OAAO,GACvD,C,eCDA,IAAIqW,EAAkB,CACrB,IAAK,GAaNnC,EAAoBS,EAAEO,EAAI,SAASoB,GAAW,OAAoC,IAA7BD,EAAgBC,EAAgB,EAGrF,IAAIC,EAAuB,SAASC,EAA4B9X,GAC/D,IAKIyV,EAAUmC,EALV1B,EAAWlW,EAAK,GAChB+X,EAAc/X,EAAK,GACnBgY,EAAUhY,EAAK,GAGI4N,EAAI,EAC3B,GAAGsI,EAAS3W,KAAK,SAAS0Y,GAAM,OAA+B,IAAxBN,EAAgBM,EAAW,GAAI,CACrE,IAAIxC,KAAYsC,EACZvC,EAAoByB,EAAEc,EAAatC,KACrCD,EAAoBO,EAAEN,GAAYsC,EAAYtC,IAGhD,GAAGuC,EAAS,IAAI7W,EAAS6W,EAAQxC,EAClC,CAEA,IADGsC,GAA4BA,EAA2B9X,GACrD4N,EAAIsI,EAASzV,OAAQmN,IACzBgK,EAAU1B,EAAStI,GAChB4H,EAAoByB,EAAEU,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOpC,EAAoBS,EAAE9U,EAC9B,EAEI+W,EAAqBC,KAAK,uCAAyCA,KAAK,wCAA0C,GACtHD,EAAmBE,QAAQP,EAAqBQ,KAAK,KAAM,IAC3DH,EAAmBI,KAAOT,EAAqBQ,KAAK,KAAMH,EAAmBI,KAAKD,KAAKH,G,IC/CvF,IAAIK,EAAsB/C,EAAoBS,OAAExT,EAAW,CAAC,KAAM,WAAa,OAAO+S,EAAoB,KAAO,GACjH+C,EAAsB/C,EAAoBS,EAAEsC,E","sources":["webpack://tshirt-design-extractor/./src/App.vue","webpack://tshirt-design-extractor/./src/components/ImageUploader.vue","webpack://tshirt-design-extractor/./src/constants.js","webpack://tshirt-design-extractor/./src/utils/validation.js","webpack://tshirt-design-extractor/src/components/ImageUploader.vue","webpack://tshirt-design-extractor/./src/components/ImageUploader.vue?1b36","webpack://tshirt-design-extractor/./src/components/ImageUploader.vue?955f","webpack://tshirt-design-extractor/./src/components/ImageProcessor.vue","webpack://tshirt-design-extractor/src/components/ImageProcessor.vue","webpack://tshirt-design-extractor/./src/components/ImageProcessor.vue?0d17","webpack://tshirt-design-extractor/./src/components/ImageProcessor.vue?79b7","webpack://tshirt-design-extractor/./src/components/ImageComparison.vue","webpack://tshirt-design-extractor/src/components/ImageComparison.vue","webpack://tshirt-design-extractor/./src/components/ImageComparison.vue?25fb","webpack://tshirt-design-extractor/./src/components/ImageComparison.vue?cc41","webpack://tshirt-design-extractor/./src/components/DownloadButton.vue","webpack://tshirt-design-extractor/./src/services/DownloadManager.js","webpack://tshirt-design-extractor/src/components/DownloadButton.vue","webpack://tshirt-design-extractor/./src/components/DownloadButton.vue?7b6c","webpack://tshirt-design-extractor/./src/components/DownloadButton.vue?d949","webpack://tshirt-design-extractor/./src/components/ErrorBoundary.vue","webpack://tshirt-design-extractor/src/components/ErrorBoundary.vue","webpack://tshirt-design-extractor/./src/components/ErrorBoundary.vue?0cbc","webpack://tshirt-design-extractor/./src/components/ErrorBoundary.vue?3f88","webpack://tshirt-design-extractor/./src/services/CanvasUtility.js","webpack://tshirt-design-extractor/./src/services/PatternExtractor.js","webpack://tshirt-design-extractor/./src/services/BackgroundRemovalAPI.js","webpack://tshirt-design-extractor/./src/services/ImageProcessorService.js","webpack://tshirt-design-extractor/src/App.vue","webpack://tshirt-design-extractor/./src/App.vue?c036","webpack://tshirt-design-extractor/./src/App.vue?0e40","webpack://tshirt-design-extractor/./src/main.js","webpack://tshirt-design-extractor/webpack/bootstrap","webpack://tshirt-design-extractor/webpack/runtime/chunk loaded","webpack://tshirt-design-extractor/webpack/runtime/compat get default export","webpack://tshirt-design-extractor/webpack/runtime/define property getters","webpack://tshirt-design-extractor/webpack/runtime/global","webpack://tshirt-design-extractor/webpack/runtime/hasOwnProperty shorthand","webpack://tshirt-design-extractor/webpack/runtime/make namespace object","webpack://tshirt-design-extractor/webpack/runtime/jsonp chunk loading","webpack://tshirt-design-extractor/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\",\"role\":\"application\",\"aria-label\":\"TÊÅ§ÂõæÊ°àÊèêÂèñÂ∑•ÂÖ∑\"}},[_c('a',{staticClass:\"skip-to-main\",attrs:{\"href\":\"#main-content\"}},[_vm._v(\"Ë∑≥ËΩ¨Âà∞‰∏ªÂÜÖÂÆπ\")]),_c('ErrorBoundary',{attrs:{\"on-retry\":_vm.retry,\"on-reset\":_vm.reset}},[_c('header',{staticClass:\"app-header\",attrs:{\"role\":\"banner\"}},[_c('h1',{staticClass:\"app-title\"},[_c('span',{staticClass:\"title-icon\",attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"üëï\")]),_vm._v(\" TÊÅ§ÂõæÊ°àÊèêÂèñÂ∑•ÂÖ∑ \")]),_c('p',{staticClass:\"app-subtitle\"},[_vm._v(\" Ëá™Âä®ÊèêÂèñTÊÅ§‰∏äÁöÑÂõæÊ°àËÆæËÆ°ÔºåÁîüÊàêÈÄèÊòéËÉåÊôØÁöÑÂπ≥Èù¢ËÆæËÆ°Âõæ \")])]),_c('main',{staticClass:\"app-main\",attrs:{\"id\":\"main-content\",\"role\":\"main\",\"aria-label\":\"‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü\"}},[_c('section',{staticClass:\"app-section\",attrs:{\"aria-labelledby\":\"upload-heading\",\"role\":\"region\"}},[_c('div',{staticClass:\"section-header\"},[_c('span',{staticClass:\"step-number\",attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"1\")]),_c('h2',{staticClass:\"section-title\",attrs:{\"id\":\"upload-heading\"}},[_vm._v(\"‰∏ä‰º†ÂõæÁâá\")])]),_c('ImageUploader',{on:{\"image-selected\":_vm.uploadImage,\"upload-error\":_vm.handleError,\"image-cleared\":_vm.reset}})],1),(_vm.originalImageUrl)?_c('section',{staticClass:\"app-section\",attrs:{\"aria-labelledby\":\"process-heading\",\"role\":\"region\"}},[_c('div',{staticClass:\"section-header\"},[_c('span',{staticClass:\"step-number\",attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"2\")]),_c('h2',{staticClass:\"section-title\",attrs:{\"id\":\"process-heading\"}},[_vm._v(\"ÊèêÂèñÂõæÊ°à\")])]),_c('ImageProcessor',{attrs:{\"is-processing\":_vm.isProcessing,\"can-process\":_vm.canProcess,\"has-result\":!!_vm.extractedImageUrl,\"status\":_vm.processingStatus,\"progress\":_vm.processingProgress,\"error\":_vm.error,\"on-process\":_vm.processImage,\"on-retry\":_vm.retry,\"on-reset\":_vm.reset}})],1):_vm._e(),(_vm.showComparison)?_c('section',{staticClass:\"app-section\",attrs:{\"aria-labelledby\":\"results-heading\",\"role\":\"region\",\"aria-live\":\"polite\"}},[_c('div',{staticClass:\"section-header\"},[_c('span',{staticClass:\"step-number\",attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"3\")]),_c('h2',{staticClass:\"section-title\",attrs:{\"id\":\"results-heading\"}},[_vm._v(\"Êü•ÁúãÁªìÊûú\")])]),_c('ImageComparison',{attrs:{\"original-image\":_vm.originalImageUrl,\"extracted-image\":_vm.extractedImageUrl}})],1):_vm._e(),(_vm.extractedImageUrl)?_c('section',{staticClass:\"app-section\",attrs:{\"aria-labelledby\":\"download-heading\",\"role\":\"region\"}},[_c('div',{staticClass:\"section-header\"},[_c('span',{staticClass:\"step-number\",attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"4\")]),_c('h2',{staticClass:\"section-title\",attrs:{\"id\":\"download-heading\"}},[_vm._v(\"‰∏ãËΩΩÂõæÊ°à\")])]),_c('DownloadButton',{attrs:{\"extracted-image\":_vm.extractedImageUrl},on:{\"download-success\":_vm.handleDownloadSuccess,\"download-error\":_vm.handleError}})],1):_vm._e(),_c('div',{staticClass:\"sr-only\",attrs:{\"role\":\"status\",\"aria-live\":\"polite\",\"aria-atomic\":\"true\"}},[_vm._v(\" \"+_vm._s(_vm.screenReaderStatus)+\" \")])]),_c('footer',{staticClass:\"app-footer\",attrs:{\"role\":\"contentinfo\"}},[_c('p',{staticClass:\"footer-text\"},[_vm._v(\" ‰ΩøÁî®AIÊäÄÊúØËá™Âä®ÊèêÂèñÂõæÊ°à ¬∑ ÊîØÊåÅJPG„ÄÅPNG„ÄÅWebPÊ†ºÂºè \")])])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"image-uploader\"},[_c('div',{staticClass:\"upload-area\",class:{ 'drag-over': _vm.isDragOver, 'has-preview': _vm.previewUrl },on:{\"drop\":function($event){$event.preventDefault();return _vm.handleDrop.apply(null, arguments)},\"dragover\":function($event){$event.preventDefault();return _vm.handleDragOver.apply(null, arguments)},\"dragleave\":function($event){$event.preventDefault();return _vm.handleDragLeave.apply(null, arguments)},\"click\":_vm.triggerFileInput}},[_c('input',{ref:\"fileInput\",staticClass:\"file-input\",attrs:{\"type\":\"file\",\"accept\":_vm.acceptedFormats.join(','),\"aria-label\":\"ÈÄâÊã©ÂõæÁâáÊñá‰ª∂\"},on:{\"change\":_vm.handleFileSelect}}),(!_vm.previewUrl)?_c('div',{staticClass:\"upload-prompt\"},[_c('div',{staticClass:\"upload-icon\"},[_vm._v(\"üìÅ\")]),_vm._m(0),_c('p',{staticClass:\"upload-hint\"},[_vm._v(\" ÊîØÊåÅ JPG„ÄÅPNG„ÄÅWebP Ê†ºÂºèÔºåÊúÄÂ§ß 10MB \")])]):_c('div',{staticClass:\"preview-container\"},[_c('img',{staticClass:\"preview-image\",attrs:{\"src\":_vm.previewUrl,\"alt\":\"‰∏ä‰º†ÁöÑÂõæÁâáÈ¢ÑËßà\"}}),_c('button',{staticClass:\"clear-button\",attrs:{\"aria-label\":\"Ê∏ÖÈô§ÂõæÁâá\",\"title\":\"Ê∏ÖÈô§ÂõæÁâá\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.clearImage.apply(null, arguments)}}},[_vm._v(\" ‚úï \")])])]),(_vm.errorMessage)?_c('div',{staticClass:\"error-message\",attrs:{\"role\":\"alert\"}},[_c('span',{staticClass:\"error-icon\"},[_vm._v(\"‚ö†Ô∏è\")]),_c('span',{staticClass:\"error-text\"},[_vm._v(_vm._s(_vm.errorMessage))])]):_vm._e()])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('p',{staticClass:\"upload-text\"},[_c('strong',[_vm._v(\"ÁÇπÂáª‰∏ä‰º†\")]),_vm._v(\" ÊàñÊãñÊîæÂõæÁâáÂà∞Ê≠§Â§Ñ \")])\n}]\n\nexport { render, staticRenderFns }","/**\r\n * Constants for T-shirt Design Extractor\r\n * \r\n * This file contains all constant values used throughout the application\r\n * including validation rules, error types, and configuration values.\r\n */\r\n\r\n// ============================================================================\r\n// File Validation Constants\r\n// ============================================================================\r\n\r\n/**\r\n * Maximum allowed file size in bytes (10MB)\r\n * Can be overridden by VUE_APP_MAX_FILE_SIZE environment variable\r\n */\r\nexport const MAX_FILE_SIZE = process.env.VUE_APP_MAX_FILE_SIZE \r\n  ? parseInt(process.env.VUE_APP_MAX_FILE_SIZE, 10) \r\n  : 10 * 1024 * 1024; // 10MB\r\n\r\n/**\r\n * Accepted image MIME types\r\n */\r\nexport const ACCEPTED_MIME_TYPES = [\r\n  'image/jpeg',\r\n  'image/png',\r\n  'image/webp'\r\n];\r\n\r\n/**\r\n * Accepted file extensions\r\n */\r\nexport const ACCEPTED_EXTENSIONS = [\r\n  '.jpg',\r\n  '.jpeg',\r\n  '.png',\r\n  '.webp'\r\n];\r\n\r\n// ============================================================================\r\n// Error Type Constants\r\n// ============================================================================\r\n\r\n/**\r\n * Error types for different failure scenarios\r\n */\r\nexport const ERROR_TYPES = {\r\n  UPLOAD_ERROR: 'UPLOAD_ERROR',\r\n  PROCESSING_ERROR: 'PROCESSING_ERROR',\r\n  API_ERROR: 'API_ERROR',\r\n  NETWORK_ERROR: 'NETWORK_ERROR'\r\n};\r\n\r\n/**\r\n * Error codes for specific validation failures\r\n */\r\nexport const ERROR_CODES = {\r\n  INVALID_TYPE: 'INVALID_TYPE',\r\n  FILE_TOO_LARGE: 'FILE_TOO_LARGE',\r\n  FILE_CORRUPTED: 'FILE_CORRUPTED',\r\n  CANVAS_ERROR: 'CANVAS_ERROR',\r\n  IMAGE_LOAD_ERROR: 'IMAGE_LOAD_ERROR',\r\n  API_KEY_INVALID: 'API_KEY_INVALID',\r\n  API_QUOTA_EXCEEDED: 'API_QUOTA_EXCEEDED',\r\n  API_SERVICE_UNAVAILABLE: 'API_SERVICE_UNAVAILABLE',\r\n  API_BAD_REQUEST: 'API_BAD_REQUEST',\r\n  NETWORK_TIMEOUT: 'NETWORK_TIMEOUT',\r\n  NETWORK_OFFLINE: 'NETWORK_OFFLINE'\r\n};\r\n\r\n/**\r\n * User-friendly error messages\r\n */\r\nexport const ERROR_MESSAGES = {\r\n  [ERROR_CODES.INVALID_TYPE]: 'Êñá‰ª∂Á±ªÂûã‰∏çÊîØÊåÅÔºåËØ∑‰∏ä‰º† JPG„ÄÅPNG Êàñ WebP Ê†ºÂºèÁöÑÂõæÁâá',\r\n  [ERROR_CODES.FILE_TOO_LARGE]: 'Êñá‰ª∂Â§™Â§ßÔºåËØ∑‰∏ä‰º†Â∞è‰∫é 10MB ÁöÑÂõæÁâá',\r\n  [ERROR_CODES.FILE_CORRUPTED]: 'Êñá‰ª∂Â∑≤ÊçüÂùèÔºåËØ∑Â∞ùËØïÂÖ∂‰ªñÂõæÁâá',\r\n  [ERROR_CODES.CANVAS_ERROR]: 'ÂõæÁâáÂ§ÑÁêÜÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\r\n  [ERROR_CODES.IMAGE_LOAD_ERROR]: 'ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•ÔºåËØ∑ÈáçËØïÊàñÂ∞ùËØïÂÖ∂‰ªñÂõæÁâá',\r\n  [ERROR_CODES.API_KEY_INVALID]: 'APIÂØÜÈí•Êó†ÊïàÔºåËØ∑ËÅîÁ≥ªÁÆ°ÁêÜÂëò',\r\n  [ERROR_CODES.API_QUOTA_EXCEEDED]: 'APIÈÖçÈ¢ùÂ∑≤Áî®ÂÆåÔºåËØ∑ËÅîÁ≥ªÁÆ°ÁêÜÂëò',\r\n  [ERROR_CODES.API_SERVICE_UNAVAILABLE]: 'ÊúçÂä°ÊöÇÊó∂‰∏çÂèØÁî®ÔºåËØ∑Á®çÂêéÈáçËØï',\r\n  [ERROR_CODES.API_BAD_REQUEST]: 'Êó†Ê≥ïËØÜÂà´ÂõæÁâá‰∏≠ÁöÑTÊÅ§ÂõæÊ°àÔºåËØ∑Â∞ùËØïÊõ¥Ê∏ÖÊô∞ÁöÑÁÖßÁâá',\r\n  [ERROR_CODES.NETWORK_TIMEOUT]: 'ÁΩëÁªúËØ∑Ê±ÇË∂ÖÊó∂ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúÂêéÈáçËØï',\r\n  [ERROR_CODES.NETWORK_OFFLINE]: 'ÁΩëÁªúËøûÊé•Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúÂêéÈáçËØï'\r\n};\r\n\r\n// ============================================================================\r\n// Processing State Constants\r\n// ============================================================================\r\n\r\n/**\r\n * Processing status values\r\n */\r\nexport const PROCESSING_STATUS = {\r\n  IDLE: 'idle',\r\n  UPLOADING: 'uploading',\r\n  COMPRESSING: 'compressing',\r\n  REMOVING_BACKGROUND: 'removing-background',\r\n  RENDERING: 'rendering',\r\n  COMPLETE: 'complete',\r\n  ERROR: 'error'\r\n};\r\n\r\n// ============================================================================\r\n// Image Processing Constants\r\n// ============================================================================\r\n\r\n/**\r\n * Maximum image width for compression (in pixels)\r\n * Images wider than this will be compressed before API upload\r\n * Can be overridden by VUE_APP_COMPRESSION_THRESHOLD environment variable\r\n */\r\nexport const MAX_IMAGE_WIDTH = process.env.VUE_APP_COMPRESSION_THRESHOLD\r\n  ? parseInt(process.env.VUE_APP_COMPRESSION_THRESHOLD, 10)\r\n  : 2000;\r\n\r\n/**\r\n * Maximum image height for compression (in pixels)\r\n */\r\nexport const MAX_IMAGE_HEIGHT = process.env.VUE_APP_COMPRESSION_THRESHOLD\r\n  ? parseInt(process.env.VUE_APP_COMPRESSION_THRESHOLD, 10)\r\n  : 2000;\r\n\r\n/**\r\n * Maximum compressed width (in pixels)\r\n * Can be overridden by VUE_APP_MAX_COMPRESSED_WIDTH environment variable\r\n */\r\nexport const MAX_COMPRESSED_WIDTH = process.env.VUE_APP_MAX_COMPRESSED_WIDTH\r\n  ? parseInt(process.env.VUE_APP_MAX_COMPRESSED_WIDTH, 10)\r\n  : 1500;\r\n\r\n/**\r\n * Output image format for extracted designs\r\n */\r\nexport const OUTPUT_FORMAT = 'image/png';\r\n\r\n/**\r\n * JPEG quality for compression (0-1)\r\n */\r\nexport const JPEG_QUALITY = 0.9;\r\n\r\n/**\r\n * PNG quality for compression (0-1)\r\n */\r\nexport const PNG_QUALITY = 0.95;\r\n\r\n// ============================================================================\r\n// API Configuration Constants\r\n// ============================================================================\r\n\r\n/**\r\n * API retry configuration\r\n */\r\nexport const API_RETRY_CONFIG = {\r\n  MAX_ATTEMPTS: 3,\r\n  INITIAL_DELAY: 1000, // 1 second\r\n  BACKOFF_MULTIPLIER: 2 // Exponential backoff: 1s, 2s, 4s\r\n};\r\n\r\n/**\r\n * API timeout in milliseconds\r\n * Can be overridden by VUE_APP_API_TIMEOUT environment variable\r\n */\r\nexport const API_TIMEOUT = process.env.VUE_APP_API_TIMEOUT\r\n  ? parseInt(process.env.VUE_APP_API_TIMEOUT, 10)\r\n  : 30000; // 30 seconds\r\n\r\n/**\r\n * Remove.bg API endpoint\r\n * Can be overridden by VUE_APP_REMOVE_BG_API_ENDPOINT environment variable\r\n */\r\nexport const REMOVE_BG_API_ENDPOINT = process.env.VUE_APP_REMOVE_BG_API_ENDPOINT\r\n  || 'https://api.remove.bg/v1.0/removebg';\r\n\r\n/**\r\n * Remove.bg API key\r\n * Must be set via VUE_APP_REMOVE_BG_API_KEY environment variable\r\n */\r\nexport const REMOVE_BG_API_KEY = process.env.VUE_APP_REMOVE_BG_API_KEY || '';\r\n\r\n// ============================================================================\r\n// UI Constants\r\n// ============================================================================\r\n\r\n/**\r\n * Mobile breakpoint in pixels\r\n */\r\nexport const MOBILE_BREAKPOINT = 768;\r\n\r\n/**\r\n * Loading animation duration in milliseconds\r\n */\r\nexport const LOADING_ANIMATION_DURATION = 300;\r\n\r\n/**\r\n * Success message display duration in milliseconds\r\n * Can be overridden by VUE_APP_SUCCESS_MESSAGE_DURATION environment variable\r\n */\r\nexport const SUCCESS_MESSAGE_DURATION = process.env.VUE_APP_SUCCESS_MESSAGE_DURATION\r\n  ? parseInt(process.env.VUE_APP_SUCCESS_MESSAGE_DURATION, 10)\r\n  : 3000;\r\n\r\n/**\r\n * Error message display duration in milliseconds\r\n */\r\nexport const ERROR_MESSAGE_DURATION = 5000;\r\n\r\n/**\r\n * Debug mode flag\r\n * Can be enabled via VUE_APP_DEBUG environment variable\r\n */\r\nexport const DEBUG_MODE = process.env.VUE_APP_DEBUG === 'true';\r\n\r\n// ============================================================================\r\n// Pattern Extraction Constants\r\n// ============================================================================\r\n\r\n/**\r\n * Enable pattern extraction (crop to pattern bounds)\r\n * If true, only the pattern will be extracted (not the whole t-shirt)\r\n * If false, the whole t-shirt will be kept (background removed)\r\n */\r\nexport const ENABLE_PATTERN_EXTRACTION = process.env.VUE_APP_ENABLE_PATTERN_EXTRACTION !== 'false';\r\n\r\n/**\r\n * Pattern extraction padding in pixels\r\n * Adds padding around the detected pattern bounds\r\n */\r\nexport const PATTERN_PADDING = process.env.VUE_APP_PATTERN_PADDING\r\n  ? parseInt(process.env.VUE_APP_PATTERN_PADDING, 10)\r\n  : 20;\r\n\r\n// ============================================================================\r\n// Download Constants\r\n// ============================================================================\r\n\r\n/**\r\n * Default filename prefix for downloaded images\r\n */\r\nexport const DOWNLOAD_FILENAME_PREFIX = 'extracted-design';\r\n\r\n/**\r\n * Download file extension\r\n */\r\nexport const DOWNLOAD_FILE_EXTENSION = '.png';\r\n\r\n// ============================================================================\r\n// Cache Constants\r\n// ============================================================================\r\n\r\n/**\r\n * Maximum number of cached results\r\n */\r\nexport const MAX_CACHE_SIZE = 10;\r\n\r\n/**\r\n * Cache expiration time in milliseconds (1 hour)\r\n */\r\nexport const CACHE_EXPIRATION_TIME = 60 * 60 * 1000;\r\n\r\n// ============================================================================\r\n// Validation Rules Object\r\n// ============================================================================\r\n\r\n/**\r\n * Consolidated validation rules\r\n */\r\nexport const VALIDATION_RULES = {\r\n  maxFileSize: MAX_FILE_SIZE,\r\n  acceptedMimeTypes: ACCEPTED_MIME_TYPES,\r\n  acceptedExtensions: ACCEPTED_EXTENSIONS\r\n};\r\n\r\n// ============================================================================\r\n// HTTP Status Codes\r\n// ============================================================================\r\n\r\n/**\r\n * HTTP status codes for API error handling\r\n */\r\nexport const HTTP_STATUS = {\r\n  OK: 200,\r\n  BAD_REQUEST: 400,\r\n  UNAUTHORIZED: 401,\r\n  PAYMENT_REQUIRED: 402,\r\n  FORBIDDEN: 403,\r\n  NOT_FOUND: 404,\r\n  TOO_MANY_REQUESTS: 429,\r\n  INTERNAL_SERVER_ERROR: 500,\r\n  SERVICE_UNAVAILABLE: 503\r\n};\r\n\r\n// ============================================================================\r\n// Aspect Ratio Tolerance\r\n// ============================================================================\r\n\r\n/**\r\n * Tolerance for aspect ratio comparison (floating point precision)\r\n */\r\nexport const ASPECT_RATIO_TOLERANCE = 0.01;\r\n","/**\r\n * File Validation Utilities\r\n * \r\n * This module provides validation functions for file uploads.\r\n * It validates file types, sizes, and provides comprehensive file validation.\r\n * \r\n * Requirements: 1.2, 1.3, 1.4\r\n */\r\n\r\nimport {\r\n  ACCEPTED_MIME_TYPES,\r\n  ACCEPTED_EXTENSIONS,\r\n  MAX_FILE_SIZE,\r\n  ERROR_CODES,\r\n  ERROR_MESSAGES\r\n} from '@/constants';\r\n\r\n/**\r\n * Validation result structure\r\n * @typedef {Object} ValidationResult\r\n * @property {boolean} isValid - Whether the validation passed\r\n * @property {Object|null} error - Error details if validation failed\r\n * @property {string} error.code - Error code from ERROR_CODES\r\n * @property {string} error.message - User-friendly error message\r\n */\r\n\r\n/**\r\n * Validates if a file's MIME type is supported\r\n * \r\n * Accepts JPEG, PNG, and WebP image formats.\r\n * \r\n * @param {string} mimeType - The MIME type to validate (e.g., 'image/jpeg')\r\n * @returns {ValidationResult} Validation result with isValid flag and error details\r\n * \r\n * @example\r\n * validateFileType('image/jpeg') // { isValid: true, error: null }\r\n * validateFileType('image/gif')  // { isValid: false, error: { code: 'INVALID_TYPE', message: '...' } }\r\n */\r\nexport function validateFileType(mimeType) {\r\n  if (!mimeType || typeof mimeType !== 'string') {\r\n    return {\r\n      isValid: false,\r\n      error: {\r\n        code: ERROR_CODES.INVALID_TYPE,\r\n        message: ERROR_MESSAGES[ERROR_CODES.INVALID_TYPE]\r\n      }\r\n    };\r\n  }\r\n\r\n  const isValid = ACCEPTED_MIME_TYPES.includes(mimeType);\r\n\r\n  if (!isValid) {\r\n    return {\r\n      isValid: false,\r\n      error: {\r\n        code: ERROR_CODES.INVALID_TYPE,\r\n        message: ERROR_MESSAGES[ERROR_CODES.INVALID_TYPE]\r\n      }\r\n    };\r\n  }\r\n\r\n  return {\r\n    isValid: true,\r\n    error: null\r\n  };\r\n}\r\n\r\n/**\r\n * Validates if a file's size is within the allowed limit\r\n * \r\n * The maximum allowed file size is 10MB (10 * 1024 * 1024 bytes).\r\n * \r\n * @param {number} fileSize - The file size in bytes\r\n * @param {number} [maxSize=MAX_FILE_SIZE] - Maximum allowed file size in bytes (default: 10MB)\r\n * @returns {ValidationResult} Validation result with isValid flag and error details\r\n * \r\n * @example\r\n * validateFileSize(5000000)    // { isValid: true, error: null }\r\n * validateFileSize(15000000)   // { isValid: false, error: { code: 'FILE_TOO_LARGE', message: '...' } }\r\n */\r\nexport function validateFileSize(fileSize, maxSize = MAX_FILE_SIZE) {\r\n  if (typeof fileSize !== 'number' || fileSize < 0) {\r\n    return {\r\n      isValid: false,\r\n      error: {\r\n        code: ERROR_CODES.FILE_TOO_LARGE,\r\n        message: ERROR_MESSAGES[ERROR_CODES.FILE_TOO_LARGE]\r\n      }\r\n    };\r\n  }\r\n\r\n  const isValid = fileSize <= maxSize;\r\n\r\n  if (!isValid) {\r\n    return {\r\n      isValid: false,\r\n      error: {\r\n        code: ERROR_CODES.FILE_TOO_LARGE,\r\n        message: ERROR_MESSAGES[ERROR_CODES.FILE_TOO_LARGE]\r\n      }\r\n    };\r\n  }\r\n\r\n  return {\r\n    isValid: true,\r\n    error: null\r\n  };\r\n}\r\n\r\n/**\r\n * Performs comprehensive validation on a file\r\n * \r\n * Validates both file type and file size. Returns the first validation error encountered.\r\n * \r\n * @param {File} file - The File object to validate\r\n * @returns {ValidationResult} Validation result with isValid flag and error details\r\n * \r\n * @example\r\n * const file = new File(['content'], 'image.jpg', { type: 'image/jpeg' });\r\n * validateFile(file) // { isValid: true, error: null }\r\n * \r\n * const invalidFile = new File(['content'], 'doc.pdf', { type: 'application/pdf' });\r\n * validateFile(invalidFile) // { isValid: false, error: { code: 'INVALID_TYPE', message: '...' } }\r\n */\r\nexport function validateFile(file) {\r\n  // Check if file is provided and is a valid File object\r\n  if (!file || !(file instanceof File)) {\r\n    return {\r\n      isValid: false,\r\n      error: {\r\n        code: ERROR_CODES.INVALID_TYPE,\r\n        message: ERROR_MESSAGES[ERROR_CODES.INVALID_TYPE]\r\n      }\r\n    };\r\n  }\r\n\r\n  // Validate file type first\r\n  const typeValidation = validateFileType(file.type);\r\n  if (!typeValidation.isValid) {\r\n    return typeValidation;\r\n  }\r\n\r\n  // Validate file size\r\n  const sizeValidation = validateFileSize(file.size);\r\n  if (!sizeValidation.isValid) {\r\n    return sizeValidation;\r\n  }\r\n\r\n  // Additional validation: check file extension\r\n  const fileName = file.name || '';\r\n  const hasValidExtension = ACCEPTED_EXTENSIONS.some(ext => \r\n    fileName.toLowerCase().endsWith(ext)\r\n  );\r\n\r\n  if (!hasValidExtension) {\r\n    return {\r\n      isValid: false,\r\n      error: {\r\n        code: ERROR_CODES.INVALID_TYPE,\r\n        message: ERROR_MESSAGES[ERROR_CODES.INVALID_TYPE]\r\n      }\r\n    };\r\n  }\r\n\r\n  // All validations passed\r\n  return {\r\n    isValid: true,\r\n    error: null\r\n  };\r\n}\r\n","<!--\r\n  ImageUploader Component\r\n  \r\n  Handles user image uploads with drag-and-drop support, file validation,\r\n  and preview display.\r\n  \r\n  Requirements: 1.1, 1.2, 1.3, 1.4, 1.5\r\n-->\r\n\r\n<template>\r\n  <div class=\"image-uploader\">\r\n    <div\r\n      class=\"upload-area\"\r\n      :class=\"{ 'drag-over': isDragOver, 'has-preview': previewUrl }\"\r\n      @drop.prevent=\"handleDrop\"\r\n      @dragover.prevent=\"handleDragOver\"\r\n      @dragleave.prevent=\"handleDragLeave\"\r\n      @click=\"triggerFileInput\"\r\n    >\r\n      <!-- File Input (Hidden) -->\r\n      <input\r\n        ref=\"fileInput\"\r\n        type=\"file\"\r\n        :accept=\"acceptedFormats.join(',')\"\r\n        @change=\"handleFileSelect\"\r\n        class=\"file-input\"\r\n        aria-label=\"ÈÄâÊã©ÂõæÁâáÊñá‰ª∂\"\r\n      />\r\n\r\n      <!-- Upload Prompt (shown when no preview) -->\r\n      <div v-if=\"!previewUrl\" class=\"upload-prompt\">\r\n        <div class=\"upload-icon\">üìÅ</div>\r\n        <p class=\"upload-text\">\r\n          <strong>ÁÇπÂáª‰∏ä‰º†</strong> ÊàñÊãñÊîæÂõæÁâáÂà∞Ê≠§Â§Ñ\r\n        </p>\r\n        <p class=\"upload-hint\">\r\n          ÊîØÊåÅ JPG„ÄÅPNG„ÄÅWebP Ê†ºÂºèÔºåÊúÄÂ§ß 10MB\r\n        </p>\r\n      </div>\r\n\r\n      <!-- Preview (shown when image is uploaded) -->\r\n      <div v-else class=\"preview-container\">\r\n        <img\r\n          :src=\"previewUrl\"\r\n          alt=\"‰∏ä‰º†ÁöÑÂõæÁâáÈ¢ÑËßà\"\r\n          class=\"preview-image\"\r\n        />\r\n        <button\r\n          @click.stop=\"clearImage\"\r\n          class=\"clear-button\"\r\n          aria-label=\"Ê∏ÖÈô§ÂõæÁâá\"\r\n          title=\"Ê∏ÖÈô§ÂõæÁâá\"\r\n        >\r\n          ‚úï\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Error Message -->\r\n    <div v-if=\"errorMessage\" class=\"error-message\" role=\"alert\">\r\n      <span class=\"error-icon\">‚ö†Ô∏è</span>\r\n      <span class=\"error-text\">{{ errorMessage }}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { validateFile } from '@/utils/validation';\r\nimport { ACCEPTED_MIME_TYPES } from '@/constants';\r\n\r\nexport default {\r\n  name: 'ImageUploader',\r\n\r\n  props: {\r\n    /**\r\n     * Maximum allowed file size in bytes\r\n     */\r\n    maxFileSize: {\r\n      type: Number,\r\n      default: 10 * 1024 * 1024 // 10MB\r\n    },\r\n\r\n    /**\r\n     * Accepted image MIME types\r\n     */\r\n    acceptedFormats: {\r\n      type: Array,\r\n      default: () => ACCEPTED_MIME_TYPES\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      isDragOver: false,\r\n      previewUrl: null,\r\n      errorMessage: null,\r\n      currentFile: null\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * Triggers the hidden file input click\r\n     */\r\n    triggerFileInput() {\r\n      if (this.previewUrl) {\r\n        // Don't trigger file input if preview is shown\r\n        return;\r\n      }\r\n      this.$refs.fileInput.click();\r\n    },\r\n\r\n    /**\r\n     * Handles file selection from file input\r\n     * @param {Event} event - The change event from file input\r\n     */\r\n    handleFileSelect(event) {\r\n      const files = event.target.files;\r\n      if (files && files.length > 0) {\r\n        this.processFile(files[0]);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Handles drag over event\r\n     */\r\n    handleDragOver() {\r\n      this.isDragOver = true;\r\n    },\r\n\r\n    /**\r\n     * Handles drag leave event\r\n     */\r\n    handleDragLeave() {\r\n      this.isDragOver = false;\r\n    },\r\n\r\n    /**\r\n     * Handles file drop event\r\n     * @param {DragEvent} event - The drop event\r\n     */\r\n    handleDrop(event) {\r\n      this.isDragOver = false;\r\n\r\n      const files = event.dataTransfer.files;\r\n      if (files && files.length > 0) {\r\n        this.processFile(files[0]);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Validates and processes the selected file\r\n     * @param {File} file - The file to process\r\n     */\r\n    processFile(file) {\r\n      // Clear previous error\r\n      this.errorMessage = null;\r\n\r\n      // Validate file\r\n      const validation = validateFile(file);\r\n\r\n      if (!validation.isValid) {\r\n        // Show error and emit error event\r\n        this.errorMessage = validation.error.message;\r\n        this.$emit('upload-error', validation.error);\r\n        return;\r\n      }\r\n\r\n      // Store current file\r\n      this.currentFile = file;\r\n\r\n      // Generate preview\r\n      this.generatePreview(file);\r\n    },\r\n\r\n    /**\r\n     * Generates a preview DataURL for the file\r\n     * @param {File} file - The file to preview\r\n     */\r\n    generatePreview(file) {\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = (e) => {\r\n        this.previewUrl = e.target.result;\r\n        // Emit image-selected event with file and dataUrl\r\n        this.$emit('image-selected', file, e.target.result);\r\n      };\r\n\r\n      reader.onerror = () => {\r\n        this.errorMessage = 'ÂõæÁâáÈ¢ÑËßàÁîüÊàêÂ§±Ë¥•ÔºåËØ∑ÈáçËØï';\r\n        this.$emit('upload-error', {\r\n          code: 'PREVIEW_ERROR',\r\n          message: 'ÂõæÁâáÈ¢ÑËßàÁîüÊàêÂ§±Ë¥•ÔºåËØ∑ÈáçËØï'\r\n        });\r\n      };\r\n\r\n      reader.readAsDataURL(file);\r\n    },\r\n\r\n    /**\r\n     * Clears the current image and resets the component\r\n     */\r\n    clearImage() {\r\n      this.previewUrl = null;\r\n      this.currentFile = null;\r\n      this.errorMessage = null;\r\n      this.$refs.fileInput.value = '';\r\n      this.$emit('image-cleared');\r\n    },\r\n\r\n    /**\r\n     * Public method to reset the uploader\r\n     */\r\n    reset() {\r\n      this.clearImage();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.image-uploader {\r\n  width: 100%;\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.upload-area {\r\n  position: relative;\r\n  border: 2px dashed #cbd5e0;\r\n  border-radius: 8px;\r\n  padding: 40px 20px;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  background-color: #f7fafc;\r\n  min-height: 300px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.upload-area:hover {\r\n  border-color: #4299e1;\r\n  background-color: #ebf8ff;\r\n}\r\n\r\n.upload-area.drag-over {\r\n  border-color: #3182ce;\r\n  background-color: #bee3f8;\r\n  transform: scale(1.02);\r\n}\r\n\r\n.upload-area.has-preview {\r\n  cursor: default;\r\n  padding: 20px;\r\n  min-height: auto;\r\n}\r\n\r\n.upload-area.has-preview:hover {\r\n  border-color: #cbd5e0;\r\n  background-color: #f7fafc;\r\n}\r\n\r\n.file-input {\r\n  display: none;\r\n}\r\n\r\n.upload-prompt {\r\n  pointer-events: none;\r\n}\r\n\r\n.upload-icon {\r\n  font-size: 64px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.upload-text {\r\n  font-size: 18px;\r\n  color: #2d3748;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.upload-text strong {\r\n  color: #4299e1;\r\n}\r\n\r\n.upload-hint {\r\n  font-size: 14px;\r\n  color: #718096;\r\n  margin: 0;\r\n}\r\n\r\n.preview-container {\r\n  position: relative;\r\n  width: 100%;\r\n  max-width: 100%;\r\n}\r\n\r\n.preview-image {\r\n  max-width: 100%;\r\n  max-height: 400px;\r\n  height: auto;\r\n  border-radius: 4px;\r\n  display: block;\r\n  margin: 0 auto;\r\n  object-fit: contain;\r\n}\r\n\r\n.clear-button {\r\n  position: absolute;\r\n  top: -10px;\r\n  right: -10px;\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 50%;\r\n  background-color: #e53e3e;\r\n  color: white;\r\n  border: 2px solid white;\r\n  font-size: 18px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s ease;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.clear-button:hover {\r\n  background-color: #c53030;\r\n  transform: scale(1.1);\r\n}\r\n\r\n.clear-button:active {\r\n  transform: scale(0.95);\r\n}\r\n\r\n.error-message {\r\n  margin-top: 16px;\r\n  padding: 12px 16px;\r\n  background-color: #fff5f5;\r\n  border: 1px solid #fc8181;\r\n  border-radius: 4px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.error-icon {\r\n  font-size: 20px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.error-text {\r\n  color: #c53030;\r\n  font-size: 14px;\r\n  text-align: left;\r\n}\r\n\r\n/* Mobile Responsive */\r\n@media (max-width: 768px) {\r\n  .upload-area {\r\n    padding: 30px 15px;\r\n    min-height: 250px;\r\n  }\r\n\r\n  .upload-icon {\r\n    font-size: 48px;\r\n  }\r\n\r\n  .upload-text {\r\n    font-size: 16px;\r\n  }\r\n\r\n  .upload-hint {\r\n    font-size: 13px;\r\n  }\r\n\r\n  .preview-image {\r\n    max-height: 300px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImageUploader.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImageUploader.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ImageUploader.vue?vue&type=template&id=67961622&scoped=true\"\nimport script from \"./ImageUploader.vue?vue&type=script&lang=js\"\nexport * from \"./ImageUploader.vue?vue&type=script&lang=js\"\nimport style0 from \"./ImageUploader.vue?vue&type=style&index=0&id=67961622&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"67961622\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"image-processor\"},[(!_vm.isProcessing && !_vm.hasResult)?_c('button',{staticClass:\"process-button\",class:{ disabled: !_vm.canProcess },attrs:{\"disabled\":!_vm.canProcess,\"data-test\":\"process-button\"},on:{\"click\":_vm.handleProcess}},[_c('span',{staticClass:\"button-icon\"},[_vm._v(\"üé®\")]),_c('span',{staticClass:\"button-text\"},[_vm._v(\"ÊèêÂèñÂõæÊ°à\")])]):_vm._e(),(_vm.isProcessing)?_c('div',{staticClass:\"loading-container\"},[_c('div',{staticClass:\"loading-spinner\"}),_c('p',{staticClass:\"loading-text\"},[_vm._v(_vm._s(_vm.loadingMessage))]),(_vm.showProgress)?_c('div',{staticClass:\"progress-bar\"},[_c('div',{staticClass:\"progress-fill\",style:({ width: _vm.progress + '%' })})]):_vm._e(),(_vm.showProgress)?_c('p',{staticClass:\"progress-text\"},[_vm._v(_vm._s(_vm.progress)+\"%\")]):_vm._e()]):_vm._e(),(_vm.hasResult && !_vm.error)?_c('div',{staticClass:\"success-container\"},[_c('div',{staticClass:\"success-icon\"},[_vm._v(\"‚úì\")]),_c('p',{staticClass:\"success-text\"},[_vm._v(\"ÂõæÊ°àÊèêÂèñÊàêÂäüÔºÅ\")]),_c('button',{staticClass:\"reset-button\",on:{\"click\":_vm.handleReset}},[_c('span',{staticClass:\"button-icon\"},[_vm._v(\"üîÑ\")]),_c('span',{staticClass:\"button-text\"},[_vm._v(\"ÈáçÊñ∞Â§ÑÁêÜ\")])])]):_vm._e(),(_vm.error)?_c('div',{staticClass:\"error-container\",attrs:{\"role\":\"alert\"}},[_c('div',{staticClass:\"error-icon\"},[_vm._v(\"‚ö†Ô∏è\")]),_c('p',{staticClass:\"error-title\"},[_vm._v(\"Â§ÑÁêÜÂ§±Ë¥•\")]),_c('p',{staticClass:\"error-message\"},[_vm._v(_vm._s(_vm.error.message))]),_c('div',{staticClass:\"error-actions\"},[(_vm.error.retryable)?_c('button',{staticClass:\"retry-button\",on:{\"click\":_vm.handleRetry}},[_c('span',{staticClass:\"button-icon\"},[_vm._v(\"üîÑ\")]),_c('span',{staticClass:\"button-text\"},[_vm._v(\"ÈáçËØï\")])]):_vm._e(),_c('button',{staticClass:\"reset-button\",on:{\"click\":_vm.handleReset}},[_c('span',{staticClass:\"button-icon\"},[_vm._v(\"‚Ü∫\")]),_c('span',{staticClass:\"button-text\"},[_vm._v(\"ÈáçÊñ∞ÂºÄÂßã\")])])])]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n  ImageProcessor Component\r\n  \r\n  Displays processing controls, loading states, progress indicators,\r\n  and error messages for image processing operations.\r\n  \r\n  Requirements: 2.4, 2.5, 5.1, 5.4\r\n-->\r\n\r\n<template>\r\n  <div class=\"image-processor\">\r\n    <!-- Process Button -->\r\n    <button\r\n      v-if=\"!isProcessing && !hasResult\"\r\n      @click=\"handleProcess\"\r\n      :disabled=\"!canProcess\"\r\n      class=\"process-button\"\r\n      :class=\"{ disabled: !canProcess }\"\r\n      data-test=\"process-button\"\r\n    >\r\n      <span class=\"button-icon\">üé®</span>\r\n      <span class=\"button-text\">ÊèêÂèñÂõæÊ°à</span>\r\n    </button>\r\n\r\n    <!-- Loading State -->\r\n    <div v-if=\"isProcessing\" class=\"loading-container\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <p class=\"loading-text\">{{ loadingMessage }}</p>\r\n      <div v-if=\"showProgress\" class=\"progress-bar\">\r\n        <div\r\n          class=\"progress-fill\"\r\n          :style=\"{ width: progress + '%' }\"\r\n        ></div>\r\n      </div>\r\n      <p v-if=\"showProgress\" class=\"progress-text\">{{ progress }}%</p>\r\n    </div>\r\n\r\n    <!-- Success State -->\r\n    <div v-if=\"hasResult && !error\" class=\"success-container\">\r\n      <div class=\"success-icon\">‚úì</div>\r\n      <p class=\"success-text\">ÂõæÊ°àÊèêÂèñÊàêÂäüÔºÅ</p>\r\n      <button\r\n        @click=\"handleReset\"\r\n        class=\"reset-button\"\r\n      >\r\n        <span class=\"button-icon\">üîÑ</span>\r\n        <span class=\"button-text\">ÈáçÊñ∞Â§ÑÁêÜ</span>\r\n      </button>\r\n    </div>\r\n\r\n    <!-- Error State -->\r\n    <div v-if=\"error\" class=\"error-container\" role=\"alert\">\r\n      <div class=\"error-icon\">‚ö†Ô∏è</div>\r\n      <p class=\"error-title\">Â§ÑÁêÜÂ§±Ë¥•</p>\r\n      <p class=\"error-message\">{{ error.message }}</p>\r\n      <div class=\"error-actions\">\r\n        <button\r\n          v-if=\"error.retryable\"\r\n          @click=\"handleRetry\"\r\n          class=\"retry-button\"\r\n        >\r\n          <span class=\"button-icon\">üîÑ</span>\r\n          <span class=\"button-text\">ÈáçËØï</span>\r\n        </button>\r\n        <button\r\n          @click=\"handleReset\"\r\n          class=\"reset-button\"\r\n        >\r\n          <span class=\"button-icon\">‚Ü∫</span>\r\n          <span class=\"button-text\">ÈáçÊñ∞ÂºÄÂßã</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { PROCESSING_STATUS } from '@/constants';\r\n\r\nexport default {\r\n  name: 'ImageProcessor',\r\n\r\n  props: {\r\n    /**\r\n     * Whether processing is currently in progress\r\n     */\r\n    isProcessing: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n\r\n    /**\r\n     * Whether the image can be processed (e.g., image is uploaded)\r\n     */\r\n    canProcess: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n\r\n    /**\r\n     * Whether processing has completed successfully\r\n     */\r\n    hasResult: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n\r\n    /**\r\n     * Current processing status\r\n     */\r\n    status: {\r\n      type: String,\r\n      default: PROCESSING_STATUS.IDLE,\r\n      validator: (value) => {\r\n        return Object.values(PROCESSING_STATUS).includes(value);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Processing progress (0-100)\r\n     */\r\n    progress: {\r\n      type: Number,\r\n      default: 0,\r\n      validator: (value) => {\r\n        return value >= 0 && value <= 100;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Error object if processing failed\r\n     */\r\n    error: {\r\n      type: [Object, null],\r\n      default: null,\r\n      validator: (value) => {\r\n        if (value === null || value === undefined) return true;\r\n        // Accept plain objects with message and retryable properties\r\n        return (\r\n          value &&\r\n          typeof value === 'object' &&\r\n          typeof value.message === 'string' &&\r\n          typeof value.retryable === 'boolean'\r\n        );\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Function to call when process button is clicked\r\n     */\r\n    onProcess: {\r\n      type: Function,\r\n      default: null\r\n    },\r\n\r\n    /**\r\n     * Function to call when retry button is clicked\r\n     */\r\n    onRetry: {\r\n      type: Function,\r\n      default: null\r\n    },\r\n\r\n    /**\r\n     * Function to call when reset button is clicked\r\n     */\r\n    onReset: {\r\n      type: Function,\r\n      default: null\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    /**\r\n     * Returns the appropriate loading message based on status\r\n     */\r\n    loadingMessage() {\r\n      switch (this.status) {\r\n        case PROCESSING_STATUS.UPLOADING:\r\n          return 'Ê≠£Âú®‰∏ä‰º†ÂõæÁâá...';\r\n        case PROCESSING_STATUS.COMPRESSING:\r\n          return 'Ê≠£Âú®ÂéãÁº©ÂõæÁâá...';\r\n        case PROCESSING_STATUS.REMOVING_BACKGROUND:\r\n          return 'Ê≠£Âú®ÊèêÂèñÂõæÊ°à...';\r\n        case PROCESSING_STATUS.RENDERING:\r\n          return 'Ê≠£Âú®Ê∏≤ÊüìÁªìÊûú...';\r\n        default:\r\n          return 'Ê≠£Âú®Â§ÑÁêÜ...';\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Whether to show progress bar\r\n     */\r\n    showProgress() {\r\n      return (\r\n        this.status === PROCESSING_STATUS.REMOVING_BACKGROUND ||\r\n        this.status === PROCESSING_STATUS.UPLOADING\r\n      );\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * Handles process button click\r\n     */\r\n    handleProcess() {\r\n      if (this.onProcess) {\r\n        this.onProcess();\r\n      } else {\r\n        this.$emit('process');\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Handles retry button click\r\n     */\r\n    handleRetry() {\r\n      if (this.onRetry) {\r\n        this.onRetry();\r\n      } else {\r\n        this.$emit('retry');\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Handles reset button click\r\n     */\r\n    handleReset() {\r\n      if (this.onReset) {\r\n        this.onReset();\r\n      } else {\r\n        this.$emit('reset');\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.image-processor {\r\n  width: 100%;\r\n  max-width: 600px;\r\n  margin: 20px auto;\r\n  padding: 20px;\r\n}\r\n\r\n/* Process Button */\r\n.process-button {\r\n  width: 100%;\r\n  padding: 16px 24px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 8px;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 12px;\r\n  transition: all 0.3s ease;\r\n  box-shadow: 0 4px 6px rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n.process-button:hover:not(.disabled) {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 6px 12px rgba(102, 126, 234, 0.4);\r\n}\r\n\r\n.process-button:active:not(.disabled) {\r\n  transform: translateY(0);\r\n}\r\n\r\n.process-button.disabled {\r\n  background: #cbd5e0;\r\n  cursor: not-allowed;\r\n  box-shadow: none;\r\n}\r\n\r\n.button-icon {\r\n  font-size: 24px;\r\n}\r\n\r\n.button-text {\r\n  font-size: 18px;\r\n}\r\n\r\n/* Loading State */\r\n.loading-container {\r\n  text-align: center;\r\n  padding: 40px 20px;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 60px;\r\n  height: 60px;\r\n  border: 4px solid #e2e8f0;\r\n  border-top-color: #667eea;\r\n  border-radius: 50%;\r\n  margin: 0 auto 20px;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.loading-text {\r\n  font-size: 16px;\r\n  color: #4a5568;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.progress-bar {\r\n  width: 100%;\r\n  height: 8px;\r\n  background-color: #e2e8f0;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.progress-fill {\r\n  height: 100%;\r\n  background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);\r\n  transition: width 0.3s ease;\r\n  border-radius: 4px;\r\n}\r\n\r\n.progress-text {\r\n  font-size: 14px;\r\n  color: #718096;\r\n  font-weight: 600;\r\n}\r\n\r\n/* Success State */\r\n.success-container {\r\n  text-align: center;\r\n  padding: 30px 20px;\r\n  background-color: #f0fff4;\r\n  border: 2px solid #9ae6b4;\r\n  border-radius: 8px;\r\n}\r\n\r\n.success-icon {\r\n  width: 60px;\r\n  height: 60px;\r\n  background-color: #48bb78;\r\n  color: white;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 36px;\r\n  margin: 0 auto 16px;\r\n  animation: scaleIn 0.3s ease;\r\n}\r\n\r\n@keyframes scaleIn {\r\n  from {\r\n    transform: scale(0);\r\n  }\r\n  to {\r\n    transform: scale(1);\r\n  }\r\n}\r\n\r\n.success-text {\r\n  font-size: 18px;\r\n  color: #22543d;\r\n  font-weight: 600;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n/* Error State */\r\n.error-container {\r\n  text-align: center;\r\n  padding: 30px 20px;\r\n  background-color: #fff5f5;\r\n  border: 2px solid #fc8181;\r\n  border-radius: 8px;\r\n}\r\n\r\n.error-icon {\r\n  font-size: 48px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.error-title {\r\n  font-size: 20px;\r\n  color: #c53030;\r\n  font-weight: 600;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.error-message {\r\n  font-size: 16px;\r\n  color: #742a2a;\r\n  margin-bottom: 24px;\r\n  line-height: 1.5;\r\n}\r\n\r\n.error-actions {\r\n  display: flex;\r\n  gap: 12px;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n/* Retry Button */\r\n.retry-button {\r\n  padding: 12px 24px;\r\n  background-color: #4299e1;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.retry-button:hover {\r\n  background-color: #3182ce;\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.retry-button:active {\r\n  transform: translateY(0);\r\n}\r\n\r\n/* Reset Button */\r\n.reset-button {\r\n  padding: 12px 24px;\r\n  background-color: #718096;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.reset-button:hover {\r\n  background-color: #4a5568;\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.reset-button:active {\r\n  transform: translateY(0);\r\n}\r\n\r\n/* Mobile Responsive */\r\n@media (max-width: 768px) {\r\n  .image-processor {\r\n    padding: 15px;\r\n  }\r\n\r\n  .process-button {\r\n    padding: 14px 20px;\r\n    font-size: 16px;\r\n  }\r\n\r\n  .button-icon {\r\n    font-size: 20px;\r\n  }\r\n\r\n  .button-text {\r\n    font-size: 16px;\r\n  }\r\n\r\n  .loading-spinner {\r\n    width: 50px;\r\n    height: 50px;\r\n  }\r\n\r\n  .success-icon {\r\n    width: 50px;\r\n    height: 50px;\r\n    font-size: 30px;\r\n  }\r\n\r\n  .error-actions {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .retry-button,\r\n  .reset-button {\r\n    width: 100%;\r\n    justify-content: center;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImageProcessor.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImageProcessor.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ImageProcessor.vue?vue&type=template&id=5e76e8fb&scoped=true\"\nimport script from \"./ImageProcessor.vue?vue&type=script&lang=js\"\nexport * from \"./ImageProcessor.vue?vue&type=script&lang=js\"\nimport style0 from \"./ImageProcessor.vue?vue&type=style&index=0&id=5e76e8fb&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5e76e8fb\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.originalImage || _vm.extractedImage)?_c('div',{staticClass:\"image-comparison\"},[_c('h2',{staticClass:\"comparison-title\"},[_vm._v(\"ÂõæÁâáÂØπÊØî\")]),_c('div',{staticClass:\"comparison-container\",class:{ 'mobile-layout': _vm.isMobile }},[(_vm.originalImage)?_c('div',{staticClass:\"image-panel\"},[_c('h3',{staticClass:\"panel-title\"},[_vm._v(\"ÂéüÂßãÂõæÁâá\")]),_c('div',{staticClass:\"image-wrapper\"},[_c('img',{staticClass:\"comparison-image\",attrs:{\"src\":_vm.originalImage,\"alt\":\"ÂéüÂßãTÊÅ§ÂõæÁâá\"},on:{\"load\":_vm.handleImageLoad}})])]):_vm._e(),(_vm.extractedImage)?_c('div',{staticClass:\"image-panel\"},[_c('h3',{staticClass:\"panel-title\"},[_vm._v(\"ÊèêÂèñÁöÑÂõæÊ°à\")]),_c('div',{staticClass:\"image-wrapper with-transparency-grid\"},[_c('div',{staticClass:\"transparency-grid\"}),_c('img',{staticClass:\"comparison-image extracted\",attrs:{\"src\":_vm.extractedImage,\"alt\":\"ÊèêÂèñÁöÑÂõæÊ°àËÆæËÆ°\"},on:{\"load\":_vm.handleImageLoad}})]),_c('p',{staticClass:\"panel-hint\"},[_vm._v(\"‚úì ËÉåÊôØÂ∑≤ÁßªÈô§ÔºàÈÄèÊòéÔºâ\")])]):_vm._e()])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n  ImageComparison Component\r\n  \r\n  Displays original and extracted images side-by-side with responsive layout.\r\n  Shows transparency grid for extracted images.\r\n  \r\n  Requirements: 3.1, 3.2, 3.3, 3.4, 7.3\r\n-->\r\n\r\n<template>\r\n  <div class=\"image-comparison\" v-if=\"originalImage || extractedImage\">\r\n    <h2 class=\"comparison-title\">ÂõæÁâáÂØπÊØî</h2>\r\n    \r\n    <div class=\"comparison-container\" :class=\"{ 'mobile-layout': isMobile }\">\r\n      <!-- Original Image -->\r\n      <div v-if=\"originalImage\" class=\"image-panel\">\r\n        <h3 class=\"panel-title\">ÂéüÂßãÂõæÁâá</h3>\r\n        <div class=\"image-wrapper\">\r\n          <img\r\n            :src=\"originalImage\"\r\n            alt=\"ÂéüÂßãTÊÅ§ÂõæÁâá\"\r\n            class=\"comparison-image\"\r\n            @load=\"handleImageLoad\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Extracted Image -->\r\n      <div v-if=\"extractedImage\" class=\"image-panel\">\r\n        <h3 class=\"panel-title\">ÊèêÂèñÁöÑÂõæÊ°à</h3>\r\n        <div class=\"image-wrapper with-transparency-grid\">\r\n          <div class=\"transparency-grid\"></div>\r\n          <img\r\n            :src=\"extractedImage\"\r\n            alt=\"ÊèêÂèñÁöÑÂõæÊ°àËÆæËÆ°\"\r\n            class=\"comparison-image extracted\"\r\n            @load=\"handleImageLoad\"\r\n          />\r\n        </div>\r\n        <p class=\"panel-hint\">‚úì ËÉåÊôØÂ∑≤ÁßªÈô§ÔºàÈÄèÊòéÔºâ</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { MOBILE_BREAKPOINT } from '@/constants';\r\n\r\nexport default {\r\n  name: 'ImageComparison',\r\n\r\n  props: {\r\n    /**\r\n     * Original image data URL\r\n     */\r\n    originalImage: {\r\n      type: String,\r\n      default: null\r\n    },\r\n\r\n    /**\r\n     * Extracted image data URL (with transparent background)\r\n     */\r\n    extractedImage: {\r\n      type: String,\r\n      default: null\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      isMobile: false\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.checkMobileLayout();\r\n    window.addEventListener('resize', this.checkMobileLayout);\r\n  },\r\n\r\n  beforeDestroy() {\r\n    window.removeEventListener('resize', this.checkMobileLayout);\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * Checks if the current viewport is mobile size\r\n     */\r\n    checkMobileLayout() {\r\n      this.isMobile = window.innerWidth < MOBILE_BREAKPOINT;\r\n    },\r\n\r\n    /**\r\n     * Handles image load event\r\n     */\r\n    handleImageLoad() {\r\n      this.$emit('image-loaded');\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.image-comparison {\r\n  width: 100%;\r\n  max-width: 1200px;\r\n  margin: 40px auto;\r\n  padding: 0 20px;\r\n}\r\n\r\n.comparison-title {\r\n  font-size: 28px;\r\n  font-weight: 700;\r\n  color: #2d3748;\r\n  text-align: center;\r\n  margin-bottom: 32px;\r\n}\r\n\r\n.comparison-container {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 32px;\r\n  align-items: start;\r\n}\r\n\r\n.comparison-container.mobile-layout {\r\n  grid-template-columns: 1fr;\r\n  gap: 24px;\r\n}\r\n\r\n.image-panel {\r\n  background-color: #ffffff;\r\n  border-radius: 12px;\r\n  padding: 24px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\r\n}\r\n\r\n.image-panel:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.panel-title {\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  color: #4a5568;\r\n  margin-bottom: 16px;\r\n  text-align: center;\r\n}\r\n\r\n.image-wrapper {\r\n  position: relative;\r\n  width: 100%;\r\n  min-height: 200px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: #f7fafc;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n}\r\n\r\n.image-wrapper.with-transparency-grid {\r\n  background-color: transparent;\r\n}\r\n\r\n/* Transparency Grid (Checkerboard Pattern) */\r\n.transparency-grid {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-image: \r\n    linear-gradient(45deg, #e2e8f0 25%, transparent 25%),\r\n    linear-gradient(-45deg, #e2e8f0 25%, transparent 25%),\r\n    linear-gradient(45deg, transparent 75%, #e2e8f0 75%),\r\n    linear-gradient(-45deg, transparent 75%, #e2e8f0 75%);\r\n  background-size: 20px 20px;\r\n  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\r\n  z-index: 0;\r\n}\r\n\r\n.comparison-image {\r\n  position: relative;\r\n  max-width: 100%;\r\n  max-height: 500px;\r\n  height: auto;\r\n  width: auto;\r\n  display: block;\r\n  margin: 0 auto;\r\n  object-fit: contain;\r\n  z-index: 1;\r\n  border-radius: 4px;\r\n}\r\n\r\n.comparison-image.extracted {\r\n  /* Ensure extracted image is above the transparency grid */\r\n  position: relative;\r\n  z-index: 2;\r\n}\r\n\r\n.panel-hint {\r\n  margin-top: 12px;\r\n  font-size: 14px;\r\n  color: #48bb78;\r\n  text-align: center;\r\n  font-weight: 500;\r\n}\r\n\r\n/* Mobile Responsive */\r\n@media (max-width: 768px) {\r\n  .image-comparison {\r\n    margin: 30px auto;\r\n    padding: 0 15px;\r\n  }\r\n\r\n  .comparison-title {\r\n    font-size: 24px;\r\n    margin-bottom: 24px;\r\n  }\r\n\r\n  .image-panel {\r\n    padding: 20px;\r\n  }\r\n\r\n  .panel-title {\r\n    font-size: 18px;\r\n    margin-bottom: 12px;\r\n  }\r\n\r\n  .comparison-image {\r\n    max-height: 350px;\r\n  }\r\n\r\n  .transparency-grid {\r\n    background-size: 15px 15px;\r\n    background-position: 0 0, 0 7.5px, 7.5px -7.5px, -7.5px 0px;\r\n  }\r\n}\r\n\r\n/* Tablet Responsive */\r\n@media (max-width: 1024px) and (min-width: 769px) {\r\n  .comparison-container {\r\n    gap: 24px;\r\n  }\r\n\r\n  .comparison-image {\r\n    max-height: 400px;\r\n  }\r\n}\r\n\r\n/* Animation for image load */\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n    transform: scale(0.95);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: scale(1);\r\n  }\r\n}\r\n\r\n.comparison-image {\r\n  animation: fadeIn 0.3s ease;\r\n}\r\n\r\n/* Print styles */\r\n@media print {\r\n  .image-comparison {\r\n    page-break-inside: avoid;\r\n  }\r\n\r\n  .comparison-container {\r\n    grid-template-columns: 1fr 1fr;\r\n  }\r\n\r\n  .image-panel {\r\n    box-shadow: none;\r\n    border: 1px solid #e2e8f0;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImageComparison.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImageComparison.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ImageComparison.vue?vue&type=template&id=ea5ea65a&scoped=true\"\nimport script from \"./ImageComparison.vue?vue&type=script&lang=js\"\nexport * from \"./ImageComparison.vue?vue&type=script&lang=js\"\nimport style0 from \"./ImageComparison.vue?vue&type=style&index=0&id=ea5ea65a&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ea5ea65a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isVisible)?_c('div',{staticClass:\"download-button-container\"},[_c('button',{staticClass:\"download-button\",class:{ downloading: _vm.isDownloading, success: _vm.showSuccess },attrs:{\"disabled\":_vm.isDownloading,\"data-test\":\"download-button\"},on:{\"click\":_vm.handleDownload}},[_c('span',{staticClass:\"button-icon\"},[_vm._v(_vm._s(_vm.buttonIcon))]),_c('span',{staticClass:\"button-text\"},[_vm._v(_vm._s(_vm.buttonText))])]),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.showSuccess)?_c('div',{staticClass:\"success-feedback\"},[_c('span',{staticClass:\"success-icon\"},[_vm._v(\"‚úì\")]),_c('span',{staticClass:\"success-text\"},[_vm._v(\"‰∏ãËΩΩÊàêÂäüÔºÅ\")])]):_vm._e()])],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\r\n * DownloadManager Service\r\n * \r\n * Handles file download operations for the T-shirt design extractor application.\r\n * Provides methods to trigger browser downloads and generate timestamped filenames.\r\n * \r\n * Requirements: 4.2, 4.3\r\n */\r\n\r\nimport {\r\n  DOWNLOAD_FILENAME_PREFIX,\r\n  DOWNLOAD_FILE_EXTENSION\r\n} from '@/constants';\r\n\r\n/**\r\n * DownloadManager class for handling image downloads\r\n */\r\nclass DownloadManager {\r\n  /**\r\n   * Triggers a browser download for the given image data\r\n   * \r\n   * Creates a temporary anchor element, sets the download attribute,\r\n   * and programmatically clicks it to trigger the browser's download dialog.\r\n   * The anchor is immediately removed after triggering the download.\r\n   * \r\n   * @param {string} dataUrl - The data URL of the image to download\r\n   * @param {string} filename - The filename to use for the download\r\n   * @throws {Error} If dataUrl or filename are invalid\r\n   * \r\n   * Requirements:\r\n   * - 4.2: Download extracted design in PNG format (preserving transparency)\r\n   * \r\n   * @example\r\n   * const downloadManager = new DownloadManager();\r\n   * downloadManager.downloadImage('data:image/png;base64,...', 'my-design.png');\r\n   */\r\n  downloadImage(dataUrl, filename) {\r\n    // Validate parameters\r\n    if (!dataUrl || typeof dataUrl !== 'string') {\r\n      throw new Error('Invalid dataUrl: must be a non-empty string');\r\n    }\r\n\r\n    if (!filename || typeof filename !== 'string') {\r\n      throw new Error('Invalid filename: must be a non-empty string');\r\n    }\r\n\r\n    // Create a temporary anchor element\r\n    const link = document.createElement('a');\r\n    link.href = dataUrl;\r\n    link.download = filename;\r\n    \r\n    // Append to body, click, and remove\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  }\r\n\r\n  /**\r\n   * Generates a filename with a descriptive prefix and timestamp\r\n   * \r\n   * Creates a filename in the format: prefix-YYYY-MM-DDTHH-MM-SS-sss.png\r\n   * The timestamp is based on ISO 8601 format with colons and dots replaced\r\n   * by hyphens to ensure filesystem compatibility.\r\n   * \r\n   * @param {string} [prefix] - The prefix for the filename (defaults to DOWNLOAD_FILENAME_PREFIX constant)\r\n   * @returns {string} Filename in format: prefix-YYYY-MM-DDTHH-MM-SS-sss.png\r\n   * @throws {Error} If prefix is provided but not a string\r\n   * \r\n   * Requirements:\r\n   * - 4.3: Use descriptive filename with timestamp\r\n   * \r\n   * @example\r\n   * const downloadManager = new DownloadManager();\r\n   * const filename = downloadManager.generateFilename();\r\n   * // Returns: 'extracted-design-2024-01-15T10-30-45-123Z.png'\r\n   * \r\n   * const customFilename = downloadManager.generateFilename('my-design');\r\n   * // Returns: 'my-design-2024-01-15T10-30-45-123Z.png'\r\n   */\r\n  generateFilename(prefix = DOWNLOAD_FILENAME_PREFIX) {\r\n    // Validate prefix parameter\r\n    if (prefix !== undefined && typeof prefix !== 'string') {\r\n      throw new Error('Invalid prefix: must be a string');\r\n    }\r\n\r\n    // Get current timestamp and format it\r\n    // Replace colons and dots with hyphens for filesystem compatibility\r\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\r\n    \r\n    // Return formatted filename with .png extension\r\n    return `${prefix}-${timestamp}${DOWNLOAD_FILE_EXTENSION}`;\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport default new DownloadManager();\r\n\r\n// Also export the class for testing purposes\r\nexport { DownloadManager };\r\n","<!--\r\n  DownloadButton Component\r\n  \r\n  Displays a download button that is only visible when extracted image is available.\r\n  Integrates with DownloadManager service to trigger downloads with proper filenames.\r\n  \r\n  Requirements: 4.1, 4.2, 4.3, 4.4\r\n-->\r\n\r\n<template>\r\n  <div class=\"download-button-container\" v-if=\"isVisible\">\r\n    <button\r\n      @click=\"handleDownload\"\r\n      :disabled=\"isDownloading\"\r\n      class=\"download-button\"\r\n      :class=\"{ downloading: isDownloading, success: showSuccess }\"\r\n      data-test=\"download-button\"\r\n    >\r\n      <span class=\"button-icon\">{{ buttonIcon }}</span>\r\n      <span class=\"button-text\">{{ buttonText }}</span>\r\n    </button>\r\n\r\n    <!-- Success Feedback -->\r\n    <transition name=\"fade\">\r\n      <div v-if=\"showSuccess\" class=\"success-feedback\">\r\n        <span class=\"success-icon\">‚úì</span>\r\n        <span class=\"success-text\">‰∏ãËΩΩÊàêÂäüÔºÅ</span>\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DownloadManager from '@/services/DownloadManager';\r\nimport { SUCCESS_MESSAGE_DURATION } from '@/constants';\r\n\r\nexport default {\r\n  name: 'DownloadButton',\r\n\r\n  props: {\r\n    /**\r\n     * Data URL of the extracted image to download\r\n     */\r\n    extractedImage: {\r\n      type: String,\r\n      default: null\r\n    },\r\n\r\n    /**\r\n     * Custom filename prefix (optional)\r\n     */\r\n    filenamePrefix: {\r\n      type: String,\r\n      default: 'extracted-design'\r\n    },\r\n\r\n    /**\r\n     * Whether to show the button (overrides automatic visibility logic)\r\n     */\r\n    visible: {\r\n      type: Boolean,\r\n      default: null\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      isDownloading: false,\r\n      showSuccess: false,\r\n      successTimeout: null\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    /**\r\n     * Determines if the download button should be visible\r\n     * Button is visible only when extracted image is available\r\n     * Requirements: 4.1\r\n     */\r\n    isVisible() {\r\n      // If visible prop is explicitly set, use it\r\n      if (this.visible !== null) {\r\n        return this.visible;\r\n      }\r\n      // Otherwise, show button only when extracted image is available\r\n      return !!this.extractedImage;\r\n    },\r\n\r\n    /**\r\n     * Returns the appropriate button icon based on state\r\n     */\r\n    buttonIcon() {\r\n      if (this.showSuccess) {\r\n        return '‚úì';\r\n      }\r\n      if (this.isDownloading) {\r\n        return '‚è≥';\r\n      }\r\n      return '‚¨áÔ∏è';\r\n    },\r\n\r\n    /**\r\n     * Returns the appropriate button text based on state\r\n     */\r\n    buttonText() {\r\n      if (this.showSuccess) {\r\n        return '‰∏ãËΩΩÊàêÂäü';\r\n      }\r\n      if (this.isDownloading) {\r\n        return '‰∏ãËΩΩ‰∏≠...';\r\n      }\r\n      return '‰∏ãËΩΩÂõæÊ°à';\r\n    }\r\n  },\r\n\r\n  beforeDestroy() {\r\n    // Clear timeout if component is destroyed\r\n    if (this.successTimeout) {\r\n      clearTimeout(this.successTimeout);\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * Handles download button click\r\n     * Requirements: 4.2, 4.3, 4.4\r\n     */\r\n    async handleDownload() {\r\n      if (!this.extractedImage || this.isDownloading) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        this.isDownloading = true;\r\n\r\n        // Generate filename with timestamp\r\n        // Requirements: 4.3\r\n        const filename = DownloadManager.generateFilename(this.filenamePrefix);\r\n\r\n        // Trigger download using DownloadManager\r\n        // Requirements: 4.2 (PNG format with transparency)\r\n        DownloadManager.downloadImage(this.extractedImage, filename);\r\n\r\n        // Show success feedback\r\n        // Requirements: 4.4\r\n        this.showSuccessFeedback();\r\n\r\n        // Emit download event\r\n        this.$emit('download-success', { filename });\r\n\r\n      } catch (error) {\r\n        console.error('Download failed:', error);\r\n        this.$emit('download-error', error);\r\n        \r\n        // Show error feedback\r\n        this.showErrorFeedback();\r\n      } finally {\r\n        this.isDownloading = false;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Shows success feedback for a limited duration\r\n     */\r\n    showSuccessFeedback() {\r\n      this.showSuccess = true;\r\n\r\n      // Clear existing timeout if any\r\n      if (this.successTimeout) {\r\n        clearTimeout(this.successTimeout);\r\n      }\r\n\r\n      // Hide success feedback after duration\r\n      this.successTimeout = setTimeout(() => {\r\n        this.showSuccess = false;\r\n        this.successTimeout = null;\r\n      }, SUCCESS_MESSAGE_DURATION);\r\n    },\r\n\r\n    /**\r\n     * Shows error feedback\r\n     */\r\n    showErrorFeedback() {\r\n      // Could be extended to show error UI\r\n      // For now, just emit event for parent to handle\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.download-button-container {\r\n  width: 100%;\r\n  max-width: 600px;\r\n  margin: 20px auto;\r\n  padding: 0 20px;\r\n}\r\n\r\n.download-button {\r\n  width: 100%;\r\n  padding: 16px 24px;\r\n  background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 8px;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 12px;\r\n  transition: all 0.3s ease;\r\n  box-shadow: 0 4px 6px rgba(72, 187, 120, 0.3);\r\n}\r\n\r\n.download-button:hover:not(:disabled) {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 6px 12px rgba(72, 187, 120, 0.4);\r\n}\r\n\r\n.download-button:active:not(:disabled) {\r\n  transform: translateY(0);\r\n}\r\n\r\n.download-button:disabled {\r\n  cursor: not-allowed;\r\n  opacity: 0.7;\r\n}\r\n\r\n.download-button.downloading {\r\n  background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);\r\n}\r\n\r\n.download-button.success {\r\n  background: linear-gradient(135deg, #48bb78 0%, #2f855a 100%);\r\n  animation: successPulse 0.5s ease;\r\n}\r\n\r\n@keyframes successPulse {\r\n  0%, 100% {\r\n    transform: scale(1);\r\n  }\r\n  50% {\r\n    transform: scale(1.05);\r\n  }\r\n}\r\n\r\n.button-icon {\r\n  font-size: 24px;\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.download-button:hover:not(:disabled) .button-icon {\r\n  transform: translateY(2px);\r\n}\r\n\r\n.button-text {\r\n  font-size: 18px;\r\n}\r\n\r\n/* Success Feedback */\r\n.success-feedback {\r\n  margin-top: 16px;\r\n  padding: 12px 20px;\r\n  background-color: #f0fff4;\r\n  border: 2px solid #9ae6b4;\r\n  border-radius: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8px;\r\n  animation: slideDown 0.3s ease;\r\n}\r\n\r\n@keyframes slideDown {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(-10px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n.success-icon {\r\n  width: 24px;\r\n  height: 24px;\r\n  background-color: #48bb78;\r\n  color: white;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n}\r\n\r\n.success-text {\r\n  color: #22543d;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n}\r\n\r\n/* Fade Transition */\r\n.fade-enter-active, .fade-leave-active {\r\n  transition: opacity 0.3s ease;\r\n}\r\n\r\n.fade-enter, .fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n/* Mobile Responsive */\r\n@media (max-width: 768px) {\r\n  .download-button-container {\r\n    padding: 0 15px;\r\n  }\r\n\r\n  .download-button {\r\n    padding: 14px 20px;\r\n    font-size: 16px;\r\n  }\r\n\r\n  .button-icon {\r\n    font-size: 20px;\r\n  }\r\n\r\n  .button-text {\r\n    font-size: 16px;\r\n  }\r\n\r\n  .success-feedback {\r\n    padding: 10px 16px;\r\n  }\r\n\r\n  .success-text {\r\n    font-size: 14px;\r\n  }\r\n}\r\n\r\n/* Accessibility */\r\n.download-button:focus {\r\n  outline: 3px solid #9ae6b4;\r\n  outline-offset: 2px;\r\n}\r\n\r\n.download-button:focus:not(:focus-visible) {\r\n  outline: none;\r\n}\r\n\r\n/* Print styles */\r\n@media print {\r\n  .download-button-container {\r\n    display: none;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DownloadButton.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DownloadButton.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./DownloadButton.vue?vue&type=template&id=a1d640f8&scoped=true\"\nimport script from \"./DownloadButton.vue?vue&type=script&lang=js\"\nexport * from \"./DownloadButton.vue?vue&type=script&lang=js\"\nimport style0 from \"./DownloadButton.vue?vue&type=style&index=0&id=a1d640f8&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a1d640f8\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"error-boundary\"},[(_vm.hasError)?_c('div',{staticClass:\"error-display\"},[_c('div',{staticClass:\"error-content\"},[_c('div',{staticClass:\"error-icon\"},[_vm._v(\"‚ö†Ô∏è\")]),_c('h2',{staticClass:\"error-title\"},[_vm._v(\"Âá∫Èîô‰∫Ü\")]),_c('p',{staticClass:\"error-message\"},[_vm._v(_vm._s(_vm.errorMessage))]),(_vm.showDetails)?_c('div',{staticClass:\"error-details\"},[_c('button',{staticClass:\"details-toggle\",on:{\"click\":_vm.toggleDetails}},[_vm._v(\" \"+_vm._s(_vm.detailsExpanded ? 'ÈöêËóèËØ¶ÊÉÖ' : 'ÊòæÁ§∫ËØ¶ÊÉÖ')+\" \")]),(_vm.detailsExpanded)?_c('pre',{staticClass:\"error-stack\"},[_vm._v(_vm._s(_vm.errorStack))]):_vm._e()]):_vm._e(),_c('div',{staticClass:\"error-actions\"},[_c('button',{staticClass:\"retry-button\",on:{\"click\":_vm.handleRetry}},[_c('span',{staticClass:\"button-icon\"},[_vm._v(\"üîÑ\")]),_c('span',{staticClass:\"button-text\"},[_vm._v(\"ÈáçËØï\")])]),_c('button',{staticClass:\"reset-button\",on:{\"click\":_vm.handleReset}},[_c('span',{staticClass:\"button-icon\"},[_vm._v(\"‚Ü∫\")]),_c('span',{staticClass:\"button-text\"},[_vm._v(\"ÈáçÊñ∞ÂºÄÂßã\")])])])])]):_c('div',[_vm._t(\"default\")],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n  ErrorBoundary Component\r\n  \r\n  Catches and handles Vue errors in child components.\r\n  Displays error UI with retry functionality.\r\n  \r\n  Requirements: 5.1, 5.2, 5.3, 5.4\r\n-->\r\n\r\n<template>\r\n  <div class=\"error-boundary\">\r\n    <!-- Error State -->\r\n    <div v-if=\"hasError\" class=\"error-display\">\r\n      <div class=\"error-content\">\r\n        <div class=\"error-icon\">‚ö†Ô∏è</div>\r\n        <h2 class=\"error-title\">Âá∫Èîô‰∫Ü</h2>\r\n        <p class=\"error-message\">{{ errorMessage }}</p>\r\n        \r\n        <div v-if=\"showDetails\" class=\"error-details\">\r\n          <button\r\n            @click=\"toggleDetails\"\r\n            class=\"details-toggle\"\r\n          >\r\n            {{ detailsExpanded ? 'ÈöêËóèËØ¶ÊÉÖ' : 'ÊòæÁ§∫ËØ¶ÊÉÖ' }}\r\n          </button>\r\n          <pre v-if=\"detailsExpanded\" class=\"error-stack\">{{ errorStack }}</pre>\r\n        </div>\r\n\r\n        <div class=\"error-actions\">\r\n          <button\r\n            @click=\"handleRetry\"\r\n            class=\"retry-button\"\r\n          >\r\n            <span class=\"button-icon\">üîÑ</span>\r\n            <span class=\"button-text\">ÈáçËØï</span>\r\n          </button>\r\n          <button\r\n            @click=\"handleReset\"\r\n            class=\"reset-button\"\r\n          >\r\n            <span class=\"button-icon\">‚Ü∫</span>\r\n            <span class=\"button-text\">ÈáçÊñ∞ÂºÄÂßã</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Normal Content (when no error) -->\r\n    <div v-else>\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ErrorBoundary',\r\n\r\n  props: {\r\n    /**\r\n     * Custom error message to display\r\n     */\r\n    fallbackMessage: {\r\n      type: String,\r\n      default: 'Â∫îÁî®ÈÅáÂà∞‰∫Ü‰∏Ä‰∏™ÈîôËØØÔºåËØ∑ÈáçËØïÊàñÂà∑Êñ∞È°µÈù¢'\r\n    },\r\n\r\n    /**\r\n     * Whether to show error details (stack trace)\r\n     */\r\n    showDetails: {\r\n      type: Boolean,\r\n      default: process.env.NODE_ENV === 'development'\r\n    },\r\n\r\n    /**\r\n     * Callback function when retry is clicked\r\n     */\r\n    onRetry: {\r\n      type: Function,\r\n      default: null\r\n    },\r\n\r\n    /**\r\n     * Callback function when reset is clicked\r\n     */\r\n    onReset: {\r\n      type: Function,\r\n      default: null\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null,\r\n      detailsExpanded: false\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    /**\r\n     * Returns user-friendly error message\r\n     */\r\n    errorMessage() {\r\n      if (this.error && this.error.message) {\r\n        // Check if it's a user-friendly message\r\n        if (this.isUserFriendlyMessage(this.error.message)) {\r\n          return this.error.message;\r\n        }\r\n      }\r\n      return this.fallbackMessage;\r\n    },\r\n\r\n    /**\r\n     * Returns error stack trace for debugging\r\n     */\r\n    errorStack() {\r\n      if (this.error && this.error.stack) {\r\n        return this.error.stack;\r\n      }\r\n      if (this.errorInfo) {\r\n        return this.errorInfo;\r\n      }\r\n      return 'No stack trace available';\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Vue 2 error capture hook\r\n   * Catches errors from child components\r\n   * Requirements: 5.1, 5.2\r\n   */\r\n  errorCaptured(err, vm, info) {\r\n    // Capture error details\r\n    this.hasError = true;\r\n    this.error = err;\r\n    this.errorInfo = info;\r\n\r\n    // Log error for debugging\r\n    this.logError(err, vm, info);\r\n\r\n    // Emit error event for parent components\r\n    this.$emit('error', {\r\n      error: err,\r\n      vm: vm,\r\n      info: info\r\n    });\r\n\r\n    // Prevent error from propagating further\r\n    // Return false to stop propagation\r\n    return false;\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * Checks if error message is user-friendly\r\n     * (doesn't contain technical jargon or stack traces)\r\n     */\r\n    isUserFriendlyMessage(message) {\r\n      // Check for technical patterns\r\n      const technicalPatterns = [\r\n        /undefined/i,\r\n        /null/i,\r\n        /cannot read property/i,\r\n        /is not a function/i,\r\n        /at Object\\./,\r\n        /at Function\\./,\r\n        /webpack/i\r\n      ];\r\n\r\n      return !technicalPatterns.some(pattern => pattern.test(message));\r\n    },\r\n\r\n    /**\r\n     * Logs error details to console\r\n     * Requirements: 5.4\r\n     */\r\n    logError(err, vm, info) {\r\n      console.error('[ErrorBoundary] Caught error:', {\r\n        error: err,\r\n        errorMessage: err.message,\r\n        errorStack: err.stack,\r\n        componentName: vm.$options.name || 'Anonymous',\r\n        errorInfo: info,\r\n        timestamp: new Date().toISOString()\r\n      });\r\n\r\n      // In production, you could send this to an error tracking service\r\n      // if (process.env.NODE_ENV === 'production' && window.Sentry) {\r\n      //   window.Sentry.captureException(err, {\r\n      //     extra: { vm, info }\r\n      //   });\r\n      // }\r\n    },\r\n\r\n    /**\r\n     * Toggles error details visibility\r\n     */\r\n    toggleDetails() {\r\n      this.detailsExpanded = !this.detailsExpanded;\r\n    },\r\n\r\n    /**\r\n     * Handles retry button click\r\n     * Requirements: 5.3\r\n     */\r\n    handleRetry() {\r\n      // Reset error state\r\n      this.hasError = false;\r\n      this.error = null;\r\n      this.errorInfo = null;\r\n      this.detailsExpanded = false;\r\n\r\n      // Call custom retry handler if provided\r\n      if (this.onRetry) {\r\n        this.onRetry();\r\n      }\r\n\r\n      // Emit retry event\r\n      this.$emit('retry');\r\n    },\r\n\r\n    /**\r\n     * Handles reset button click\r\n     * Requirements: 5.3\r\n     */\r\n    handleReset() {\r\n      // Reset error state\r\n      this.hasError = false;\r\n      this.error = null;\r\n      this.errorInfo = null;\r\n      this.detailsExpanded = false;\r\n\r\n      // Call custom reset handler if provided\r\n      if (this.onReset) {\r\n        this.onReset();\r\n      } else {\r\n        // Default behavior: reload page\r\n        window.location.reload();\r\n      }\r\n\r\n      // Emit reset event\r\n      this.$emit('reset');\r\n    },\r\n\r\n    /**\r\n     * Public method to manually trigger error state\r\n     * Useful for testing or manual error handling\r\n     */\r\n    captureError(error, info = 'Manual error capture') {\r\n      this.hasError = true;\r\n      this.error = error;\r\n      this.errorInfo = info;\r\n      this.logError(error, this, info);\r\n    },\r\n\r\n    /**\r\n     * Public method to clear error state\r\n     */\r\n    clearError() {\r\n      this.hasError = false;\r\n      this.error = null;\r\n      this.errorInfo = null;\r\n      this.detailsExpanded = false;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.error-boundary {\r\n  width: 100%;\r\n}\r\n\r\n.error-display {\r\n  min-height: 400px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 40px 20px;\r\n}\r\n\r\n.error-content {\r\n  max-width: 600px;\r\n  width: 100%;\r\n  background-color: #fff5f5;\r\n  border: 2px solid #fc8181;\r\n  border-radius: 12px;\r\n  padding: 40px;\r\n  text-align: center;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.error-icon {\r\n  font-size: 64px;\r\n  margin-bottom: 20px;\r\n  animation: shake 0.5s ease;\r\n}\r\n\r\n@keyframes shake {\r\n  0%, 100% { transform: translateX(0); }\r\n  25% { transform: translateX(-10px); }\r\n  75% { transform: translateX(10px); }\r\n}\r\n\r\n.error-title {\r\n  font-size: 28px;\r\n  font-weight: 700;\r\n  color: #c53030;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.error-message {\r\n  font-size: 16px;\r\n  color: #742a2a;\r\n  line-height: 1.6;\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.error-details {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.details-toggle {\r\n  padding: 8px 16px;\r\n  background-color: #e2e8f0;\r\n  color: #2d3748;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.details-toggle:hover {\r\n  background-color: #cbd5e0;\r\n}\r\n\r\n.error-stack {\r\n  margin-top: 16px;\r\n  padding: 16px;\r\n  background-color: #2d3748;\r\n  color: #e2e8f0;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n  text-align: left;\r\n  overflow-x: auto;\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n  white-space: pre-wrap;\r\n  word-break: break-word;\r\n}\r\n\r\n.error-actions {\r\n  display: flex;\r\n  gap: 12px;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.retry-button,\r\n.reset-button {\r\n  padding: 12px 24px;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.retry-button {\r\n  background-color: #4299e1;\r\n  color: white;\r\n}\r\n\r\n.retry-button:hover {\r\n  background-color: #3182ce;\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.reset-button {\r\n  background-color: #718096;\r\n  color: white;\r\n}\r\n\r\n.reset-button:hover {\r\n  background-color: #4a5568;\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.button-icon {\r\n  font-size: 18px;\r\n}\r\n\r\n.button-text {\r\n  font-size: 16px;\r\n}\r\n\r\n/* Mobile Responsive */\r\n@media (max-width: 768px) {\r\n  .error-display {\r\n    padding: 30px 15px;\r\n    min-height: 350px;\r\n  }\r\n\r\n  .error-content {\r\n    padding: 30px 20px;\r\n  }\r\n\r\n  .error-icon {\r\n    font-size: 48px;\r\n  }\r\n\r\n  .error-title {\r\n    font-size: 24px;\r\n  }\r\n\r\n  .error-message {\r\n    font-size: 14px;\r\n  }\r\n\r\n  .error-actions {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .retry-button,\r\n  .reset-button {\r\n    width: 100%;\r\n    justify-content: center;\r\n  }\r\n\r\n  .error-stack {\r\n    font-size: 11px;\r\n    max-height: 200px;\r\n  }\r\n}\r\n\r\n/* Accessibility */\r\n.retry-button:focus,\r\n.reset-button:focus,\r\n.details-toggle:focus {\r\n  outline: 3px solid #4299e1;\r\n  outline-offset: 2px;\r\n}\r\n\r\n.retry-button:focus:not(:focus-visible),\r\n.reset-button:focus:not(:focus-visible),\r\n.details-toggle:focus:not(:focus-visible) {\r\n  outline: none;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ErrorBoundary.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ErrorBoundary.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ErrorBoundary.vue?vue&type=template&id=618b0a7f&scoped=true\"\nimport script from \"./ErrorBoundary.vue?vue&type=script&lang=js\"\nexport * from \"./ErrorBoundary.vue?vue&type=script&lang=js\"\nimport style0 from \"./ErrorBoundary.vue?vue&type=style&index=0&id=618b0a7f&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"618b0a7f\",\n  null\n  \n)\n\nexport default component.exports","/**\r\n * Canvas Utility Service\r\n * \r\n * This service provides utility functions for Canvas operations including:\r\n * - Loading images from DataURL\r\n * - Creating canvas elements\r\n * - Converting canvas to Blob\r\n * - Resizing images while maintaining aspect ratio\r\n * \r\n * Requirements: 3.2, 3.3, 6.1\r\n */\r\n\r\nimport {\r\n  ERROR_CODES,\r\n  ERROR_MESSAGES\r\n} from '@/constants';\r\n\r\n/**\r\n * CanvasUtility class provides Canvas manipulation utilities\r\n */\r\nclass CanvasUtility {\r\n  /**\r\n   * Loads an image from a DataURL\r\n   * \r\n   * Creates an HTMLImageElement and loads the image from the provided DataURL.\r\n   * Returns a Promise that resolves with the loaded image or rejects on error.\r\n   * \r\n   * @param {string} dataUrl - The DataURL of the image to load\r\n   * @returns {Promise<HTMLImageElement>} Promise that resolves with the loaded image\r\n   * @throws {Error} If the image fails to load or dataUrl is invalid\r\n   * \r\n   * @example\r\n   * const canvasUtil = new CanvasUtility();\r\n   * const img = await canvasUtil.loadImage('data:image/png;base64,...');\r\n   * console.log(img.width, img.height);\r\n   */\r\n  loadImage(dataUrl) {\r\n    return new Promise((resolve, reject) => {\r\n      // Validate dataUrl parameter\r\n      if (!dataUrl || typeof dataUrl !== 'string') {\r\n        reject(new Error(ERROR_MESSAGES[ERROR_CODES.IMAGE_LOAD_ERROR]));\r\n        return;\r\n      }\r\n\r\n      // Create image element\r\n      const img = new Image();\r\n\r\n      // Set up load handler\r\n      img.onload = () => {\r\n        resolve(img);\r\n      };\r\n\r\n      // Set up error handler\r\n      img.onerror = () => {\r\n        reject(new Error(ERROR_MESSAGES[ERROR_CODES.IMAGE_LOAD_ERROR]));\r\n      };\r\n\r\n      // Start loading the image\r\n      img.src = dataUrl;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a canvas element with specified dimensions\r\n   * \r\n   * Creates an HTMLCanvasElement with the given width and height.\r\n   * The canvas is created in memory and not attached to the DOM.\r\n   * \r\n   * @param {number} width - The width of the canvas in pixels\r\n   * @param {number} height - The height of the canvas in pixels\r\n   * @returns {HTMLCanvasElement} The created canvas element\r\n   * @throws {Error} If width or height are invalid\r\n   * \r\n   * @example\r\n   * const canvasUtil = new CanvasUtility();\r\n   * const canvas = canvasUtil.createCanvas(800, 600);\r\n   * const ctx = canvas.getContext('2d');\r\n   */\r\n  createCanvas(width, height) {\r\n    // Validate parameters\r\n    if (typeof width !== 'number' || typeof height !== 'number' || \r\n        width <= 0 || height <= 0 || \r\n        !isFinite(width) || !isFinite(height)) {\r\n      throw new Error(ERROR_MESSAGES[ERROR_CODES.CANVAS_ERROR]);\r\n    }\r\n\r\n    // Create canvas element\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n\r\n    return canvas;\r\n  }\r\n\r\n  /**\r\n   * Converts a canvas to a Blob\r\n   * \r\n   * Converts the canvas content to a Blob in the specified format.\r\n   * Returns a Promise that resolves with the Blob or rejects on error.\r\n   * \r\n   * @param {HTMLCanvasElement} canvas - The canvas to convert\r\n   * @param {string} [format='image/png'] - The output format (MIME type)\r\n   * @param {number} [quality=0.95] - The image quality (0-1) for lossy formats\r\n   * @returns {Promise<Blob>} Promise that resolves with the Blob\r\n   * @throws {Error} If conversion fails or canvas is invalid\r\n   * \r\n   * @example\r\n   * const canvasUtil = new CanvasUtility();\r\n   * const blob = await canvasUtil.imageToBlob(canvas, 'image/png');\r\n   * console.log(blob.size, blob.type);\r\n   */\r\n  imageToBlob(canvas, format = 'image/png', quality = 0.95) {\r\n    return new Promise((resolve, reject) => {\r\n      // Validate canvas parameter\r\n      if (!canvas || !(canvas instanceof HTMLCanvasElement)) {\r\n        reject(new Error(ERROR_MESSAGES[ERROR_CODES.CANVAS_ERROR]));\r\n        return;\r\n      }\r\n\r\n      // Validate format parameter\r\n      if (typeof format !== 'string' || !format.startsWith('image/')) {\r\n        reject(new Error(ERROR_MESSAGES[ERROR_CODES.CANVAS_ERROR]));\r\n        return;\r\n      }\r\n\r\n      // Validate quality parameter\r\n      if (typeof quality !== 'number' || quality < 0 || quality > 1) {\r\n        reject(new Error(ERROR_MESSAGES[ERROR_CODES.CANVAS_ERROR]));\r\n        return;\r\n      }\r\n\r\n      // Convert canvas to blob\r\n      canvas.toBlob(\r\n        (blob) => {\r\n          if (blob) {\r\n            resolve(blob);\r\n          } else {\r\n            reject(new Error(ERROR_MESSAGES[ERROR_CODES.CANVAS_ERROR]));\r\n          }\r\n        },\r\n        format,\r\n        quality\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Resizes an image while maintaining aspect ratio\r\n   * \r\n   * Resizes the image to fit within the specified maximum dimensions\r\n   * while preserving the original aspect ratio. If the image is smaller\r\n   * than the maximum dimensions, it is not upscaled.\r\n   * \r\n   * The function ensures that:\r\n   * - The output width does not exceed maxWidth\r\n   * - The output height does not exceed maxHeight\r\n   * - The aspect ratio is preserved (within ASPECT_RATIO_TOLERANCE)\r\n   * \r\n   * @param {HTMLImageElement} image - The image to resize\r\n   * @param {number} maxWidth - Maximum width in pixels\r\n   * @param {number} maxHeight - Maximum height in pixels\r\n   * @returns {HTMLCanvasElement} Canvas containing the resized image\r\n   * @throws {Error} If parameters are invalid\r\n   * \r\n   * @example\r\n   * const canvasUtil = new CanvasUtility();\r\n   * const img = await canvasUtil.loadImage('data:image/png;base64,...');\r\n   * const canvas = canvasUtil.resizeImage(img, 800, 600);\r\n   * // If img was 1600x1200, canvas will be 800x600 (aspect ratio preserved)\r\n   */\r\n  resizeImage(image, maxWidth, maxHeight) {\r\n    // Validate image parameter\r\n    if (!image || !(image instanceof HTMLImageElement)) {\r\n      throw new Error(ERROR_MESSAGES[ERROR_CODES.IMAGE_LOAD_ERROR]);\r\n    }\r\n\r\n    // Validate dimension parameters\r\n    if (typeof maxWidth !== 'number' || typeof maxHeight !== 'number' ||\r\n        maxWidth <= 0 || maxHeight <= 0 ||\r\n        !isFinite(maxWidth) || !isFinite(maxHeight)) {\r\n      throw new Error(ERROR_MESSAGES[ERROR_CODES.CANVAS_ERROR]);\r\n    }\r\n\r\n    // Get original dimensions\r\n    let width = image.width;\r\n    let height = image.height;\r\n\r\n    // If image is already smaller than max dimensions, use original size\r\n    if (width <= maxWidth && height <= maxHeight) {\r\n      const canvas = this.createCanvas(width, height);\r\n      const ctx = canvas.getContext('2d');\r\n      ctx.drawImage(image, 0, 0);\r\n      return canvas;\r\n    }\r\n\r\n    // Calculate new dimensions while maintaining aspect ratio\r\n    // First, try to fit by width\r\n    if (width > maxWidth) {\r\n      const ratio = maxWidth / width;\r\n      width = maxWidth;\r\n      height = Math.round(height * ratio);\r\n    }\r\n\r\n    // Then, check if height still exceeds maxHeight\r\n    if (height > maxHeight) {\r\n      const ratio = maxHeight / height;\r\n      height = maxHeight;\r\n      width = Math.round(width * ratio);\r\n    }\r\n\r\n    // Create canvas with new dimensions\r\n    const canvas = this.createCanvas(width, height);\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    // Draw resized image\r\n    ctx.drawImage(image, 0, 0, width, height);\r\n\r\n    return canvas;\r\n  }\r\n\r\n  /**\r\n   * Adds a transparency grid background to a canvas\r\n   * \r\n   * Draws a checkerboard pattern (like in image editors) to visualize\r\n   * transparent areas. This is useful for displaying images with transparency.\r\n   * \r\n   * @param {HTMLCanvasElement} canvas - The canvas to add the grid to\r\n   * @param {number} [gridSize=10] - Size of each grid square in pixels\r\n   * @param {string} [color1='#ffffff'] - First color of the checkerboard\r\n   * @param {string} [color2='#cccccc'] - Second color of the checkerboard\r\n   * @returns {HTMLCanvasElement} A new canvas with the grid background\r\n   * \r\n   * @example\r\n   * const canvasUtil = new CanvasUtility();\r\n   * const gridCanvas = canvasUtil.addTransparencyGrid(canvas);\r\n   */\r\n  addTransparencyGrid(canvas, gridSize = 10, color1 = '#ffffff', color2 = '#cccccc') {\r\n    // Validate canvas parameter\r\n    if (!canvas || !(canvas instanceof HTMLCanvasElement)) {\r\n      throw new Error(ERROR_MESSAGES[ERROR_CODES.CANVAS_ERROR]);\r\n    }\r\n\r\n    // Create a new canvas with the same dimensions\r\n    const newCanvas = this.createCanvas(canvas.width, canvas.height);\r\n    const ctx = newCanvas.getContext('2d');\r\n\r\n    // Draw checkerboard pattern\r\n    for (let y = 0; y < canvas.height; y += gridSize) {\r\n      for (let x = 0; x < canvas.width; x += gridSize) {\r\n        // Alternate colors in checkerboard pattern\r\n        const isEvenRow = Math.floor(y / gridSize) % 2 === 0;\r\n        const isEvenCol = Math.floor(x / gridSize) % 2 === 0;\r\n        const useColor1 = isEvenRow === isEvenCol;\r\n        \r\n        ctx.fillStyle = useColor1 ? color1 : color2;\r\n        ctx.fillRect(x, y, gridSize, gridSize);\r\n      }\r\n    }\r\n\r\n    // Draw the original canvas on top\r\n    ctx.drawImage(canvas, 0, 0);\r\n\r\n    return newCanvas;\r\n  }\r\n}\r\n\r\n// Export a singleton instance\r\nexport default new CanvasUtility();\r\n\r\n// Also export the class for testing purposes\r\nexport { CanvasUtility };\r\n","/**\r\n * Pattern Extractor Service\r\n * \r\n * ‰ªéÁßªÈô§ËÉåÊôØÂêéÁöÑÂõæÁâá‰∏≠ÊèêÂèñÂõæÊ°àÂå∫Âüü\r\n * ÈÄöËøáÂàÜÊûêÂÉèÁ¥†ÁöÑÈÄèÊòéÂ∫¶ÂíåÈ¢úËâ≤ÔºåËá™Âä®Ê£ÄÊµãÂõæÊ°àËæπÁïåÂπ∂Ë£ÅÂâ™\r\n */\r\n\r\n/**\r\n * ÂõæÊ°àÊèêÂèñÂô®Á±ª\r\n */\r\nclass PatternExtractor {\r\n  /**\r\n   * ‰ªéÂõæÁâá‰∏≠ÊèêÂèñÂõæÊ°àÂå∫Âüü\r\n   * \r\n   * @param {HTMLImageElement|HTMLCanvasElement} image - Â∑≤ÁßªÈô§ËÉåÊôØÁöÑÂõæÁâá\r\n   * @param {Object} options - ÊèêÂèñÈÄâÈ°π\r\n   * @param {number} options.padding - ËæπÁïåÂ°´ÂÖÖÔºàÂÉèÁ¥†Ôºâ\r\n   * @param {number} options.threshold - ÈÄèÊòéÂ∫¶ÈòàÂÄºÔºà0-255Ôºâ\r\n   * @returns {Promise<HTMLCanvasElement>} Ë£ÅÂâ™ÂêéÁöÑÂõæÊ°à\r\n   */\r\n  async extractPattern(image, options = {}) {\r\n    const {\r\n      padding = 20,           // ËæπÁïåÂ°´ÂÖÖ\r\n      threshold = 10          // ÈÄèÊòéÂ∫¶ÈòàÂÄº\r\n    } = options;\r\n\r\n    console.log('[PatternExtractor] ÂºÄÂßãÊ£ÄÊµãÂõæÊ°àËæπÁïå...');\r\n    console.log('[PatternExtractor] ÂõæÁâáÂ∞∫ÂØ∏:', image.width, 'x', image.height);\r\n    console.log('[PatternExtractor] Â°´ÂÖÖ:', padding, 'ÂÉèÁ¥†');\r\n    console.log('[PatternExtractor] ÈòàÂÄº:', threshold);\r\n\r\n    // ÂàõÂª∫‰∏¥Êó∂ canvas\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    \r\n    canvas.width = image.width;\r\n    canvas.height = image.height;\r\n    \r\n    // ÁªòÂà∂ÂõæÁâá\r\n    ctx.drawImage(image, 0, 0);\r\n    \r\n    // Ëé∑ÂèñÂõæÂÉèÊï∞ÊçÆ\r\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    const pixels = imageData.data;\r\n    \r\n    // Ê£ÄÊµãÂõæÊ°àËæπÁïå\r\n    const bounds = this._detectPatternBounds(pixels, canvas.width, canvas.height, threshold);\r\n    \r\n    if (!bounds) {\r\n      // Â¶ÇÊûúÊ≤°ÊúâÊ£ÄÊµãÂà∞ÂõæÊ°àÔºåËøîÂõûÂéüÂõæ\r\n      console.log('[PatternExtractor] Êú™Ê£ÄÊµãÂà∞ÂõæÊ°àËæπÁïåÔºåËøîÂõûÂéüÂõæ');\r\n      return canvas;\r\n    }\r\n    \r\n    console.log('[PatternExtractor] Ê£ÄÊµãÂà∞ËæπÁïå:', bounds);\r\n    \r\n    // Ê∑ªÂä†Â°´ÂÖÖ\r\n    const paddedBounds = {\r\n      left: Math.max(0, bounds.left - padding),\r\n      top: Math.max(0, bounds.top - padding),\r\n      right: Math.min(canvas.width, bounds.right + padding),\r\n      bottom: Math.min(canvas.height, bounds.bottom + padding)\r\n    };\r\n    \r\n    console.log('[PatternExtractor] Ê∑ªÂä†Â°´ÂÖÖÂêé:', paddedBounds);\r\n    \r\n    // ËÆ°ÁÆóË£ÅÂâ™ÂêéÁöÑÂ∞∫ÂØ∏\r\n    const croppedWidth = paddedBounds.right - paddedBounds.left;\r\n    const croppedHeight = paddedBounds.bottom - paddedBounds.top;\r\n    \r\n    console.log('[PatternExtractor] Ë£ÅÂâ™Â∞∫ÂØ∏:', croppedWidth, 'x', croppedHeight);\r\n    \r\n    // ÂàõÂª∫Ë£ÅÂâ™ÂêéÁöÑ canvas\r\n    const croppedCanvas = document.createElement('canvas');\r\n    const croppedCtx = croppedCanvas.getContext('2d');\r\n    \r\n    croppedCanvas.width = croppedWidth;\r\n    croppedCanvas.height = croppedHeight;\r\n    \r\n    // Ë£ÅÂâ™ÂõæÊ°à\r\n    croppedCtx.drawImage(\r\n      canvas,\r\n      paddedBounds.left,\r\n      paddedBounds.top,\r\n      croppedWidth,\r\n      croppedHeight,\r\n      0,\r\n      0,\r\n      croppedWidth,\r\n      croppedHeight\r\n    );\r\n    \r\n    console.log('[PatternExtractor] ÂõæÊ°àÊèêÂèñÂÆåÊàêÔºÅ');\r\n    \r\n    return croppedCanvas;\r\n  }\r\n\r\n  /**\r\n   * Ê£ÄÊµãÂõæÊ°àËæπÁïåÔºàÊîπËøõÁâà - ÊéíÈô§Á∫ØËâ≤Âå∫ÂüüÔºâ\r\n   * \r\n   * @private\r\n   * @param {Uint8ClampedArray} pixels - ÂÉèÁ¥†Êï∞ÊçÆ\r\n   * @param {number} width - ÂõæÁâáÂÆΩÂ∫¶\r\n   * @param {number} height - ÂõæÁâáÈ´òÂ∫¶\r\n   * @param {number} threshold - ÈÄèÊòéÂ∫¶ÈòàÂÄº\r\n   * @returns {Object|null} ËæπÁïåÂùêÊ†á {left, top, right, bottom}\r\n   */\r\n  _detectPatternBounds(pixels, width, height, threshold) {\r\n    let minX = width;\r\n    let minY = height;\r\n    let maxX = 0;\r\n    let maxY = 0;\r\n    let hasContent = false;\r\n\r\n    // È¶ñÂÖàÔºåÈááÊ†∑Ê£ÄÊµã‰∏ªË¶ÅÈ¢úËâ≤ÔºàTÊÅ§ÁöÑÈ¢úËâ≤Ôºâ\r\n    const dominantColor = this._detectDominantColor(pixels, width, height);\r\n    console.log('[PatternExtractor] Ê£ÄÊµãÂà∞‰∏ªËâ≤Ë∞É:', dominantColor);\r\n\r\n    // Êâ´ÊèèÊâÄÊúâÂÉèÁ¥†ÔºåÊéíÈô§‰∏é‰∏ªËâ≤Ë∞ÉÁõ∏‰ººÁöÑÂå∫Âüü\r\n    for (let y = 0; y < height; y++) {\r\n      for (let x = 0; x < width; x++) {\r\n        const index = (y * width + x) * 4;\r\n        const alpha = pixels[index + 3]; // Alpha ÈÄöÈÅì\r\n        \r\n        // Â¶ÇÊûúÂÉèÁ¥†‰∏çÈÄèÊòé\r\n        if (alpha > threshold) {\r\n          const r = pixels[index];\r\n          const g = pixels[index + 1];\r\n          const b = pixels[index + 2];\r\n          \r\n          // Ê£ÄÊü•ÊòØÂê¶‰∏é‰∏ªËâ≤Ë∞ÉÁõ∏‰ººÔºàÂ¶ÇÊûúÁõ∏‰ººÔºåÂèØËÉΩÊòØ TÊÅ§ Êú¨Ë∫´Ôºå‰∏çÊòØÂõæÊ°àÔºâ\r\n          const colorDiff = this._colorDistance(\r\n            { r, g, b },\r\n            dominantColor\r\n          );\r\n          \r\n          // Â¶ÇÊûúÈ¢úËâ≤Â∑ÆÂºÇÂ§ß‰∫éÈòàÂÄºÔºåËÆ§‰∏∫ÊòØÂõæÊ°à\r\n          if (colorDiff > 30) { // È¢úËâ≤Â∑ÆÂºÇÈòàÂÄº\r\n            hasContent = true;\r\n            minX = Math.min(minX, x);\r\n            minY = Math.min(minY, y);\r\n            maxX = Math.max(maxX, x);\r\n            maxY = Math.max(maxY, y);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!hasContent) {\r\n      console.log('[PatternExtractor] Êú™Ê£ÄÊµãÂà∞ÂõæÊ°àÔºàÂèØËÉΩÂÖ®ÊòØÁ∫ØËâ≤Ôºâ');\r\n      // Â¶ÇÊûúÊ≤°ÊúâÊ£ÄÊµãÂà∞ÂõæÊ°àÔºåÂõûÈÄÄÂà∞Âü∫Êú¨Ê£ÄÊµã\r\n      return this._detectPatternBoundsBasic(pixels, width, height, threshold);\r\n    }\r\n\r\n    return {\r\n      left: minX,\r\n      top: minY,\r\n      right: maxX + 1,\r\n      bottom: maxY + 1\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Âü∫Êú¨ËæπÁïåÊ£ÄÊµãÔºà‰∏çËÄÉËôëÈ¢úËâ≤Ôºâ\r\n   * \r\n   * @private\r\n   */\r\n  _detectPatternBoundsBasic(pixels, width, height, threshold) {\r\n    let minX = width;\r\n    let minY = height;\r\n    let maxX = 0;\r\n    let maxY = 0;\r\n    let hasContent = false;\r\n\r\n    for (let y = 0; y < height; y++) {\r\n      for (let x = 0; x < width; x++) {\r\n        const index = (y * width + x) * 4;\r\n        const alpha = pixels[index + 3];\r\n        \r\n        if (alpha > threshold) {\r\n          hasContent = true;\r\n          minX = Math.min(minX, x);\r\n          minY = Math.min(minY, y);\r\n          maxX = Math.max(maxX, x);\r\n          maxY = Math.max(maxY, y);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!hasContent) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      left: minX,\r\n      top: minY,\r\n      right: maxX + 1,\r\n      bottom: maxY + 1\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Ê£ÄÊµã‰∏ªËâ≤Ë∞ÉÔºàÈááÊ†∑Ê≥ïÔºâ\r\n   * \r\n   * @private\r\n   * @param {Uint8ClampedArray} pixels - ÂÉèÁ¥†Êï∞ÊçÆ\r\n   * @param {number} width - ÂõæÁâáÂÆΩÂ∫¶\r\n   * @param {number} height - ÂõæÁâáÈ´òÂ∫¶\r\n   * @returns {Object} ‰∏ªËâ≤Ë∞É {r, g, b}\r\n   */\r\n  _detectDominantColor(pixels, width, height) {\r\n    const colorCounts = {};\r\n    const sampleRate = 10; // ÊØè10‰∏™ÂÉèÁ¥†ÈááÊ†∑‰∏ÄÊ¨°\r\n    \r\n    for (let y = 0; y < height; y += sampleRate) {\r\n      for (let x = 0; x < width; x += sampleRate) {\r\n        const index = (y * width + x) * 4;\r\n        const alpha = pixels[index + 3];\r\n        \r\n        // Âè™ÁªüËÆ°‰∏çÈÄèÊòéÁöÑÂÉèÁ¥†\r\n        if (alpha > 200) {\r\n          const r = Math.floor(pixels[index] / 32) * 32; // ÈáèÂåñÈ¢úËâ≤\r\n          const g = Math.floor(pixels[index + 1] / 32) * 32;\r\n          const b = Math.floor(pixels[index + 2] / 32) * 32;\r\n          \r\n          const colorKey = `${r},${g},${b}`;\r\n          colorCounts[colorKey] = (colorCounts[colorKey] || 0) + 1;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // ÊâæÂà∞Âá∫Áé∞Ê¨°Êï∞ÊúÄÂ§öÁöÑÈ¢úËâ≤\r\n    let maxCount = 0;\r\n    let dominantColorKey = '0,0,0';\r\n    \r\n    for (const [colorKey, count] of Object.entries(colorCounts)) {\r\n      if (count > maxCount) {\r\n        maxCount = count;\r\n        dominantColorKey = colorKey;\r\n      }\r\n    }\r\n    \r\n    const [r, g, b] = dominantColorKey.split(',').map(Number);\r\n    return { r, g, b };\r\n  }\r\n\r\n  /**\r\n   * ËÆ°ÁÆó‰∏§‰∏™È¢úËâ≤‰πãÈó¥ÁöÑË∑ùÁ¶ª\r\n   * \r\n   * @private\r\n   * @param {Object} color1 - È¢úËâ≤1 {r, g, b}\r\n   * @param {Object} color2 - È¢úËâ≤2 {r, g, b}\r\n   * @returns {number} È¢úËâ≤Ë∑ùÁ¶ª\r\n   */\r\n  _colorDistance(color1, color2) {\r\n    const dr = color1.r - color2.r;\r\n    const dg = color1.g - color2.g;\r\n    const db = color1.b - color2.b;\r\n    \r\n    // Ê¨ßÂá†ÈáåÂæóË∑ùÁ¶ª\r\n    return Math.sqrt(dr * dr + dg * dg + db * db);\r\n  }\r\n\r\n  /**\r\n   * Êô∫ËÉΩË£ÅÂâ™ - Âü∫‰∫éÂÜÖÂÆπÂØÜÂ∫¶\r\n   * \r\n   * Ëøô‰∏™ÊñπÊ≥ï‰ºöÂàÜÊûêÂõæÊ°àÁöÑÂÜÖÂÆπÂØÜÂ∫¶ÔºåÂ∞ùËØïÂè™‰øùÁïô‰∏ªË¶ÅÂõæÊ°àÂå∫Âüü\r\n   * \r\n   * @param {HTMLImageElement|HTMLCanvasElement} image - Â∑≤ÁßªÈô§ËÉåÊôØÁöÑÂõæÁâá\r\n   * @param {Object} options - Ë£ÅÂâ™ÈÄâÈ°π\r\n   * @param {number} options.densityThreshold - ÂÜÖÂÆπÂØÜÂ∫¶ÈòàÂÄºÔºà0-1Ôºâ\r\n   * @param {number} options.padding - ËæπÁïåÂ°´ÂÖÖÔºàÂÉèÁ¥†Ôºâ\r\n   * @returns {Promise<HTMLCanvasElement>} Ë£ÅÂâ™ÂêéÁöÑÂõæÊ°à\r\n   */\r\n  async smartCrop(image, options = {}) {\r\n    const {\r\n      densityThreshold = 0.05,  // ÂÜÖÂÆπÂØÜÂ∫¶ÈòàÂÄº\r\n      padding = 20\r\n    } = options;\r\n\r\n    // ÂàõÂª∫‰∏¥Êó∂ canvas\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    \r\n    canvas.width = image.width;\r\n    canvas.height = image.height;\r\n    \r\n    // ÁªòÂà∂ÂõæÁâá\r\n    ctx.drawImage(image, 0, 0);\r\n    \r\n    // Ëé∑ÂèñÂõæÂÉèÊï∞ÊçÆ\r\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    const pixels = imageData.data;\r\n    \r\n    // ËÆ°ÁÆóÊØèË°åÂíåÊØèÂàóÁöÑÂÜÖÂÆπÂØÜÂ∫¶\r\n    const rowDensity = this._calculateRowDensity(pixels, canvas.width, canvas.height);\r\n    const colDensity = this._calculateColumnDensity(pixels, canvas.width, canvas.height);\r\n    \r\n    // ÊâæÂà∞ÂÜÖÂÆπÂå∫Âüü\r\n    const bounds = this._findContentBounds(rowDensity, colDensity, densityThreshold);\r\n    \r\n    if (!bounds) {\r\n      // Â¶ÇÊûúÊ≤°ÊúâÊ£ÄÊµãÂà∞ÂÜÖÂÆπÔºå‰ΩøÁî®Âü∫Êú¨ËæπÁïåÊ£ÄÊµã\r\n      return this.extractPattern(image, { padding });\r\n    }\r\n    \r\n    // Ê∑ªÂä†Â°´ÂÖÖ\r\n    const paddedBounds = {\r\n      left: Math.max(0, bounds.left - padding),\r\n      top: Math.max(0, bounds.top - padding),\r\n      right: Math.min(canvas.width, bounds.right + padding),\r\n      bottom: Math.min(canvas.height, bounds.bottom + padding)\r\n    };\r\n    \r\n    // ËÆ°ÁÆóË£ÅÂâ™ÂêéÁöÑÂ∞∫ÂØ∏\r\n    const croppedWidth = paddedBounds.right - paddedBounds.left;\r\n    const croppedHeight = paddedBounds.bottom - paddedBounds.top;\r\n    \r\n    // ÂàõÂª∫Ë£ÅÂâ™ÂêéÁöÑ canvas\r\n    const croppedCanvas = document.createElement('canvas');\r\n    const croppedCtx = croppedCanvas.getContext('2d');\r\n    \r\n    croppedCanvas.width = croppedWidth;\r\n    croppedCanvas.height = croppedHeight;\r\n    \r\n    // Ë£ÅÂâ™ÂõæÊ°à\r\n    croppedCtx.drawImage(\r\n      canvas,\r\n      paddedBounds.left,\r\n      paddedBounds.top,\r\n      croppedWidth,\r\n      croppedHeight,\r\n      0,\r\n      0,\r\n      croppedWidth,\r\n      croppedHeight\r\n    );\r\n    \r\n    return croppedCanvas;\r\n  }\r\n\r\n  /**\r\n   * ËÆ°ÁÆóÊØèË°åÁöÑÂÜÖÂÆπÂØÜÂ∫¶\r\n   * \r\n   * @private\r\n   * @param {Uint8ClampedArray} pixels - ÂÉèÁ¥†Êï∞ÊçÆ\r\n   * @param {number} width - ÂõæÁâáÂÆΩÂ∫¶\r\n   * @param {number} height - ÂõæÁâáÈ´òÂ∫¶\r\n   * @returns {Array<number>} ÊØèË°åÁöÑÂÜÖÂÆπÂØÜÂ∫¶Ôºà0-1Ôºâ\r\n   */\r\n  _calculateRowDensity(pixels, width, height) {\r\n    const density = new Array(height).fill(0);\r\n    \r\n    for (let y = 0; y < height; y++) {\r\n      let opaquePixels = 0;\r\n      \r\n      for (let x = 0; x < width; x++) {\r\n        const index = (y * width + x) * 4;\r\n        const alpha = pixels[index + 3];\r\n        \r\n        if (alpha > 10) {\r\n          opaquePixels++;\r\n        }\r\n      }\r\n      \r\n      density[y] = opaquePixels / width;\r\n    }\r\n    \r\n    return density;\r\n  }\r\n\r\n  /**\r\n   * ËÆ°ÁÆóÊØèÂàóÁöÑÂÜÖÂÆπÂØÜÂ∫¶\r\n   * \r\n   * @private\r\n   * @param {Uint8ClampedArray} pixels - ÂÉèÁ¥†Êï∞ÊçÆ\r\n   * @param {number} width - ÂõæÁâáÂÆΩÂ∫¶\r\n   * @param {number} height - ÂõæÁâáÈ´òÂ∫¶\r\n   * @returns {Array<number>} ÊØèÂàóÁöÑÂÜÖÂÆπÂØÜÂ∫¶Ôºà0-1Ôºâ\r\n   */\r\n  _calculateColumnDensity(pixels, width, height) {\r\n    const density = new Array(width).fill(0);\r\n    \r\n    for (let x = 0; x < width; x++) {\r\n      let opaquePixels = 0;\r\n      \r\n      for (let y = 0; y < height; y++) {\r\n        const index = (y * width + x) * 4;\r\n        const alpha = pixels[index + 3];\r\n        \r\n        if (alpha > 10) {\r\n          opaquePixels++;\r\n        }\r\n      }\r\n      \r\n      density[x] = opaquePixels / height;\r\n    }\r\n    \r\n    return density;\r\n  }\r\n\r\n  /**\r\n   * Ê†πÊçÆÂØÜÂ∫¶ÊâæÂà∞ÂÜÖÂÆπËæπÁïå\r\n   * \r\n   * @private\r\n   * @param {Array<number>} rowDensity - Ë°åÂØÜÂ∫¶\r\n   * @param {Array<number>} colDensity - ÂàóÂØÜÂ∫¶\r\n   * @param {number} threshold - ÂØÜÂ∫¶ÈòàÂÄº\r\n   * @returns {Object|null} ËæπÁïåÂùêÊ†á\r\n   */\r\n  _findContentBounds(rowDensity, colDensity, threshold) {\r\n    // ÊâæÂà∞Á¨¨‰∏ÄË°åÂíåÊúÄÂêé‰∏ÄË°åÊúâÂÜÖÂÆπÁöÑ‰ΩçÁΩÆ\r\n    let top = 0;\r\n    let bottom = rowDensity.length - 1;\r\n    \r\n    for (let i = 0; i < rowDensity.length; i++) {\r\n      if (rowDensity[i] > threshold) {\r\n        top = i;\r\n        break;\r\n      }\r\n    }\r\n    \r\n    for (let i = rowDensity.length - 1; i >= 0; i--) {\r\n      if (rowDensity[i] > threshold) {\r\n        bottom = i + 1;\r\n        break;\r\n      }\r\n    }\r\n    \r\n    // ÊâæÂà∞Á¨¨‰∏ÄÂàóÂíåÊúÄÂêé‰∏ÄÂàóÊúâÂÜÖÂÆπÁöÑ‰ΩçÁΩÆ\r\n    let left = 0;\r\n    let right = colDensity.length - 1;\r\n    \r\n    for (let i = 0; i < colDensity.length; i++) {\r\n      if (colDensity[i] > threshold) {\r\n        left = i;\r\n        break;\r\n      }\r\n    }\r\n    \r\n    for (let i = colDensity.length - 1; i >= 0; i--) {\r\n      if (colDensity[i] > threshold) {\r\n        right = i + 1;\r\n        break;\r\n      }\r\n    }\r\n    \r\n    if (top >= bottom || left >= right) {\r\n      return null;\r\n    }\r\n    \r\n    return { top, bottom, left, right };\r\n  }\r\n}\r\n\r\n// ÂØºÂá∫Âçï‰æã\r\nexport default new PatternExtractor();\r\n\r\n// ‰πüÂØºÂá∫Á±ª‰æõÊµãËØï‰ΩøÁî®\r\nexport { PatternExtractor };\r\n","/**\r\n * Background Removal API Service\r\n * \r\n * This module provides an interface and implementation for background removal services.\r\n * Currently implements Remove.bg API integration with error handling and retry logic.\r\n * \r\n * Requirements: 2.2, 5.2, 5.3\r\n */\r\n\r\nimport axios from 'axios';\r\nimport {\r\n  REMOVE_BG_API_ENDPOINT,\r\n  API_RETRY_CONFIG,\r\n  API_TIMEOUT,\r\n  ERROR_TYPES,\r\n  ERROR_CODES,\r\n  ERROR_MESSAGES,\r\n  HTTP_STATUS\r\n} from '../constants';\r\n\r\n/**\r\n * Base interface for background removal services\r\n * All background removal implementations should follow this interface\r\n */\r\nexport class BackgroundRemovalAPI {\r\n  /**\r\n   * Remove background from an image\r\n   * @returns {Promise<Blob>} - The processed image with background removed\r\n   */\r\n  async removeBackground() {\r\n    throw new Error('removeBackground must be implemented by subclass');\r\n  }\r\n\r\n  /**\r\n   * Check if the API service is available\r\n   * @returns {Promise<boolean>} - True if service is available\r\n   */\r\n  async checkApiStatus() {\r\n    throw new Error('checkApiStatus must be implemented by subclass');\r\n  }\r\n}\r\n\r\n/**\r\n * Remove.bg API Service Implementation\r\n * \r\n * Integrates with Remove.bg API for AI-powered background removal.\r\n * Includes automatic retry logic with exponential backoff and comprehensive error handling.\r\n * \r\n * @see https://www.remove.bg/api\r\n */\r\nexport class RemoveBgService extends BackgroundRemovalAPI {\r\n  /**\r\n   * Create a new RemoveBgService instance\r\n   * @param {string} apiKey - Remove.bg API key\r\n   * @param {Object} config - Optional configuration overrides\r\n   */\r\n  constructor(apiKey, config = {}) {\r\n    super();\r\n    \r\n    if (!apiKey) {\r\n      throw new Error('API key is required for RemoveBgService');\r\n    }\r\n    \r\n    this.apiKey = apiKey;\r\n    this.endpoint = config.endpoint || REMOVE_BG_API_ENDPOINT;\r\n    this.timeout = config.timeout || API_TIMEOUT;\r\n    this.maxRetries = config.maxRetries || API_RETRY_CONFIG.MAX_ATTEMPTS;\r\n    this.initialDelay = config.initialDelay || API_RETRY_CONFIG.INITIAL_DELAY;\r\n    this.backoffMultiplier = config.backoffMultiplier || API_RETRY_CONFIG.BACKOFF_MULTIPLIER;\r\n    \r\n    // Create axios instance with default config\r\n    this.client = axios.create({\r\n      timeout: this.timeout,\r\n      headers: {\r\n        'X-Api-Key': this.apiKey\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Remove background from an image using Remove.bg API\r\n   * \r\n   * @param {Blob} imageBlob - The image to process\r\n   * @param {Object} options - Processing options\r\n   * @param {string} options.size - Output size ('auto', 'preview', 'full', 'medium', 'hd', '4k')\r\n   * @param {string} options.type - Foreground type ('auto', 'person', 'product', 'car')\r\n   * @param {string} options.format - Output format ('auto', 'png', 'jpg', 'zip')\r\n   * @param {boolean} options.crop - Whether to crop off all empty regions\r\n   * @param {string} options.crop_margin - Margin around the cropped subject (e.g. '20px', '10%')\r\n   * @param {string} options.position - Position of subject ('original', 'center', '0%', '50%')\r\n   * @param {string} options.roi - Region of interest ('0% 0% 100% 100%')\r\n   * @returns {Promise<Blob>} - The processed image with background removed\r\n   * @throws {Error} - Throws error with type and details for different failure scenarios\r\n   */\r\n  async removeBackground(imageBlob, options = {}) {\r\n    const {\r\n      size = 'auto',\r\n      type = 'auto',\r\n      format = 'png',\r\n      crop = false,\r\n      crop_margin = '0px',\r\n      position = 'original',\r\n      roi = '0% 0% 100% 100%'\r\n    } = options;\r\n\r\n    // Validate input\r\n    if (!imageBlob || !(imageBlob instanceof Blob)) {\r\n      throw this._createError(\r\n        ERROR_TYPES.PROCESSING_ERROR,\r\n        ERROR_CODES.API_BAD_REQUEST,\r\n        'Invalid image blob provided'\r\n      );\r\n    }\r\n\r\n    // Prepare form data\r\n    const formData = new FormData();\r\n    formData.append('image_file', imageBlob);\r\n    formData.append('size', size);\r\n    formData.append('type', type);\r\n    formData.append('format', format);\r\n    \r\n    // Ê∑ªÂä†Ë£ÅÂâ™ÂèÇÊï∞\r\n    if (crop) {\r\n      formData.append('crop', 'true');\r\n      if (crop_margin) {\r\n        formData.append('crop_margin', crop_margin);\r\n      }\r\n    }\r\n    \r\n    // Ê∑ªÂä†‰ΩçÁΩÆÂèÇÊï∞\r\n    if (position && position !== 'original') {\r\n      formData.append('position', position);\r\n    }\r\n    \r\n    // Ê∑ªÂä†ÊÑüÂÖ¥Ë∂£Âå∫ÂüüÂèÇÊï∞\r\n    if (roi && roi !== '0% 0% 100% 100%') {\r\n      formData.append('roi', roi);\r\n    }\r\n\r\n    console.log('[RemoveBgService] ËØ∑Ê±ÇÂèÇÊï∞:', {\r\n      size, type, format, crop, crop_margin, position, roi\r\n    });\r\n\r\n    // Execute with retry logic\r\n    return await this._executeWithRetry(async () => {\r\n      try {\r\n        const response = await this.client.post(this.endpoint, formData, {\r\n          responseType: 'blob',\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          }\r\n        });\r\n\r\n        // Validate response\r\n        if (!response.data || !(response.data instanceof Blob)) {\r\n          throw this._createError(\r\n            ERROR_TYPES.PROCESSING_ERROR,\r\n            ERROR_CODES.API_BAD_REQUEST,\r\n            'Invalid response from API'\r\n          );\r\n        }\r\n\r\n        console.log('[RemoveBgService] API ÂìçÂ∫îÊàêÂäüÔºåÂõæÁâáÂ§ßÂ∞è:', response.data.size, 'bytes');\r\n\r\n        return response.data;\r\n      } catch (error) {\r\n        // Handle axios errors\r\n        if (error.response) {\r\n          // Server responded with error status\r\n          throw this._handleApiError(error.response);\r\n        } else if (error.request) {\r\n          // Request made but no response received\r\n          throw this._createError(\r\n            ERROR_TYPES.NETWORK_ERROR,\r\n            ERROR_CODES.NETWORK_TIMEOUT,\r\n            'No response from server',\r\n            true // retryable\r\n          );\r\n        } else {\r\n          // Error in request setup\r\n          throw this._createError(\r\n            ERROR_TYPES.PROCESSING_ERROR,\r\n            ERROR_CODES.API_BAD_REQUEST,\r\n            error.message || 'Request setup failed'\r\n          );\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Check if Remove.bg API is available\r\n   * \r\n   * @returns {Promise<boolean>} - True if API is available and responding\r\n   */\r\n  async checkApiStatus() {\r\n    try {\r\n      // Create a minimal test request to check API availability\r\n      // We'll use account endpoint which is lightweight\r\n      const response = await this.client.get('https://api.remove.bg/v1.0/account', {\r\n        timeout: 5000 // Short timeout for status check\r\n      });\r\n      \r\n      return response.status === HTTP_STATUS.OK;\r\n    } catch (error) {\r\n      // API is not available or key is invalid\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Execute an operation with retry logic and exponential backoff\r\n   * \r\n   * @private\r\n   * @param {Function} operation - Async operation to execute\r\n   * @returns {Promise<any>} - Result of the operation\r\n   * @throws {Error} - Throws the last error if all retries fail\r\n   */\r\n  async _executeWithRetry(operation) {\r\n    let lastError;\r\n    \r\n    for (let attempt = 1; attempt <= this.maxRetries; attempt++) {\r\n      try {\r\n        return await operation();\r\n      } catch (error) {\r\n        lastError = error;\r\n        \r\n        // Don't retry if error is not retryable\r\n        if (!error.retryable) {\r\n          throw error;\r\n        }\r\n        \r\n        // Don't retry on last attempt\r\n        if (attempt === this.maxRetries) {\r\n          throw error;\r\n        }\r\n        \r\n        // Calculate delay with exponential backoff\r\n        const delay = this.initialDelay * Math.pow(this.backoffMultiplier, attempt - 1);\r\n        \r\n        // Wait before retrying\r\n        await this._sleep(delay);\r\n      }\r\n    }\r\n    \r\n    // This should never be reached, but just in case\r\n    throw lastError;\r\n  }\r\n\r\n  /**\r\n   * Handle API error responses and create appropriate error objects\r\n   * \r\n   * @private\r\n   * @param {Object} response - Axios error response\r\n   * @returns {Error} - Formatted error object\r\n   */\r\n  _handleApiError(response) {\r\n    const status = response.status;\r\n    \r\n    switch (status) {\r\n      case HTTP_STATUS.BAD_REQUEST:\r\n        return this._createError(\r\n          ERROR_TYPES.API_ERROR,\r\n          ERROR_CODES.API_BAD_REQUEST,\r\n          'Invalid image or request parameters',\r\n          false\r\n        );\r\n        \r\n      case HTTP_STATUS.UNAUTHORIZED:\r\n      case HTTP_STATUS.FORBIDDEN:\r\n        return this._createError(\r\n          ERROR_TYPES.API_ERROR,\r\n          ERROR_CODES.API_KEY_INVALID,\r\n          'Invalid or missing API key',\r\n          false\r\n        );\r\n        \r\n      case HTTP_STATUS.PAYMENT_REQUIRED:\r\n      case HTTP_STATUS.TOO_MANY_REQUESTS:\r\n        return this._createError(\r\n          ERROR_TYPES.API_ERROR,\r\n          ERROR_CODES.API_QUOTA_EXCEEDED,\r\n          'API quota exceeded or payment required',\r\n          false\r\n        );\r\n        \r\n      case HTTP_STATUS.INTERNAL_SERVER_ERROR:\r\n      case HTTP_STATUS.SERVICE_UNAVAILABLE:\r\n        return this._createError(\r\n          ERROR_TYPES.API_ERROR,\r\n          ERROR_CODES.API_SERVICE_UNAVAILABLE,\r\n          'API service temporarily unavailable',\r\n          true // retryable\r\n        );\r\n        \r\n      default:\r\n        return this._createError(\r\n          ERROR_TYPES.API_ERROR,\r\n          ERROR_CODES.API_SERVICE_UNAVAILABLE,\r\n          `API error: ${status}`,\r\n          status >= 500 // Retry on 5xx errors\r\n        );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a standardized error object\r\n   * \r\n   * @private\r\n   * @param {string} type - Error type from ERROR_TYPES\r\n   * @param {string} code - Error code from ERROR_CODES\r\n   * @param {string} details - Detailed error message\r\n   * @param {boolean} retryable - Whether the error is retryable\r\n   * @returns {Error} - Error object with additional properties\r\n   */\r\n  _createError(type, code, details, retryable = false) {\r\n    const error = new Error(ERROR_MESSAGES[code] || details);\r\n    error.type = type;\r\n    error.code = code;\r\n    error.details = details;\r\n    error.retryable = retryable;\r\n    return error;\r\n  }\r\n\r\n  /**\r\n   * Sleep for specified milliseconds\r\n   * \r\n   * @private\r\n   * @param {number} ms - Milliseconds to sleep\r\n   * @returns {Promise<void>}\r\n   */\r\n  _sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n  }\r\n}\r\n\r\n/**\r\n * Factory function to create a background removal service\r\n * \r\n * @param {string} provider - Service provider ('removebg')\r\n * @param {string} apiKey - API key for the provider\r\n * @param {Object} config - Optional configuration\r\n * @returns {BackgroundRemovalAPI} - Background removal service instance\r\n */\r\nexport function createBackgroundRemovalService(provider, apiKey, config = {}) {\r\n  switch (provider.toLowerCase()) {\r\n    case 'removebg':\r\n    case 'remove.bg':\r\n      return new RemoveBgService(apiKey, config);\r\n      \r\n    default:\r\n      throw new Error(`Unsupported background removal provider: ${provider}`);\r\n  }\r\n}\r\n\r\n// Default export\r\nexport default {\r\n  BackgroundRemovalAPI,\r\n  RemoveBgService,\r\n  createBackgroundRemovalService\r\n};\r\n","/**\r\n * Image Processor Service\r\n * \r\n * This service orchestrates the image processing workflow:\r\n * 1. Compress large images before API upload\r\n * 2. Call background removal API\r\n * 3. Convert results to DataURL for display\r\n * 4. Cache processed results to avoid redundant API calls\r\n * \r\n * Requirements: 2.1, 2.2, 2.3, 8.2, 8.5\r\n */\r\n\r\nimport CanvasUtility from './CanvasUtility';\r\nimport PatternExtractor from './PatternExtractor';\r\nimport {\r\n  MAX_IMAGE_WIDTH,\r\n  MAX_IMAGE_HEIGHT,\r\n  OUTPUT_FORMAT,\r\n  PNG_QUALITY,\r\n  MAX_CACHE_SIZE,\r\n  CACHE_EXPIRATION_TIME,\r\n  ERROR_TYPES,\r\n  ERROR_CODES,\r\n  ERROR_MESSAGES,\r\n  ENABLE_PATTERN_EXTRACTION,\r\n  PATTERN_PADDING\r\n} from '../constants';\r\n\r\n/**\r\n * ImageProcessorService class\r\n * \r\n * Coordinates the image processing pipeline from upload to extraction.\r\n * Includes compression, background removal, and result caching.\r\n */\r\nclass ImageProcessorService {\r\n  constructor() {\r\n    this.canvasUtil = CanvasUtility;\r\n    this.patternExtractor = PatternExtractor;\r\n    this.backgroundRemovalApi = null;\r\n    \r\n    // Cache for processed results\r\n    // Key: file hash/identifier, Value: { result, timestamp }\r\n    this.cache = new Map();\r\n  }\r\n\r\n  /**\r\n   * Set the background removal API service\r\n   * \r\n   * @param {Object} apiService - Background removal API service instance\r\n   */\r\n  setBackgroundRemovalApi(apiService) {\r\n    this.backgroundRemovalApi = apiService;\r\n  }\r\n\r\n  /**\r\n   * Main image processing workflow\r\n   * \r\n   * Processes an image file through the complete extraction pipeline:\r\n   * 1. Check cache for existing results\r\n   * 2. Compress image if needed\r\n   * 3. Remove background via API\r\n   * 4. Convert to DataURL\r\n   * 5. Cache the result\r\n   * \r\n   * @param {File} imageFile - The image file to process\r\n   * @returns {Promise<Object>} Processing result\r\n   * @returns {string} result.originalDataUrl - Original image as DataURL\r\n   * @returns {string} result.extractedDataUrl - Extracted design as DataURL\r\n   * @returns {number} result.width - Image width\r\n   * @returns {number} result.height - Image height\r\n   * @returns {number} result.processingTime - Processing time in milliseconds\r\n   * @returns {boolean} result.fromCache - Whether result was from cache\r\n   * @throws {Error} If processing fails\r\n   * \r\n   * Requirements: 2.1, 2.2, 2.3, 8.5\r\n   */\r\n  async processImage(imageFile) {\r\n    const startTime = Date.now();\r\n\r\n    try {\r\n      // Validate input\r\n      if (!imageFile || !(imageFile instanceof File)) {\r\n        throw this._createError(\r\n          ERROR_TYPES.PROCESSING_ERROR,\r\n          ERROR_CODES.API_BAD_REQUEST,\r\n          'Invalid image file provided'\r\n        );\r\n      }\r\n\r\n      // Check if API service is configured\r\n      if (!this.backgroundRemovalApi) {\r\n        throw this._createError(\r\n          ERROR_TYPES.API_ERROR,\r\n          ERROR_CODES.API_SERVICE_UNAVAILABLE,\r\n          'Background removal service not configured'\r\n        );\r\n      }\r\n\r\n      // Generate cache key from file properties\r\n      const cacheKey = this._generateCacheKey(imageFile);\r\n\r\n      // Check cache first\r\n      const cachedResult = this._getCachedResult(cacheKey);\r\n      if (cachedResult) {\r\n        return {\r\n          ...cachedResult,\r\n          processingTime: Date.now() - startTime,\r\n          fromCache: true\r\n        };\r\n      }\r\n\r\n      // Convert file to DataURL for original display\r\n      const originalDataUrl = await this._fileToDataUrl(imageFile);\r\n\r\n      // Load image to get dimensions\r\n      const originalImage = await this.canvasUtil.loadImage(originalDataUrl);\r\n\r\n      // Compress image if it's too large\r\n      const imageBlob = await this._prepareImageForApi(imageFile, originalImage);\r\n\r\n      // Remove background via API with auto-crop enabled\r\n      const extractedBlob = await this.removeBackground(imageBlob, {\r\n        size: 'auto',\r\n        type: 'auto',\r\n        format: 'png',\r\n        crop: ENABLE_PATTERN_EXTRACTION,      // ‰ΩøÁî® API ÁöÑËá™Âä®Ë£ÅÂâ™\r\n        crop_margin: `${PATTERN_PADDING}px`   // Ë£ÅÂâ™ËæπË∑ù\r\n      });\r\n\r\n      // Convert extracted result to DataURL\r\n      const finalDataUrl = await this.blobToDataUrl(extractedBlob);\r\n      \r\n      // Load the result to get final dimensions\r\n      const finalImage = await this.canvasUtil.loadImage(finalDataUrl);\r\n      const finalWidth = finalImage.width;\r\n      const finalHeight = finalImage.height;\r\n      \r\n      console.log('[ImageProcessor] ÊúÄÁªàÂ∞∫ÂØ∏:', finalWidth, 'x', finalHeight);\r\n\r\n      // Prepare result object\r\n      const result = {\r\n        originalDataUrl,\r\n        extractedDataUrl: finalDataUrl,\r\n        width: finalWidth,\r\n        height: finalHeight,\r\n        processingTime: Date.now() - startTime,\r\n        fromCache: false\r\n      };\r\n\r\n      // Cache the result\r\n      this._cacheResult(cacheKey, result);\r\n\r\n      return result;\r\n    } catch (error) {\r\n      // Re-throw with additional context if needed\r\n      if (error.type && error.code) {\r\n        throw error;\r\n      }\r\n      \r\n      throw this._createError(\r\n        ERROR_TYPES.PROCESSING_ERROR,\r\n        ERROR_CODES.CANVAS_ERROR,\r\n        error.message || 'Image processing failed'\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Compress image if it exceeds maximum dimensions\r\n   * \r\n   * Large images are resized to fit within MAX_IMAGE_WIDTH x MAX_IMAGE_HEIGHT\r\n   * while maintaining aspect ratio. This reduces API upload time and costs.\r\n   * \r\n   * @param {File} imageFile - Original image file\r\n   * @param {HTMLImageElement} image - Loaded image element\r\n   * @returns {Promise<Blob>} Compressed image blob or original if no compression needed\r\n   * \r\n   * Requirements: 8.2\r\n   */\r\n  async compressImage(imageFile, image) {\r\n    try {\r\n      // Check if compression is needed\r\n      if (image.width <= MAX_IMAGE_WIDTH && image.height <= MAX_IMAGE_HEIGHT) {\r\n        // No compression needed, return original file as blob\r\n        return imageFile;\r\n      }\r\n\r\n      // Resize image using canvas utility\r\n      const resizedCanvas = this.canvasUtil.resizeImage(\r\n        image,\r\n        MAX_IMAGE_WIDTH,\r\n        MAX_IMAGE_HEIGHT\r\n      );\r\n\r\n      // Convert canvas to blob\r\n      const compressedBlob = await this.canvasUtil.imageToBlob(\r\n        resizedCanvas,\r\n        OUTPUT_FORMAT,\r\n        PNG_QUALITY\r\n      );\r\n\r\n      return compressedBlob;\r\n    } catch (error) {\r\n      throw this._createError(\r\n        ERROR_TYPES.PROCESSING_ERROR,\r\n        ERROR_CODES.CANVAS_ERROR,\r\n        `Image compression failed: ${error.message}`\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove background from image using API service\r\n   * \r\n   * Calls the configured background removal API service.\r\n   * The API service handles retries and error handling internally.\r\n   * \r\n   * @param {Blob} imageBlob - Image blob to process\r\n   * @param {Object} options - Processing options\r\n   * @returns {Promise<Blob>} Processed image with background removed\r\n   * @throws {Error} If API call fails\r\n   * \r\n   * Requirements: 2.2\r\n   */\r\n  async removeBackground(imageBlob, options = {}) {\r\n    if (!this.backgroundRemovalApi) {\r\n      throw this._createError(\r\n        ERROR_TYPES.API_ERROR,\r\n        ERROR_CODES.API_SERVICE_UNAVAILABLE,\r\n        'Background removal service not configured'\r\n      );\r\n    }\r\n\r\n    // ‰ΩøÁî® Remove.bg API ÁöÑ crop ÂèÇÊï∞Ëá™Âä®Ë£ÅÂâ™\r\n    const apiOptions = {\r\n      size: options.size || 'auto',\r\n      type: options.type || 'auto',\r\n      format: options.format || 'png',\r\n      crop: true,              // Ëá™Âä®Ë£ÅÂâ™Á©∫ÁôΩÂå∫Âüü\r\n      crop_margin: '20px',     // Ë£ÅÂâ™ËæπË∑ù\r\n      ...options\r\n    };\r\n\r\n    console.log('[ImageProcessor] API ÈÄâÈ°π:', apiOptions);\r\n\r\n    // Call API service (it handles retries internally)\r\n    const resultBlob = await this.backgroundRemovalApi.removeBackground(imageBlob, apiOptions);\r\n\r\n    return resultBlob;\r\n  }\r\n\r\n  /**\r\n   * Convert Blob to DataURL\r\n   * \r\n   * Converts a Blob to a DataURL string for display in img elements.\r\n   * \r\n   * @param {Blob} blob - Blob to convert\r\n   * @returns {Promise<string>} DataURL string\r\n   * @throws {Error} If conversion fails\r\n   * \r\n   * Requirements: 2.3\r\n   */\r\n  async blobToDataUrl(blob) {\r\n    return new Promise((resolve, reject) => {\r\n      if (!blob || !(blob instanceof Blob)) {\r\n        reject(this._createError(\r\n          ERROR_TYPES.PROCESSING_ERROR,\r\n          ERROR_CODES.CANVAS_ERROR,\r\n          'Invalid blob provided'\r\n        ));\r\n        return;\r\n      }\r\n\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = () => {\r\n        resolve(reader.result);\r\n      };\r\n\r\n      reader.onerror = () => {\r\n        reject(this._createError(\r\n          ERROR_TYPES.PROCESSING_ERROR,\r\n          ERROR_CODES.CANVAS_ERROR,\r\n          'Failed to convert blob to DataURL'\r\n        ));\r\n      };\r\n\r\n      reader.readAsDataURL(blob);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Convert File to DataURL\r\n   * \r\n   * @private\r\n   * @param {File} file - File to convert\r\n   * @returns {Promise<string>} DataURL string\r\n   */\r\n  async _fileToDataUrl(file) {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = () => {\r\n        resolve(reader.result);\r\n      };\r\n\r\n      reader.onerror = () => {\r\n        reject(this._createError(\r\n          ERROR_TYPES.PROCESSING_ERROR,\r\n          ERROR_CODES.IMAGE_LOAD_ERROR,\r\n          'Failed to read image file'\r\n        ));\r\n      };\r\n\r\n      reader.readAsDataURL(file);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Prepare image for API upload (compress if needed)\r\n   * \r\n   * @private\r\n   * @param {File} imageFile - Original image file\r\n   * @param {HTMLImageElement} image - Loaded image element\r\n   * @returns {Promise<Blob>} Image blob ready for API upload\r\n   */\r\n  async _prepareImageForApi(imageFile, image) {\r\n    // Check if compression is needed\r\n    const needsCompression = \r\n      image.width > MAX_IMAGE_WIDTH || \r\n      image.height > MAX_IMAGE_HEIGHT;\r\n\r\n    if (needsCompression) {\r\n      return await this.compressImage(imageFile, image);\r\n    }\r\n\r\n    // Return original file as-is\r\n    return imageFile;\r\n  }\r\n\r\n  /**\r\n   * Generate cache key from file properties\r\n   * \r\n   * Creates a unique identifier for a file based on its properties.\r\n   * Used for caching processed results.\r\n   * \r\n   * @private\r\n   * @param {File} file - File to generate key for\r\n   * @returns {string} Cache key\r\n   * \r\n   * Requirements: 8.5\r\n   */\r\n  _generateCacheKey(file) {\r\n    // Use file properties to create a unique key\r\n    // Note: This is a simple implementation. For production, consider using\r\n    // a hash of the file content for more reliable cache keys.\r\n    return `${file.name}-${file.size}-${file.lastModified}-${file.type}`;\r\n  }\r\n\r\n  /**\r\n   * Get cached result if available and not expired\r\n   * \r\n   * @private\r\n   * @param {string} cacheKey - Cache key to lookup\r\n   * @returns {Object|null} Cached result or null if not found/expired\r\n   * \r\n   * Requirements: 8.5\r\n   */\r\n  _getCachedResult(cacheKey) {\r\n    const cached = this.cache.get(cacheKey);\r\n\r\n    if (!cached) {\r\n      return null;\r\n    }\r\n\r\n    // Check if cache entry has expired\r\n    const now = Date.now();\r\n    const age = now - cached.timestamp;\r\n\r\n    if (age > CACHE_EXPIRATION_TIME) {\r\n      // Cache expired, remove it\r\n      this.cache.delete(cacheKey);\r\n      return null;\r\n    }\r\n\r\n    return cached.result;\r\n  }\r\n\r\n  /**\r\n   * Cache processing result\r\n   * \r\n   * Stores the processing result in cache with timestamp.\r\n   * Implements LRU eviction when cache size exceeds MAX_CACHE_SIZE.\r\n   * \r\n   * @private\r\n   * @param {string} cacheKey - Cache key\r\n   * @param {Object} result - Processing result to cache\r\n   * \r\n   * Requirements: 8.5\r\n   */\r\n  _cacheResult(cacheKey, result) {\r\n    // Check cache size and evict oldest entry if needed\r\n    if (this.cache.size >= MAX_CACHE_SIZE) {\r\n      // Get the first (oldest) key and delete it\r\n      const firstKey = this.cache.keys().next().value;\r\n      this.cache.delete(firstKey);\r\n    }\r\n\r\n    // Store result with timestamp\r\n    this.cache.set(cacheKey, {\r\n      result,\r\n      timestamp: Date.now()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Clear all cached results\r\n   * \r\n   * Useful for testing or when user wants to force reprocessing.\r\n   */\r\n  clearCache() {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Get cache statistics\r\n   * \r\n   * @returns {Object} Cache statistics\r\n   */\r\n  getCacheStats() {\r\n    return {\r\n      size: this.cache.size,\r\n      maxSize: MAX_CACHE_SIZE,\r\n      keys: Array.from(this.cache.keys())\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Create a standardized error object\r\n   * \r\n   * @private\r\n   * @param {string} type - Error type from ERROR_TYPES\r\n   * @param {string} code - Error code from ERROR_CODES\r\n   * @param {string} details - Detailed error message\r\n   * @param {boolean} retryable - Whether the error is retryable\r\n   * @returns {Error} Error object with additional properties\r\n   */\r\n  _createError(type, code, details, retryable = false) {\r\n    const error = new Error(ERROR_MESSAGES[code] || details);\r\n    error.type = type;\r\n    error.code = code;\r\n    error.details = details;\r\n    error.retryable = retryable;\r\n    return error;\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nconst imageProcessorService = new ImageProcessorService();\r\n\r\n// Initialize with Remove.bg API service\r\n// Requirements: 2.2\r\nimport { createBackgroundRemovalService } from './BackgroundRemovalAPI';\r\nimport { REMOVE_BG_API_KEY } from '../constants';\r\n\r\n// Set up background removal API if key is available\r\nif (REMOVE_BG_API_KEY) {\r\n  try {\r\n    const bgRemovalService = createBackgroundRemovalService('removebg', REMOVE_BG_API_KEY);\r\n    imageProcessorService.setBackgroundRemovalApi(bgRemovalService);\r\n  } catch (error) {\r\n    console.error('Failed to initialize background removal service:', error);\r\n  }\r\n} else {\r\n  console.warn('Remove.bg API key not configured. Set VUE_APP_REMOVE_BG_API_KEY in .env file.');\r\n}\r\n\r\nexport default imageProcessorService;\r\n\r\n// Also export class for testing\r\nexport { ImageProcessorService };\r\n","<template>\n  <div id=\"app\" role=\"application\" aria-label=\"TÊÅ§ÂõæÊ°àÊèêÂèñÂ∑•ÂÖ∑\">\n    <!-- Skip to Main Content Link for Screen Readers -->\n    <a href=\"#main-content\" class=\"skip-to-main\">Ë∑≥ËΩ¨Âà∞‰∏ªÂÜÖÂÆπ</a>\n\n    <ErrorBoundary\n      :on-retry=\"retry\"\n      :on-reset=\"reset\"\n    >\n      <!-- Header -->\n      <header class=\"app-header\" role=\"banner\">\n        <h1 class=\"app-title\">\n          <span class=\"title-icon\" aria-hidden=\"true\">üëï</span>\n          TÊÅ§ÂõæÊ°àÊèêÂèñÂ∑•ÂÖ∑\n        </h1>\n        <p class=\"app-subtitle\">\n          Ëá™Âä®ÊèêÂèñTÊÅ§‰∏äÁöÑÂõæÊ°àËÆæËÆ°ÔºåÁîüÊàêÈÄèÊòéËÉåÊôØÁöÑÂπ≥Èù¢ËÆæËÆ°Âõæ\n        </p>\n      </header>\n\n      <!-- Main Content -->\n      <main id=\"main-content\" class=\"app-main\" role=\"main\" aria-label=\"‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü\">\n        <!-- Step 1: Upload Image -->\n        <section \n          class=\"app-section\" \n          aria-labelledby=\"upload-heading\"\n          role=\"region\"\n        >\n          <div class=\"section-header\">\n            <span class=\"step-number\" aria-hidden=\"true\">1</span>\n            <h2 id=\"upload-heading\" class=\"section-title\">‰∏ä‰º†ÂõæÁâá</h2>\n          </div>\n          <ImageUploader\n            @image-selected=\"uploadImage\"\n            @upload-error=\"handleError\"\n            @image-cleared=\"reset\"\n          />\n        </section>\n\n        <!-- Step 2: Process Image -->\n        <section \n          v-if=\"originalImageUrl\" \n          class=\"app-section\"\n          aria-labelledby=\"process-heading\"\n          role=\"region\"\n        >\n          <div class=\"section-header\">\n            <span class=\"step-number\" aria-hidden=\"true\">2</span>\n            <h2 id=\"process-heading\" class=\"section-title\">ÊèêÂèñÂõæÊ°à</h2>\n          </div>\n          <ImageProcessor\n            :is-processing=\"isProcessing\"\n            :can-process=\"canProcess\"\n            :has-result=\"!!extractedImageUrl\"\n            :status=\"processingStatus\"\n            :progress=\"processingProgress\"\n            :error=\"error\"\n            :on-process=\"processImage\"\n            :on-retry=\"retry\"\n            :on-reset=\"reset\"\n          />\n        </section>\n\n        <!-- Step 3: View Results -->\n        <section \n          v-if=\"showComparison\" \n          class=\"app-section\"\n          aria-labelledby=\"results-heading\"\n          role=\"region\"\n          aria-live=\"polite\"\n        >\n          <div class=\"section-header\">\n            <span class=\"step-number\" aria-hidden=\"true\">3</span>\n            <h2 id=\"results-heading\" class=\"section-title\">Êü•ÁúãÁªìÊûú</h2>\n          </div>\n          <ImageComparison\n            :original-image=\"originalImageUrl\"\n            :extracted-image=\"extractedImageUrl\"\n          />\n        </section>\n\n        <!-- Step 4: Download -->\n        <section \n          v-if=\"extractedImageUrl\" \n          class=\"app-section\"\n          aria-labelledby=\"download-heading\"\n          role=\"region\"\n        >\n          <div class=\"section-header\">\n            <span class=\"step-number\" aria-hidden=\"true\">4</span>\n            <h2 id=\"download-heading\" class=\"section-title\">‰∏ãËΩΩÂõæÊ°à</h2>\n          </div>\n          <DownloadButton\n            :extracted-image=\"extractedImageUrl\"\n            @download-success=\"handleDownloadSuccess\"\n            @download-error=\"handleError\"\n          />\n        </section>\n\n        <!-- Screen Reader Status Announcements -->\n        <div \n          class=\"sr-only\" \n          role=\"status\" \n          aria-live=\"polite\" \n          aria-atomic=\"true\"\n        >\n          {{ screenReaderStatus }}\n        </div>\n      </main>\n\n      <!-- Footer -->\n      <footer class=\"app-footer\" role=\"contentinfo\">\n        <p class=\"footer-text\">\n          ‰ΩøÁî®AIÊäÄÊúØËá™Âä®ÊèêÂèñÂõæÊ°à ¬∑ ÊîØÊåÅJPG„ÄÅPNG„ÄÅWebPÊ†ºÂºè\n        </p>\n      </footer>\n    </ErrorBoundary>\n  </div>\n</template>\n\n<script>\nimport ImageUploader from '@/components/ImageUploader.vue';\nimport ImageProcessor from '@/components/ImageProcessor.vue';\nimport ImageComparison from '@/components/ImageComparison.vue';\nimport DownloadButton from '@/components/DownloadButton.vue';\nimport ErrorBoundary from '@/components/ErrorBoundary.vue';\nimport ImageProcessorService from '@/services/ImageProcessorService';\nimport DownloadManager from '@/services/DownloadManager';\nimport { ERROR_TYPES, ERROR_CODES, ERROR_MESSAGES, PROCESSING_STATUS } from '@/constants';\n\nexport default {\n  name: 'App',\n  \n  components: {\n    ImageUploader,\n    ImageProcessor,\n    ImageComparison,\n    DownloadButton,\n    ErrorBoundary\n  },\n  \n  data() {\n    return {\n      // Upload state\n      uploadedFile: null,\n      originalImageUrl: null,\n      \n      // Processing state\n      isProcessing: false,\n      processingProgress: 0,\n      processingStatus: PROCESSING_STATUS.IDLE,\n      \n      // Result state\n      extractedImageUrl: null,\n      processedImage: null,\n      \n      // Error state\n      error: null,\n      \n      // UI state\n      showComparison: false,\n      isMobile: false\n    };\n  },\n  \n  computed: {\n    /**\n     * Check if download button should be visible\n     * Requirements: 4.1\n     */\n    canDownload() {\n      return this.extractedImageUrl !== null && !this.isProcessing;\n    },\n    \n    /**\n     * Check if process button should be enabled\n     * Requirements: 1.6\n     */\n    canProcess() {\n      return this.originalImageUrl !== null && !this.isProcessing;\n    },\n    \n    /**\n     * Check if there's an error that can be retried\n     * Requirements: 5.2\n     */\n    canRetry() {\n      return this.error !== null && this.error.retryable;\n    },\n    \n    /**\n     * Screen reader status announcements\n     * Requirements: 7.5\n     */\n    screenReaderStatus() {\n      if (this.isProcessing) {\n        return `Ê≠£Âú®Â§ÑÁêÜÂõæÁâáÔºåËøõÂ∫¶ ${this.processingProgress}%`;\n      }\n      if (this.error) {\n        return `ÈîôËØØÔºö${this.error.message}`;\n      }\n      if (this.extractedImageUrl) {\n        return 'ÂõæÊ°àÊèêÂèñÊàêÂäüÔºåÂèØ‰ª•‰∏ãËΩΩ';\n      }\n      if (this.originalImageUrl) {\n        return 'ÂõæÁâáÂ∑≤‰∏ä‰º†ÔºåÂèØ‰ª•ÂºÄÂßãÊèêÂèñ';\n      }\n      return 'ËØ∑‰∏ä‰º†TÊÅ§ÂõæÁâá';\n    }\n  },\n  \n  mounted() {\n    // Detect mobile viewport\n    this.checkMobile();\n    window.addEventListener('resize', this.checkMobile);\n    \n    // Add keyboard navigation support\n    // Requirements: 7.5\n    window.addEventListener('keydown', this.handleKeyboardNavigation);\n    \n    // Remove preload class to enable transitions\n    document.body.classList.remove('preload');\n  },\n  \n  beforeDestroy() {\n    window.removeEventListener('resize', this.checkMobile);\n    window.removeEventListener('keydown', this.handleKeyboardNavigation);\n  },\n  \n  methods: {\n    /**\n     * Handle image upload\n     * Requirements: 1.6, 5.1\n     * \n     * @param {File} file - The uploaded image file\n     * @param {string} dataUrl - The preview DataURL\n     */\n    async uploadImage(file, dataUrl) {\n      try {\n        // Clear any previous errors\n        this.error = null;\n        \n        // Store uploaded file and preview\n        this.uploadedFile = file;\n        this.originalImageUrl = dataUrl;\n        \n        // Update processing status\n        this.processingStatus = PROCESSING_STATUS.IDLE;\n        \n        // Clear previous results\n        this.extractedImageUrl = null;\n        this.processedImage = null;\n        this.showComparison = false;\n        \n      } catch (err) {\n        this.handleError({\n          type: ERROR_TYPES.UPLOAD_ERROR,\n          code: ERROR_CODES.FILE_CORRUPTED,\n          message: ERROR_MESSAGES[ERROR_CODES.FILE_CORRUPTED],\n          details: err.message,\n          retryable: false\n        });\n      }\n    },\n    \n    /**\n     * Process the uploaded image to extract design\n     * Requirements: 2.4, 2.5, 2.6, 5.1\n     */\n    async processImage() {\n      if (!this.uploadedFile) {\n        this.handleError({\n          type: ERROR_TYPES.PROCESSING_ERROR,\n          code: ERROR_CODES.IMAGE_LOAD_ERROR,\n          message: 'ËØ∑ÂÖà‰∏ä‰º†ÂõæÁâá',\n          details: 'No file uploaded',\n          retryable: false\n        });\n        return;\n      }\n      \n      try {\n        // Set processing state\n        this.isProcessing = true;\n        this.error = null;\n        this.processingStatus = PROCESSING_STATUS.REMOVING_BACKGROUND;\n        this.processingProgress = 0;\n        \n        // Process the image\n        const result = await ImageProcessorService.processImage(this.uploadedFile);\n        \n        // Store results\n        this.processedImage = result;\n        this.extractedImageUrl = result.extractedDataUrl;\n        \n        // Update UI state\n        this.processingStatus = PROCESSING_STATUS.COMPLETE;\n        this.processingProgress = 100;\n        this.showComparison = true;\n        \n      } catch (err) {\n        // Handle different error types\n        this.handleProcessingError(err);\n        \n      } finally {\n        this.isProcessing = false;\n      }\n    },\n    \n    /**\n     * Download the extracted design\n     * Requirements: 4.2, 4.3, 4.4\n     */\n    downloadExtracted() {\n      if (!this.extractedImageUrl) {\n        this.handleError({\n          type: ERROR_TYPES.PROCESSING_ERROR,\n          code: ERROR_CODES.IMAGE_LOAD_ERROR,\n          message: 'Ê≤°ÊúâÂèØ‰∏ãËΩΩÁöÑÂõæÁâá',\n          details: 'No extracted image available',\n          retryable: false\n        });\n        return;\n      }\n      \n      try {\n        // Generate filename with timestamp\n        const filename = DownloadManager.generateFilename();\n        \n        // Trigger download\n        DownloadManager.downloadImage(this.extractedImageUrl, filename);\n        \n        // Could emit success event here for UI feedback\n        // Requirements: 4.4\n        \n      } catch (err) {\n        this.handleError({\n          type: ERROR_TYPES.PROCESSING_ERROR,\n          code: ERROR_CODES.CANVAS_ERROR,\n          message: '‰∏ãËΩΩÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\n          details: err.message,\n          retryable: true\n        });\n      }\n    },\n    \n    /**\n     * Reset application to initial state\n     * Requirements: 5.2\n     */\n    reset() {\n      // Clear all state\n      this.uploadedFile = null;\n      this.originalImageUrl = null;\n      this.extractedImageUrl = null;\n      this.processedImage = null;\n      this.error = null;\n      this.isProcessing = false;\n      this.processingProgress = 0;\n      this.processingStatus = PROCESSING_STATUS.IDLE;\n      this.showComparison = false;\n    },\n    \n    /**\n     * Handle processing errors with appropriate error types\n     * Requirements: 2.5, 5.2, 5.3\n     * \n     * @param {Error} err - The error object\n     */\n    handleProcessingError(err) {\n      // Check if it's already a structured error\n      if (err && err.type && err.code && typeof err.message === 'string' && typeof err.retryable === 'boolean') {\n        this.handleError(err);\n        return;\n      }\n      \n      // Convert Error object to plain object\n      const errorMessage = err && err.message ? err.message : String(err);\n      \n      // Determine error type based on error message/properties\n      let errorType = ERROR_TYPES.PROCESSING_ERROR;\n      let errorCode = ERROR_CODES.CANVAS_ERROR;\n      let retryable = true;\n      \n      // Network errors\n      if (errorMessage.includes('network') || errorMessage.includes('fetch') || errorMessage.includes('Network')) {\n        errorType = ERROR_TYPES.NETWORK_ERROR;\n        errorCode = ERROR_CODES.NETWORK_OFFLINE;\n      }\n      // API errors\n      else if (err && err.response) {\n        errorType = ERROR_TYPES.API_ERROR;\n        \n        // Map HTTP status codes to error codes\n        if (err.response.status === 401) {\n          errorCode = ERROR_CODES.API_KEY_INVALID;\n          retryable = false;\n        } else if (err.response.status === 429) {\n          errorCode = ERROR_CODES.API_QUOTA_EXCEEDED;\n          retryable = false;\n        } else if (err.response.status === 400) {\n          errorCode = ERROR_CODES.API_BAD_REQUEST;\n          retryable = true;\n        } else if (err.response.status >= 500) {\n          errorCode = ERROR_CODES.API_SERVICE_UNAVAILABLE;\n          retryable = true;\n        }\n      }\n      \n      // Create a plain object error (not Error instance)\n      this.handleError({\n        type: errorType,\n        code: errorCode,\n        message: ERROR_MESSAGES[errorCode] || 'Â§ÑÁêÜÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\n        details: errorMessage,\n        retryable\n      });\n    },\n    \n    /**\n     * Handle errors and update error state\n     * Requirements: 5.1, 5.2\n     * \n     * @param {Object} error - Structured error object\n     */\n    handleError(error) {\n      // Ensure error is a plain object, not an Error instance\n      if (error instanceof Error) {\n        this.error = {\n          type: ERROR_TYPES.PROCESSING_ERROR,\n          code: ERROR_CODES.CANVAS_ERROR,\n          message: error.message || 'Â§ÑÁêÜÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\n          details: error.stack || '',\n          retryable: true\n        };\n      } else {\n        this.error = error;\n      }\n      this.processingStatus = PROCESSING_STATUS.ERROR;\n      this.isProcessing = false;\n    },\n    \n    /**\n     * Retry the last failed operation\n     * Requirements: 5.2\n     */\n    async retry() {\n      if (!this.canRetry) {\n        return;\n      }\n      \n      // Clear error and retry processing\n      this.error = null;\n      await this.processImage();\n    },\n    \n    /**\n     * Check if viewport is mobile size\n     * Requirements: 7.3\n     */\n    checkMobile() {\n      this.isMobile = window.innerWidth < 768;\n    },\n    \n    /**\n     * Handle successful download\n     * Requirements: 4.4\n     */\n    handleDownloadSuccess(data) {\n      console.log('Download successful:', data.filename);\n      // Could show a toast notification here\n    },\n    \n    /**\n     * Handle keyboard navigation\n     * Requirements: 7.5\n     */\n    handleKeyboardNavigation(event) {\n      // Escape key - Reset application\n      if (event.key === 'Escape' && (this.error || this.extractedImageUrl)) {\n        event.preventDefault();\n        this.reset();\n      }\n      \n      // Enter key on process - Trigger processing if ready\n      if (event.key === 'Enter' && this.canProcess && !this.isProcessing && !this.extractedImageUrl) {\n        const activeElement = document.activeElement;\n        // Only trigger if not already focused on a button\n        if (activeElement.tagName !== 'BUTTON' && activeElement.tagName !== 'INPUT') {\n          event.preventDefault();\n          this.processImage();\n        }\n      }\n      \n      // R key - Retry if error is retryable\n      if ((event.key === 'r' || event.key === 'R') && this.canRetry && !event.ctrlKey && !event.metaKey) {\n        const activeElement = document.activeElement;\n        // Only trigger if not in an input field\n        if (activeElement.tagName !== 'INPUT' && activeElement.tagName !== 'TEXTAREA') {\n          event.preventDefault();\n          this.retry();\n        }\n      }\n    }\n  }\n};\n</script>\n\n<style>\n/* Global Styles */\n* {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\n#app {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2d3748;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  min-height: 100vh;\n  padding: 20px;\n}\n\n/* Skip to Main Content Link - Requirements: 7.5 */\n.skip-to-main {\n  position: absolute;\n  top: -40px;\n  left: 0;\n  background: #667eea;\n  color: white;\n  padding: 8px 16px;\n  text-decoration: none;\n  border-radius: 0 0 4px 0;\n  z-index: 1000;\n  font-weight: 600;\n}\n\n.skip-to-main:focus {\n  top: 0;\n  outline: 3px solid white;\n  outline-offset: 2px;\n}\n\n/* Screen Reader Only - Requirements: 7.5 */\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n/* Header */\n.app-header {\n  text-align: center;\n  padding: 40px 20px;\n  color: white;\n}\n\n.app-title {\n  font-size: 42px;\n  font-weight: 800;\n  margin-bottom: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 16px;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n\n.title-icon {\n  font-size: 48px;\n  animation: bounce 2s ease-in-out infinite;\n}\n\n@keyframes bounce {\n  0%, 100% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n}\n\n.app-subtitle {\n  font-size: 18px;\n  opacity: 0.95;\n  max-width: 600px;\n  margin: 0 auto;\n  line-height: 1.6;\n}\n\n/* Main Content */\n.app-main {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n}\n\n/* Section */\n.app-section {\n  background-color: white;\n  border-radius: 16px;\n  padding: 32px;\n  margin-bottom: 24px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);\n  animation: fadeInUp 0.5s ease;\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.section-header {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  margin-bottom: 24px;\n}\n\n.step-number {\n  width: 40px;\n  height: 40px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  font-weight: 700;\n  flex-shrink: 0;\n}\n\n.section-title {\n  font-size: 24px;\n  font-weight: 700;\n  color: #2d3748;\n  margin: 0;\n}\n\n/* Footer */\n.app-footer {\n  text-align: center;\n  padding: 40px 20px;\n  color: white;\n  opacity: 0.9;\n}\n\n.footer-text {\n  font-size: 14px;\n  line-height: 1.6;\n}\n\n/* Mobile Responsive - Requirements: 7.2, 7.3 */\n@media (max-width: 768px) {\n  #app {\n    padding: 15px;\n  }\n\n  .app-header {\n    padding: 30px 15px;\n  }\n\n  .app-title {\n    font-size: 32px;\n    flex-direction: column;\n    gap: 8px;\n  }\n\n  .title-icon {\n    font-size: 40px;\n  }\n\n  .app-subtitle {\n    font-size: 16px;\n  }\n\n  .app-main {\n    padding: 0 10px;\n  }\n\n  .app-section {\n    padding: 24px 20px;\n    margin-bottom: 20px;\n    border-radius: 12px;\n  }\n\n  .section-header {\n    gap: 12px;\n    margin-bottom: 20px;\n  }\n\n  .step-number {\n    width: 36px;\n    height: 36px;\n    font-size: 18px;\n  }\n\n  .section-title {\n    font-size: 20px;\n  }\n\n  .app-footer {\n    padding: 30px 15px;\n  }\n\n  .footer-text {\n    font-size: 13px;\n  }\n}\n\n/* Tablet Responsive */\n@media (max-width: 1024px) and (min-width: 769px) {\n  .app-title {\n    font-size: 38px;\n  }\n\n  .app-section {\n    padding: 28px;\n  }\n}\n\n/* Desktop Large Screens */\n@media (min-width: 1440px) {\n  .app-main {\n    max-width: 1400px;\n  }\n}\n\n/* Loading Animation */\n@keyframes shimmer {\n  0% {\n    background-position: -1000px 0;\n  }\n  100% {\n    background-position: 1000px 0;\n  }\n}\n\n/* Smooth Transitions */\n.app-section {\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.app-section:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 12px 35px rgba(0, 0, 0, 0.18);\n}\n\n/* Print Styles */\n@media print {\n  #app {\n    background: white;\n    padding: 0;\n  }\n\n  .app-header,\n  .app-footer {\n    display: none;\n  }\n\n  .app-section {\n    box-shadow: none;\n    border: 1px solid #e2e8f0;\n    page-break-inside: avoid;\n  }\n\n  .step-number {\n    print-color-adjust: exact;\n    -webkit-print-color-adjust: exact;\n  }\n}\n\n/* Accessibility - Requirements: 7.5 */\n.app-section:focus-within {\n  outline: 3px solid #667eea;\n  outline-offset: 4px;\n}\n\n/* Reduced Motion */\n@media (prefers-reduced-motion: reduce) {\n  * {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n  }\n}\n</style>\n","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=7e420b7d\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=7e420b7d&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\nimport './assets/styles/global.css'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunktshirt_design_extractor\"] = self[\"webpackChunktshirt_design_extractor\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(1720); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","attrs","staticClass","_v","retry","reset","on","uploadImage","handleError","originalImageUrl","isProcessing","canProcess","extractedImageUrl","processingStatus","processingProgress","error","processImage","_e","showComparison","handleDownloadSuccess","_s","screenReaderStatus","staticRenderFns","class","isDragOver","previewUrl","$event","preventDefault","handleDrop","apply","arguments","handleDragOver","handleDragLeave","triggerFileInput","ref","acceptedFormats","join","handleFileSelect","stopPropagation","clearImage","_m","errorMessage","MAX_FILE_SIZE","parseInt","process","ACCEPTED_MIME_TYPES","ACCEPTED_EXTENSIONS","ERROR_TYPES","UPLOAD_ERROR","PROCESSING_ERROR","API_ERROR","NETWORK_ERROR","ERROR_CODES","INVALID_TYPE","FILE_TOO_LARGE","FILE_CORRUPTED","CANVAS_ERROR","IMAGE_LOAD_ERROR","API_KEY_INVALID","API_QUOTA_EXCEEDED","API_SERVICE_UNAVAILABLE","API_BAD_REQUEST","NETWORK_TIMEOUT","NETWORK_OFFLINE","ERROR_MESSAGES","PROCESSING_STATUS","IDLE","UPLOADING","COMPRESSING","REMOVING_BACKGROUND","RENDERING","COMPLETE","ERROR","MAX_IMAGE_WIDTH","MAX_IMAGE_HEIGHT","OUTPUT_FORMAT","PNG_QUALITY","API_RETRY_CONFIG","MAX_ATTEMPTS","INITIAL_DELAY","BACKOFF_MULTIPLIER","API_TIMEOUT","REMOVE_BG_API_ENDPOINT","REMOVE_BG_API_KEY","MOBILE_BREAKPOINT","SUCCESS_MESSAGE_DURATION","ENABLE_PATTERN_EXTRACTION","PATTERN_PADDING","DOWNLOAD_FILENAME_PREFIX","DOWNLOAD_FILE_EXTENSION","MAX_CACHE_SIZE","CACHE_EXPIRATION_TIME","HTTP_STATUS","OK","BAD_REQUEST","UNAUTHORIZED","PAYMENT_REQUIRED","FORBIDDEN","NOT_FOUND","TOO_MANY_REQUESTS","INTERNAL_SERVER_ERROR","SERVICE_UNAVAILABLE","validateFileType","mimeType","isValid","code","message","includes","validateFileSize","fileSize","maxSize","validateFile","file","File","typeValidation","type","sizeValidation","size","fileName","name","hasValidExtension","some","ext","toLowerCase","endsWith","props","maxFileSize","Number","default","Array","data","currentFile","methods","$refs","fileInput","click","event","files","target","length","processFile","dataTransfer","validation","$emit","generatePreview","reader","FileReader","onload","e","result","onerror","readAsDataURL","value","component","hasResult","disabled","handleProcess","loadingMessage","showProgress","style","width","progress","handleReset","retryable","handleRetry","Boolean","status","String","validator","Object","values","undefined","onProcess","Function","onRetry","onReset","computed","originalImage","extractedImage","isMobile","handleImageLoad","mounted","checkMobileLayout","window","addEventListener","beforeDestroy","removeEventListener","innerWidth","isVisible","downloading","isDownloading","success","showSuccess","handleDownload","buttonIcon","buttonText","DownloadManager","downloadImage","dataUrl","filename","Error","link","document","createElement","href","download","body","appendChild","removeChild","generateFilename","prefix","timestamp","Date","toISOString","replace","filenamePrefix","visible","successTimeout","clearTimeout","showSuccessFeedback","console","showErrorFeedback","setTimeout","hasError","showDetails","toggleDetails","detailsExpanded","errorStack","_t","fallbackMessage","errorInfo","isUserFriendlyMessage","stack","errorCaptured","err","vm","info","logError","technicalPatterns","pattern","test","componentName","$options","location","reload","captureError","clearError","CanvasUtility","loadImage","Promise","resolve","reject","img","Image","src","createCanvas","height","isFinite","canvas","imageToBlob","format","quality","HTMLCanvasElement","startsWith","toBlob","blob","resizeImage","image","maxWidth","maxHeight","HTMLImageElement","ctx","getContext","drawImage","ratio","Math","round","addTransparencyGrid","gridSize","color1","color2","newCanvas","y","x","isEvenRow","floor","isEvenCol","useColor1","fillStyle","fillRect","PatternExtractor","extractPattern","options","padding","threshold","log","imageData","getImageData","pixels","bounds","_detectPatternBounds","paddedBounds","left","max","top","right","min","bottom","croppedWidth","croppedHeight","croppedCanvas","croppedCtx","minX","minY","maxX","maxY","hasContent","dominantColor","_detectDominantColor","index","alpha","r","g","b","colorDiff","_colorDistance","_detectPatternBoundsBasic","colorCounts","sampleRate","colorKey","maxCount","dominantColorKey","count","entries","split","map","dr","dg","db","sqrt","smartCrop","densityThreshold","rowDensity","_calculateRowDensity","colDensity","_calculateColumnDensity","_findContentBounds","density","fill","opaquePixels","i","BackgroundRemovalAPI","removeBackground","checkApiStatus","RemoveBgService","constructor","apiKey","config","super","endpoint","timeout","maxRetries","initialDelay","backoffMultiplier","client","axios","create","headers","imageBlob","crop","crop_margin","position","roi","Blob","_createError","formData","FormData","append","_executeWithRetry","async","response","post","responseType","_handleApiError","request","get","operation","lastError","attempt","delay","pow","_sleep","details","ms","createBackgroundRemovalService","provider","ImageProcessorService","canvasUtil","patternExtractor","backgroundRemovalApi","cache","Map","setBackgroundRemovalApi","apiService","imageFile","startTime","now","cacheKey","_generateCacheKey","cachedResult","_getCachedResult","processingTime","fromCache","originalDataUrl","_fileToDataUrl","_prepareImageForApi","extractedBlob","finalDataUrl","blobToDataUrl","finalImage","finalWidth","finalHeight","extractedDataUrl","_cacheResult","compressImage","resizedCanvas","compressedBlob","apiOptions","resultBlob","needsCompression","lastModified","cached","age","delete","firstKey","keys","next","set","clearCache","clear","getCacheStats","from","imageProcessorService","bgRemovalService","warn","components","ImageUploader","ImageProcessor","ImageComparison","DownloadButton","ErrorBoundary","uploadedFile","processedImage","canDownload","canRetry","checkMobile","handleKeyboardNavigation","classList","remove","handleProcessingError","downloadExtracted","errorType","errorCode","key","activeElement","tagName","ctrlKey","metaKey","Vue","productionTip","h","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","globalThis","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","id","chunkLoadingGlobal","self","forEach","bind","push","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}